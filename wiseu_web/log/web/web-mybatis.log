09-03 11:21:59.586 ttp-nio-18084-exec-1 User.selectAdminByAdminId
09-03 11:21:59.644 ttp-nio-18084-exec-1 ==>  Preparing: SELECT a.user_id, a.pass_wd, a.pass_salt, a.grp_cd, a.name_kor, a.name_eng, a.tel_no, a.email, a.user_class, a.usertype_cd, a.lastupdate_dt, a.active_yn, a.accept_yn , a.list_count_per_page, a.soeid, a.geid, a.isa_role, a.work_doc, a.user_role, a.create_user, a.permit_sts, a.permit_dt, a.login_cnt, a.lastlogin_dt , b.grp_nm, b.req_dept_id as req_dept, a.user_id as req_user FROM nvuser a, nvusergrp b WHERE a.grp_cd = b.grp_cd AND a.user_id = ? AND a.active_yn = 'Y' AND a.accept_yn = 'Y' 
09-03 11:21:59.646 ttp-nio-18084-exec-1 ==> Parameters: admin(String)
09-03 11:21:59.648 ttp-nio-18084-exec-1 <==      Total: 1
09-03 11:22:08.630 ttp-nio-18084-exec-4 User.selectAdminByAdminId
09-03 11:22:08.631 ttp-nio-18084-exec-4 ==>  Preparing: SELECT a.user_id, a.pass_wd, a.pass_salt, a.grp_cd, a.name_kor, a.name_eng, a.tel_no, a.email, a.user_class, a.usertype_cd, a.lastupdate_dt, a.active_yn, a.accept_yn , a.list_count_per_page, a.soeid, a.geid, a.isa_role, a.work_doc, a.user_role, a.create_user, a.permit_sts, a.permit_dt, a.login_cnt, a.lastlogin_dt , b.grp_nm, b.req_dept_id as req_dept, a.user_id as req_user FROM nvuser a, nvusergrp b WHERE a.grp_cd = b.grp_cd AND a.user_id = ? AND a.active_yn = 'Y' AND a.accept_yn = 'Y' 
09-03 11:22:08.631 ttp-nio-18084-exec-4 ==> Parameters: admin(String)
09-03 11:22:08.632 ttp-nio-18084-exec-4 <==      Total: 1
09-03 11:22:08.647 ttp-nio-18084-exec-4 Menu.selectRoleMap
09-03 11:22:08.647 ttp-nio-18084-exec-4 ==>  Preparing: SELECT a.menu_link_url, a.menu_cd, b.read_auth, b.write_auth, b.execute_auth FROM nvmenu a, nvmenurole b WHERE a.menu_cd = b.menu_cd AND a.menu_link_url IS NOT NULL AND b.user_id = ? 
09-03 11:22:08.647 ttp-nio-18084-exec-4 ==> Parameters: admin(String)
09-03 11:22:08.692 ttp-nio-18084-exec-4 <==      Total: 46
09-03 11:22:08.693 ttp-nio-18084-exec-4 User.updateLoginFailCountToInitial
09-03 11:22:08.694 ttp-nio-18084-exec-4 ==>  Preparing: UPDATE nvuser SET login_cnt = '0', lastlogin_dt = to_char(sysdate, 'yyyyMMdd') WHERE user_id = ? 
09-03 11:22:08.694 ttp-nio-18084-exec-4 ==> Parameters: admin(String)
09-03 11:22:08.695 ttp-nio-18084-exec-4 <==    Updates: 1
09-03 11:22:08.696 ttp-nio-18084-exec-4 MenuRole.getUserMenuList
09-03 11:22:08.696 ttp-nio-18084-exec-4 ==>  Preparing: SELECT a.user_id, a.menu_cd, a.read_auth, a.write_auth, a.execute_auth, b.menu_link_url FROM nvmenurole a, nvmenu b WHERE a.menu_cd = b.menu_cd AND a.user_id = ? AND b.active_yn = 'Y' AND b.pmenu_cd IS NOT NULL ORDER BY menu_cd, sort_no 
09-03 11:22:08.696 ttp-nio-18084-exec-4 ==> Parameters: admin(String)
09-03 11:22:08.698 ttp-nio-18084-exec-4 <==      Total: 37
09-03 11:22:08.770 ttp-nio-18084-exec-7 Scenario.getScenarioTotalCount
09-03 11:22:08.770 ttp-nio-18084-exec-7 ==>  Preparing: SELECT count(*) FROM nvscenario a, nvcamptag b, nvcampaign c LEFT OUTER JOIN nvsendresult d ON c.campaign_no = d.campaign_no WHERE a.tag_no = b.tag_no AND a.scenario_no = c.scenario_no AND d.resend_sts is null AND c.use_yn = 'Y' AND a.create_dt >= ? AND a.create_dt <= ? 
09-03 11:22:08.770 ttp-nio-18084-exec-7 ==> Parameters: 20200903(String), 20210903(String)
09-03 11:22:08.773 ttp-nio-18084-exec-7 <==      Total: 1
09-03 11:22:08.774 ttp-nio-18084-exec-7 Scenario.getCampaignScenarioList
09-03 11:22:08.774 ttp-nio-18084-exec-7 ==>  Preparing: SELECT coalesce(scenario_no,0) scenario_no, user_id, grp_cd, scenario_nm, finish_yn , (SELECT grp_nm FROM nvusergrp WHERE grp_cd = x.grp_cd) grp_nm , (SELECT name_kor FROM nvuser WHERE user_id = x.user_id) name_kor , (SELECT val FROM nv_cd_mst WHERE cd_cat = '100111' AND cd = x.campaign_sts AND lang = ?) campaign_sts_nm , (SELECT val FROM nv_cd_mst WHERE cd_cat = '100221' AND cd = x.relation_type AND lang = ?) relation_type_nm , to_char(to_date(create_dt, 'yyyymmdd'), 'yy-mm-dd') create_dt , coalesce(campaign_no,0) campaign_no, coalesce(campaign_preface,'') campaign_preface , CASE WHEN sendstart_dtm = '' THEN '' ELSE to_char(to_date(sendstart_dtm, 'yyyymmddhh24miss'), 'yy-mm-dd hh24:mi') END sendstart_dtm , CASE WHEN campaign_sts = 'P' THEN (CASE WHEN approval_sts IS NULL THEN campaign_sts ELSE approval_sts END) ELSE campaign_sts END campaign_sts , relation_type, coalesce(depth_no,0) depth_no, channel_type, campaign_level , divide_yn, ab_test_type, campaign_preface_ab, coalesce(segment_no,-1) segment_no, relation_tree , tag_nm, coalesce(result_seq,0) result_seq, coalesce(segment_size,0) target_cnt FROM ( SELECT row_number() OVER(ORDER BY a.scenario_no DESC, c.relation_tree, c.campaign_no) rnum , a.scenario_no, a.user_id, a.grp_cd, a.scenario_nm, a.scenario_type, a.finish_yn, a.create_dt, b.tag_nm , c.campaign_no, c.campaign_preface, concat(coalesce(c.sendstart_dt,''), coalesce(c.sendstart_tm,'')) sendstart_dtm , c.campaign_sts, c.approval_sts, c.relation_type, c.depth_no, c.channel_type, c.campaign_level , c.divide_yn, c.ab_test_type, c.campaign_preface_ab, c.segment_no, c.relation_tree , d.result_seq, e.segment_size FROM nvscenario a, nvcamptag b, nvcampaign c LEFT OUTER JOIN nvsendresult d ON c.campaign_no = d.campaign_no LEFT OUTER JOIN nvsegment e ON c.segment_no = e.segment_no WHERE a.tag_no = b.tag_no AND a.scenario_no = c.scenario_no AND d.resend_sts is null AND c.use_yn = 'Y' AND a.create_dt >= ? AND a.create_dt <= ? ORDER BY a.scenario_no DESC, relation_tree, c.campaign_no DESC ) x WHERE rnum >= ((? - 1) * ? + 1) AND rnum <= ? * ? ORDER BY scenario_no DESC, relation_tree, campaign_no DESC 
09-03 11:22:08.774 ttp-nio-18084-exec-7 ==> Parameters: ko(String), ko(String), 20200903(String), 20210903(String), 1(Integer), 10(Integer), 1(Integer), 10(Integer)
09-03 11:22:08.777 ttp-nio-18084-exec-7 <==      Total: 10
09-03 11:22:13.122 ttp-nio-18084-exec-1 EcareScenario.getEcareListTotalCount
09-03 11:22:13.122 ttp-nio-18084-exec-1 ==>  Preparing: SELECT count(*) FROM nvecarescenario a, nvecaremsgtag b, nvecaremsg c WHERE a.tag_no = b.tag_no AND a.scenario_no = c.scenario_no 
09-03 11:22:13.122 ttp-nio-18084-exec-1 ==> Parameters: 
09-03 11:22:13.145 ttp-nio-18084-exec-1 <==      Total: 1
09-03 11:22:13.146 ttp-nio-18084-exec-1 EcareScenario.getEcareList
09-03 11:22:13.146 ttp-nio-18084-exec-1 ==>  Preparing: SELECT coalesce(x.scenario_no,0) scenario_no, user_id, grp_cd, scenario_nm, scenario_type , create_dt, decode(l_rank, 1, chrg_nm, '') chrg_nm, decode(l_rank, 1, brc_nm, '') brc_nm, coalesce(x.ecare_no,0) ecare_no, channel_type , ecare_sts, relation_type, coalesce(depth_no,0) depth_no, ecare_level, service_type , sub_type, segment_no, relation_tree, segment_size target_cnt, invoke_tm, sendstart_dt , (SELECT name_kor FROM nvuser WHERE user_id = x.user_id) name_kor , (SELECT grp_nm FROM nvusergrp WHERE grp_cd = x.grp_cd) grp_nm , (SELECT val FROM nv_cd_mst WHERE cd_cat = '200111' AND cd = x.ecare_sts AND lang = ?) ecare_sts_nm , (SELECT val FROM nv_cd_mst WHERE cd_cat = '100221' AND cd = x.relation_type AND lang = ?) relation_type_nm , (SELECT val FROM nv_cd_mst WHERE cd_cat = '200131' AND cd = (x.service_type || x.sub_type) AND lang = ?) service_type_nm , (SELECT val FROM nv_cd_mst WHERE cd_cat = '200141' AND cd = x.sub_type AND lang = ?) sub_type_nm FROM ( SELECT row_number() OVER(PARTITION BY a.scenario_no ORDER BY a.scenario_no DESC, c.relation_tree, c.ecare_no DESC) l_rank , row_number() OVER(ORDER BY a.scenario_no DESC, c.relation_tree, c.ecare_no) rnum , a.scenario_no, a.user_id, a.grp_cd, a.scenario_nm, a.scenario_type, a.create_dt, a.chrg_nm, a.brc_nm, c.ecare_no, c.channel_type , c.ecare_sts, c.relation_type, c.depth_no, c.ecare_level, c.service_type, c.sub_type, c.segment_no, c.relation_tree , d.segment_size, e.invoke_tm, e.sendstart_dt FROM nvecarescenario a, nvecaremsgtag b, nvecaremsg c LEFT OUTER JOIN nvsegment d ON c.segment_no = d.segment_no LEFT OUTER JOIN nvecmschedule e ON c.ecmschedule_no = e.ecmschedule_no WHERE a.tag_no = b.tag_no AND a.scenario_no = c.scenario_no ORDER BY a.scenario_no DESC, c.relation_tree ) x WHERE rnum >= ((? - 1) * ? + 1) AND rnum <= ? * ? ORDER BY scenario_no DESC, relation_tree, ecare_no 
09-03 11:22:13.146 ttp-nio-18084-exec-1 ==> Parameters: ko(String), ko(String), ko(String), ko(String), 1(Integer), 10(Integer), 1(Integer), 10(Integer)
09-03 11:22:13.172 ttp-nio-18084-exec-1 <==      Total: 10
09-03 11:22:13.173 ttp-nio-18084-exec-1 CdMst.getCdMstList
09-03 11:22:13.173 ttp-nio-18084-exec-1 ==>  Preparing: SELECT cd_cat, cd, lang, par_cd_cat, val, cd_desc, use_col, use_yn, reg_dtm, mod_dtm, cd_ord FROM nv_cd_mst WHERE cd_cat = ? AND lang = ? 
09-03 11:22:13.173 ttp-nio-18084-exec-1 ==> Parameters: 200111(String), ko(String)
09-03 11:22:13.174 ttp-nio-18084-exec-1 <==      Total: 5
09-03 11:22:13.175 ttp-nio-18084-exec-1 CdMst.getCdMstList
09-03 11:22:13.175 ttp-nio-18084-exec-1 ==>  Preparing: SELECT cd_cat, cd, lang, par_cd_cat, val, cd_desc, use_col, use_yn, reg_dtm, mod_dtm, cd_ord FROM nv_cd_mst WHERE cd_cat = ? AND lang = ? 
09-03 11:22:13.175 ttp-nio-18084-exec-1 ==> Parameters: 200131(String), ko(String)
09-03 11:22:13.176 ttp-nio-18084-exec-1 <==      Total: 3
09-03 11:22:18.296 ttp-nio-18084-exec-6 Ecare.getEcareChannelInfo
09-03 11:22:18.296 ttp-nio-18084-exec-6 ==>  Preparing: SELECT (CASE channel_type WHEN 'M' THEN 4 WHEN 'S' THEN 3 WHEN 'T' THEN 2 WHEN 'F' THEN 1 END) as seq, ecare_no, channel_type, depth_no FROM nvecaremsg WHERE scenario_no = ? ORDER BY seq DESC, depth_no 
09-03 11:22:18.296 ttp-nio-18084-exec-6 ==> Parameters: 16(Integer)
09-03 11:22:18.298 ttp-nio-18084-exec-6 <==      Total: 1
09-03 11:22:18.299 ttp-nio-18084-exec-6 EcareScenario.selectEcareScenarioDetailInfo
09-03 11:22:18.300 ttp-nio-18084-exec-6 ==>  Preparing: SELECT a.scenario_no, a.scenario_nm, a.scenario_desc, a.scenario_type, a.finish_yn, a.finish_dt, coalesce(a.tag_no,0) tag_no, a.handler_type, b.name_kor, c.tag_nm , d.ecare_no, d.user_id, d.grp_cd, d.segment_no, d.ecare_nm, d.ecare_preface, d.ecare_sts, d.create_dt, d.create_tm, d.lastupdate_dt , d.lastupdate_tm, d.campaign_type, d.template_type, coalesce(d.ecmschedule_no,0) ecmschedule_no, d.sender_nm, d.sender_email, d.sending_mode, coalesce(d.retry_cnt,1) retry_cnt, d.receiver_nm, d.sender_tel , d.retmail_receiver, d.ecare_class, d.relation_type, d.relation_tree, d.channel_type, d.service_type, d.ecare_level, d.sub_type, d.depth_no, d.verify_b4_send , d.template_sender_key, d.kakao_sender_key, d.kakao_tmpl_cd, coalesce(d.kakao_image_no,0) kakao_image_no, d.failback_send_yn, d.failback_subject, coalesce(d.handler_seq,0) handler_seq , coalesce(e.term_type,'1') term_type, f.segment_nm, f.segment_size, g.sender_nm as env_sender_nm, g.sender_email as env_sender_email , g.receiver_nm as env_receiver_nm, g.sender_tel as env_sender_tel, g.retmail_receiver as env_retmail_receiver, g.sender_fax as env_sender_fax, g.receiver_fax as env_receiver_fax , (SELECT val FROM nv_cd_mst WHERE cd_cat = '200111' AND cd = d.ecare_sts AND lang = ?) as ecare_sts_nm , a.chrg_nm, a.brc_nm , d.slot1_field, d.slot2_field, d.slot3_field, d.slot4_field, d.slot5_field , d.slot6_field, d.slot7_field, d.slot8_field, d.slot9_field, d.slot10_field , d.deploy_type , d.open_type, d.mail_type, d.req_dept_id FROM nvecarescenario a, nvuser b, nvecaremsgtag c, nvecaremsg d LEFT OUTER JOIN nvecaretraceinfo e ON d.ecare_no = e.ecare_no LEFT OUTER JOIN nvsegment f ON d.segment_no = f.segment_no LEFT OUTER JOIN nvusermailinfo g ON d.user_id = g.user_id WHERE a.grp_cd = b.grp_cd AND a.user_id = b.user_id AND a.tag_no = c.tag_no AND a.scenario_no = d.scenario_no AND a.scenario_no = ? AND d.ecare_no = ? 
09-03 11:22:18.300 ttp-nio-18084-exec-6 ==> Parameters: ko(String), 16(Integer), 21(Integer)
09-03 11:22:18.456 ttp-nio-18084-exec-6 <==      Total: 1
09-03 11:22:18.466 ttp-nio-18084-exec-6 Ecare.updateEcare2StepInfo
09-03 11:22:18.466 ttp-nio-18084-exec-6 ==>  Preparing: UPDATE nvecaremsg SET lastupdate_dt = to_char(sysdate, 'yyyyMMdd') WHERE ecare_no = ? 
09-03 11:22:18.467 ttp-nio-18084-exec-6 ==> Parameters: 21(Integer)
09-03 11:22:18.468 ttp-nio-18084-exec-6 <==    Updates: 1
09-03 11:22:18.469 ttp-nio-18084-exec-6 EcmSchedule.selectEcmScheduleByPk
09-03 11:22:18.469 ttp-nio-18084-exec-6 ==>  Preparing: SELECT coalesce(ecmschedule_no,0) ecmschedule_no, ecmschedule_nm, cycle_cd, sendstart_dt, sendend_dt, invoke_tm, invoke_every_min , coalesce(day,0) as day, coalesce(sche_weeknumber,0) sche_weeknumber, weekday, start_tm, end_tm, term_min FROM nvecmschedule WHERE ecmschedule_no = ? 
09-03 11:22:18.469 ttp-nio-18084-exec-6 ==> Parameters: 20(Integer)
09-03 11:22:18.471 ttp-nio-18084-exec-6 <==      Total: 1
09-03 11:22:18.472 ttp-nio-18084-exec-6 CycleItem.selectCycleItemInfo
09-03 11:22:18.472 ttp-nio-18084-exec-6 ==>  Preparing: SELECT cycleitem, check_yn FROM nvcycleitem WHERE ecmschedule_no = ? 
09-03 11:22:18.472 ttp-nio-18084-exec-6 ==> Parameters: 20(Integer)
09-03 11:22:18.474 ttp-nio-18084-exec-6 <==      Total: 0
09-03 11:22:18.483 ttp-nio-18084-exec-6 Segment.selectTargetQueryInfo
09-03 11:22:18.483 ttp-nio-18084-exec-6 ==>  Preparing: SELECT a.dbinfo_seq, coalesce(a.sqlhead,' ') sqlhead, coalesce(a.sqlbody,' ') sqlbody, coalesce(a.sqltail,' ') sqltail, a.testquery , b.dbkind, b.driver_nm, b.driver_dsn, b.dbuser_id, b.dbpassword, b.encoding, b.decoding, a.updatequery FROM nvsegment a, nvdbinfo b WHERE a.dbinfo_seq = b.dbinfo_seq AND a.segment_no = ? 
09-03 11:22:18.484 ttp-nio-18084-exec-6 ==> Parameters: 0(Integer)
09-03 11:22:18.486 ttp-nio-18084-exec-6 <==      Total: 0
09-03 11:22:18.487 ttp-nio-18084-exec-6 Semantic.selectSementicInfo
09-03 11:22:18.487 ttp-nio-18084-exec-6 ==>  Preparing: SELECT segment_no, field_seq, field_nm, field_desc, null_yn, field_key , (CASE WHEN field_key = 'K' THEN 1 WHEN field_key = 'N' THEN 2 WHEN field_key = 'E' THEN 3 WHEN field_key = 'S' THEN 4 WHEN field_key = 'A' THEN 5 WHEN field_key = 'B' THEN 6 ELSE 99 END) sort FROM nvsemantic WHERE segment_no = ? ORDER BY sort 
09-03 11:22:18.487 ttp-nio-18084-exec-6 ==> Parameters: 0(Integer)
09-03 11:22:18.489 ttp-nio-18084-exec-6 <==      Total: 0
09-03 11:22:18.490 ttp-nio-18084-exec-6 AddQuery.selectAddQuery
09-03 11:22:18.490 ttp-nio-18084-exec-6 ==>  Preparing: SELECT ecare_no, query_seq, query_type, result_id, dbinfo_seq, query, execute_type FROM nvaddquery WHERE ecare_no= ? 
09-03 11:22:18.490 ttp-nio-18084-exec-6 ==> Parameters: 21(Integer)
09-03 11:22:18.522 ttp-nio-18084-exec-6 <==      Total: 0
09-03 11:22:18.522 ttp-nio-18084-exec-6 EcareScenario.selectOmniChannelEcares
09-03 11:22:18.522 ttp-nio-18084-exec-6 ==>  Preparing: SELECT a.scenario_no, a.scenario_nm, coalesce(b.ecare_no,0) ecare_no, b.depth_no, b.channel_type, b.relation_type , (SELECT val FROM nv_cd_mst WHERE cd_cat = '200111' AND cd = b.ecare_sts AND lang = ?) ecare_sts_nm , c.segment_size as target_cnt FROM nvecarescenario a, nvecaremsg b LEFT OUTER JOIN nvsegment c ON b.segment_no = c.segment_no WHERE a.scenario_no = b.scenario_no AND a.scenario_no = ( SELECT scenario_no FROM nvecaremsg WHERE ecare_no = ? ) AND b.relation_type IN ('N','S','F','O') ORDER BY rpad( b.relation_tree , (SELECT max(depth_no) FROM nvecaremsg WHERE scenario_no = (SELECT scenario_no FROM nvecaremsg WHERE ecare_no = ?)) , 0 ), b.ecare_no 
09-03 11:22:18.523 ttp-nio-18084-exec-6 ==> Parameters: ko(String), 21(Integer), 21(Integer)
09-03 11:22:18.527 ttp-nio-18084-exec-6 <==      Total: 1
09-03 11:22:18.528 ttp-nio-18084-exec-6 ServerInfo.selectServerInfo
09-03 11:22:18.528 ttp-nio-18084-exec-6 ==>  Preparing: SELECT host_nm, port_no, driver_nm, driver_dsn, dbuser_id, dbpassword, openclick_path, survey_path, link_path, htmlmaker_path , openimage_path, duration_path, reject_path, smtp_ip, smtp_port, fula_ip, fula_port, ftp_yn, ftp_user_id, ftp_password , lastupdate_dt, editor_id, ret_domain, coalesce(retry_cnt,0) retry_cnt, b4_send_approve_yn, b4_send_verify_yn, b4_real_send_test_send_yn, ase_link_merge_param, ase_reject_merge_param, ase_open_scriptlet , groovy_link_merge_param, groovy_reject_merge_param, groovy_open_scriptlet, resend_include_returnmail_yn, resend_include_mail_key_yn, resend_error_cd, fax_resend_error_cd, sms_resend_error_cd, altalk_resend_error_cd, push_resend_error_cd , spool_preserve_period, log_preserve_period, result_file_download_yn, sucs_result_file_download_yn, kakao_template_last_sync_dtm , (SELECT mintime FROM nvdurationinfo WHERE durationinfo_cd = '01') as duration_time FROM nvserverinfo 
09-03 11:22:18.528 ttp-nio-18084-exec-6 ==> Parameters: 
09-03 11:22:18.530 ttp-nio-18084-exec-6 <==      Total: 1
09-03 11:22:18.531 ttp-nio-18084-exec-6 DbInfo.selectDbInfoList
09-03 11:22:18.531 ttp-nio-18084-exec-6 ==>  Preparing: SELECT dbinfo_seq, driver_nm, server_nm, driver_dsn, dbuser_id, dbpassword, encoding, decoding, dbkind, testquery FROM nvdbinfo 
09-03 11:22:18.531 ttp-nio-18084-exec-6 ==> Parameters: 
09-03 11:22:18.533 ttp-nio-18084-exec-6 <==      Total: 1
09-03 11:22:19.484 ttp-nio-18084-exec-1 Ecare.selectEditorEcare
09-03 11:22:19.484 ttp-nio-18084-exec-1 ==>  Preparing: SELECT ecare_preface, coalesce(template_type,0) template_type, sender_nm, sender_email, receiver_nm , retmail_receiver, sender_tel, coalesce(retry_cnt,0) retry_cnt, mail_type, tmpl_ver , coalesce(preface_ver,0) preface_ver, coalesce(cover_ver,0) cover_ver, coalesce(handler_ver,0) handler_ver, coalesce(handler_seq,0) handler_seq FROM nvecaremsg WHERE ecare_no = ? 
09-03 11:22:19.484 ttp-nio-18084-exec-1 ==> Parameters: 21(Integer)
09-03 11:22:19.486 ttp-nio-18084-exec-1 <==      Total: 1
09-03 11:22:19.487 ttp-nio-18084-exec-7 MobileContents.selectEditorMmsContentsListMax
09-03 11:22:19.487 ttp-nio-18084-exec-7 ==>  Preparing: SELECT count(*) FROM nvmobilecontents WHERE file_type IN ('T','D') 
09-03 11:22:19.487 ttp-nio-18084-exec-7 ==> Parameters: 
09-03 11:22:19.490 ttp-nio-18084-exec-7 <==      Total: 1
09-03 11:22:19.491 ttp-nio-18084-exec-7 MobileContents.selectEditorMmsContentsList
09-03 11:22:19.491 ttp-nio-18084-exec-7 ==>  Preparing: SELECT user_id, conts_no, conts_nm, file_path, file_name, file_type, conts_txt, file_preview_path, file_preview_name, file_size , to_char(to_date(create_dt,'YYYYMMDD'),'YYYY-MM-DD') as create_dt, to_char(to_date(create_tm,'HH24MISS'),'HH:MI:SS') as create_tm FROM ( SELECT row_number() OVER (ORDER BY conts_no DESC) as rnum , user_id, conts_no, conts_nm, file_path, file_name, file_type, conts_txt, file_preview_path, file_preview_name, file_size , create_dt, create_tm FROM nvmobilecontents WHERE file_type IN ('T','D') ORDER BY conts_no DESC ) a WHERE rnum BETWEEN ? AND ? 
09-03 11:22:19.491 ttp-nio-18084-exec-7 ==> Parameters: 1(Integer), 6(Integer)
09-03 11:22:19.493 ttp-nio-18084-exec-7 <==      Total: 0
09-03 11:22:19.513 ttp-nio-18084-exec-6 Ecare.selectSubEcareList
09-03 11:22:19.513 ttp-nio-18084-exec-6 ==>  Preparing: SELECT ecare_no, scenario_no, ecare_nm, channel_type, depth_no, relation_type FROM nvecaremsg WHERE scenario_no = ? AND depth_no = ? AND relation_tree LIKE ((SELECT relation_tree FROM nvecaremsg WHERE ecare_no = ?) || '%') 
09-03 11:22:19.513 ttp-nio-18084-exec-6 ==> Parameters: 16(Integer), 2(Integer), 21(Integer)
09-03 11:22:19.515 ttp-nio-18084-exec-6 <==      Total: 0
09-03 11:22:19.516 ttp-nio-18084-exec-6 Semantic.selectEcareSemanticKey
09-03 11:22:19.516 ttp-nio-18084-exec-6 ==>  Preparing: SELECT field_key FROM nvsemantic WHERE segment_no = (SELECT segment_no FROM nvecaremsg WHERE scenario_no = ? AND depth_no = 1) AND field_key IS NOT NULL 
09-03 11:22:19.516 ttp-nio-18084-exec-6 ==> Parameters: 16(Integer)
09-03 11:22:19.518 ttp-nio-18084-exec-6 <==      Total: 0
09-03 11:22:19.641 ttp-nio-18084-exec-4 EcMsgHandler.selectEcMsgHandlerByPk
09-03 11:22:19.641 ttp-nio-18084-exec-3 Ecare.selectEditorEcare
09-03 11:22:19.641 ttp-nio-18084-exec-4 ==>  Preparing: SELECT ecare_no, type, appsource FROM nvecmsghandler WHERE ecare_no = ? 
09-03 11:22:19.641 ttp-nio-18084-exec-3 ==>  Preparing: SELECT ecare_preface, coalesce(template_type,0) template_type, sender_nm, sender_email, receiver_nm , retmail_receiver, sender_tel, coalesce(retry_cnt,0) retry_cnt, mail_type, tmpl_ver , coalesce(preface_ver,0) preface_ver, coalesce(cover_ver,0) cover_ver, coalesce(handler_ver,0) handler_ver, coalesce(handler_seq,0) handler_seq FROM nvecaremsg WHERE ecare_no = ? 
09-03 11:22:19.642 ttp-nio-18084-exec-3 ==> Parameters: 21(Integer)
09-03 11:22:19.642 ttp-nio-18084-exec-4 ==> Parameters: 21(Integer)
09-03 11:22:19.642 ttp-nio-18084-exec-3 <==      Total: 1
09-03 11:22:19.643 ttp-nio-18084-exec-3 DefaultHandler.selectHandlerUseList
09-03 11:22:19.644 ttp-nio-18084-exec-3 ==>  Preparing: SELECT seq, handle_nm, handle_desc FROM nvdefaulthandler c WHERE EXISTS ( SELECT 0 FROM nvecaremsg a, nvecarescenario b WHERE a.scenario_no = b.scenario_no AND a.channel_type = c.channel AND b.handler_type = c.handle_type AND a.ecare_no = ? AND c.service_type = (CASE WHEN a.sub_type ='N' THEN 'N' WHEN a.service_type ='S' THEN 'S' ELSE 'R' END ) AND c.handle_attr = (CASE WHEN a.mail_type ='NONE' THEN 'D' WHEN a.mail_type ='' THEN 'D' ELSE a.mail_type END ) ) ORDER BY seq 
09-03 11:22:19.644 ttp-nio-18084-exec-3 ==> Parameters: 21(Integer)
09-03 11:22:19.695 ttp-nio-18084-exec-4 <==      Total: 1
09-03 11:22:19.709 ttp-nio-18084-exec-3 <==      Total: 1
09-03 11:22:19.754 ttp-nio-18084-exec-7 EcareTemplate.selectEditorEcareTemplate
09-03 11:22:19.754 ttp-nio-18084-exec-7 ==>  Preparing: SELECT a.seg, a.template, a.kakao_buttons, CASE WHEN a.seg = ' ' THEN 0 ELSE 1 END as seg_no , CASE WHEN b.kakao_image_no IS NULL THEN '' ELSE (SELECT file_preview_path FROM nvmobilecontents WHERE conts_no = b.kakao_image_no) END as image_url , a.conts_no FROM nvecaretemplate a, nvecaremsg b WHERE a.ecare_no = b.ecare_no AND b.ecare_no = ? ORDER BY seg_no 
09-03 11:22:19.754 ttp-nio-18084-exec-7 ==> Parameters: 21(Integer)
09-03 11:22:19.767 ttp-nio-18084-exec-7 <==      Total: 1
09-03 11:22:19.768 ttp-nio-18084-exec-7 Semantic.selectSemanticListBySegmentNo
09-03 11:22:19.768 ttp-nio-18084-exec-7 ==>  Preparing: SELECT field_seq, field_nm, field_desc, coalesce(field_key,'') field_key FROM nvsemantic WHERE segment_no = ? ORDER BY field_seq 
09-03 11:22:19.768 ttp-nio-18084-exec-7 ==> Parameters: 0(Integer)
09-03 11:22:19.769 ttp-nio-18084-exec-7 <==      Total: 0
09-03 11:22:42.218 ttp-nio-18084-exec-1 EcareScenario.getEcareListTotalCount
09-03 11:22:42.218 ttp-nio-18084-exec-1 ==>  Preparing: SELECT count(*) FROM nvecarescenario a, nvecaremsgtag b, nvecaremsg c WHERE a.tag_no = b.tag_no AND a.scenario_no = c.scenario_no 
09-03 11:22:42.219 ttp-nio-18084-exec-1 ==> Parameters: 
09-03 11:22:42.220 ttp-nio-18084-exec-1 <==      Total: 1
09-03 11:22:42.222 ttp-nio-18084-exec-1 EcareScenario.getEcareList
09-03 11:22:42.222 ttp-nio-18084-exec-1 ==>  Preparing: SELECT coalesce(x.scenario_no,0) scenario_no, user_id, grp_cd, scenario_nm, scenario_type , create_dt, decode(l_rank, 1, chrg_nm, '') chrg_nm, decode(l_rank, 1, brc_nm, '') brc_nm, coalesce(x.ecare_no,0) ecare_no, channel_type , ecare_sts, relation_type, coalesce(depth_no,0) depth_no, ecare_level, service_type , sub_type, segment_no, relation_tree, segment_size target_cnt, invoke_tm, sendstart_dt , (SELECT name_kor FROM nvuser WHERE user_id = x.user_id) name_kor , (SELECT grp_nm FROM nvusergrp WHERE grp_cd = x.grp_cd) grp_nm , (SELECT val FROM nv_cd_mst WHERE cd_cat = '200111' AND cd = x.ecare_sts AND lang = ?) ecare_sts_nm , (SELECT val FROM nv_cd_mst WHERE cd_cat = '100221' AND cd = x.relation_type AND lang = ?) relation_type_nm , (SELECT val FROM nv_cd_mst WHERE cd_cat = '200131' AND cd = (x.service_type || x.sub_type) AND lang = ?) service_type_nm , (SELECT val FROM nv_cd_mst WHERE cd_cat = '200141' AND cd = x.sub_type AND lang = ?) sub_type_nm FROM ( SELECT row_number() OVER(PARTITION BY a.scenario_no ORDER BY a.scenario_no DESC, c.relation_tree, c.ecare_no DESC) l_rank , row_number() OVER(ORDER BY a.scenario_no DESC, c.relation_tree, c.ecare_no) rnum , a.scenario_no, a.user_id, a.grp_cd, a.scenario_nm, a.scenario_type, a.create_dt, a.chrg_nm, a.brc_nm, c.ecare_no, c.channel_type , c.ecare_sts, c.relation_type, c.depth_no, c.ecare_level, c.service_type, c.sub_type, c.segment_no, c.relation_tree , d.segment_size, e.invoke_tm, e.sendstart_dt FROM nvecarescenario a, nvecaremsgtag b, nvecaremsg c LEFT OUTER JOIN nvsegment d ON c.segment_no = d.segment_no LEFT OUTER JOIN nvecmschedule e ON c.ecmschedule_no = e.ecmschedule_no WHERE a.tag_no = b.tag_no AND a.scenario_no = c.scenario_no ORDER BY a.scenario_no DESC, c.relation_tree ) x WHERE rnum >= ((? - 1) * ? + 1) AND rnum <= ? * ? ORDER BY scenario_no DESC, relation_tree, ecare_no 
09-03 11:22:42.222 ttp-nio-18084-exec-1 ==> Parameters: ko(String), ko(String), ko(String), ko(String), 1(Integer), 10(Integer), 1(Integer), 10(Integer)
09-03 11:22:42.246 ttp-nio-18084-exec-1 <==      Total: 10
09-03 11:22:42.247 ttp-nio-18084-exec-1 CdMst.getCdMstList
09-03 11:22:42.247 ttp-nio-18084-exec-1 ==>  Preparing: SELECT cd_cat, cd, lang, par_cd_cat, val, cd_desc, use_col, use_yn, reg_dtm, mod_dtm, cd_ord FROM nv_cd_mst WHERE cd_cat = ? AND lang = ? 
09-03 11:22:42.248 ttp-nio-18084-exec-1 ==> Parameters: 200111(String), ko(String)
09-03 11:22:42.248 ttp-nio-18084-exec-1 <==      Total: 5
09-03 11:22:42.249 ttp-nio-18084-exec-1 CdMst.getCdMstList
09-03 11:22:42.249 ttp-nio-18084-exec-1 ==>  Preparing: SELECT cd_cat, cd, lang, par_cd_cat, val, cd_desc, use_col, use_yn, reg_dtm, mod_dtm, cd_ord FROM nv_cd_mst WHERE cd_cat = ? AND lang = ? 
09-03 11:22:42.249 ttp-nio-18084-exec-1 ==> Parameters: 200131(String), ko(String)
09-03 11:22:42.252 ttp-nio-18084-exec-1 <==      Total: 3
09-03 11:22:45.450 ttp-nio-18084-exec-6 Ecare.getEcareChannelInfo
09-03 11:22:45.450 ttp-nio-18084-exec-6 ==>  Preparing: SELECT (CASE channel_type WHEN 'M' THEN 4 WHEN 'S' THEN 3 WHEN 'T' THEN 2 WHEN 'F' THEN 1 END) as seq, ecare_no, channel_type, depth_no FROM nvecaremsg WHERE scenario_no = ? ORDER BY seq DESC, depth_no 
09-03 11:22:45.450 ttp-nio-18084-exec-6 ==> Parameters: 15(Integer)
09-03 11:22:45.451 ttp-nio-18084-exec-6 <==      Total: 3
09-03 11:22:45.452 ttp-nio-18084-exec-6 EcareScenario.selectEcareScenarioDetailInfo
09-03 11:22:45.452 ttp-nio-18084-exec-6 ==>  Preparing: SELECT a.scenario_no, a.scenario_nm, a.scenario_desc, a.scenario_type, a.finish_yn, a.finish_dt, coalesce(a.tag_no,0) tag_no, a.handler_type, b.name_kor, c.tag_nm , d.ecare_no, d.user_id, d.grp_cd, d.segment_no, d.ecare_nm, d.ecare_preface, d.ecare_sts, d.create_dt, d.create_tm, d.lastupdate_dt , d.lastupdate_tm, d.campaign_type, d.template_type, coalesce(d.ecmschedule_no,0) ecmschedule_no, d.sender_nm, d.sender_email, d.sending_mode, coalesce(d.retry_cnt,1) retry_cnt, d.receiver_nm, d.sender_tel , d.retmail_receiver, d.ecare_class, d.relation_type, d.relation_tree, d.channel_type, d.service_type, d.ecare_level, d.sub_type, d.depth_no, d.verify_b4_send , d.template_sender_key, d.kakao_sender_key, d.kakao_tmpl_cd, coalesce(d.kakao_image_no,0) kakao_image_no, d.failback_send_yn, d.failback_subject, coalesce(d.handler_seq,0) handler_seq , coalesce(e.term_type,'1') term_type, f.segment_nm, f.segment_size, g.sender_nm as env_sender_nm, g.sender_email as env_sender_email , g.receiver_nm as env_receiver_nm, g.sender_tel as env_sender_tel, g.retmail_receiver as env_retmail_receiver, g.sender_fax as env_sender_fax, g.receiver_fax as env_receiver_fax , (SELECT val FROM nv_cd_mst WHERE cd_cat = '200111' AND cd = d.ecare_sts AND lang = ?) as ecare_sts_nm , a.chrg_nm, a.brc_nm , d.slot1_field, d.slot2_field, d.slot3_field, d.slot4_field, d.slot5_field , d.slot6_field, d.slot7_field, d.slot8_field, d.slot9_field, d.slot10_field , d.deploy_type , d.open_type, d.mail_type, d.req_dept_id FROM nvecarescenario a, nvuser b, nvecaremsgtag c, nvecaremsg d LEFT OUTER JOIN nvecaretraceinfo e ON d.ecare_no = e.ecare_no LEFT OUTER JOIN nvsegment f ON d.segment_no = f.segment_no LEFT OUTER JOIN nvusermailinfo g ON d.user_id = g.user_id WHERE a.grp_cd = b.grp_cd AND a.user_id = b.user_id AND a.tag_no = c.tag_no AND a.scenario_no = d.scenario_no AND a.scenario_no = ? AND d.ecare_no = ? 
09-03 11:22:45.452 ttp-nio-18084-exec-6 ==> Parameters: ko(String), 15(Integer), 18(Integer)
09-03 11:22:45.453 ttp-nio-18084-exec-6 <==      Total: 1
09-03 11:22:45.454 ttp-nio-18084-exec-6 Ecare.updateEcare2StepInfo
09-03 11:22:45.454 ttp-nio-18084-exec-6 ==>  Preparing: UPDATE nvecaremsg SET lastupdate_dt = to_char(sysdate, 'yyyyMMdd') WHERE ecare_no = ? 
09-03 11:22:45.455 ttp-nio-18084-exec-6 ==> Parameters: 18(Integer)
09-03 11:22:45.456 ttp-nio-18084-exec-6 <==    Updates: 1
09-03 11:22:45.457 ttp-nio-18084-exec-6 EcmSchedule.selectEcmScheduleByPk
09-03 11:22:45.457 ttp-nio-18084-exec-6 ==>  Preparing: SELECT coalesce(ecmschedule_no,0) ecmschedule_no, ecmschedule_nm, cycle_cd, sendstart_dt, sendend_dt, invoke_tm, invoke_every_min , coalesce(day,0) as day, coalesce(sche_weeknumber,0) sche_weeknumber, weekday, start_tm, end_tm, term_min FROM nvecmschedule WHERE ecmschedule_no = ? 
09-03 11:22:45.457 ttp-nio-18084-exec-6 ==> Parameters: 15(Integer)
09-03 11:22:45.457 ttp-nio-18084-exec-6 <==      Total: 1
09-03 11:22:45.459 ttp-nio-18084-exec-6 CycleItem.selectCycleItemInfo
09-03 11:22:45.459 ttp-nio-18084-exec-6 ==>  Preparing: SELECT cycleitem, check_yn FROM nvcycleitem WHERE ecmschedule_no = ? 
09-03 11:22:45.459 ttp-nio-18084-exec-6 ==> Parameters: 15(Integer)
09-03 11:22:45.461 ttp-nio-18084-exec-6 <==      Total: 1
09-03 11:22:45.461 ttp-nio-18084-exec-6 Segment.selectTargetQueryInfo
09-03 11:22:45.461 ttp-nio-18084-exec-6 ==>  Preparing: SELECT a.dbinfo_seq, coalesce(a.sqlhead,' ') sqlhead, coalesce(a.sqlbody,' ') sqlbody, coalesce(a.sqltail,' ') sqltail, a.testquery , b.dbkind, b.driver_nm, b.driver_dsn, b.dbuser_id, b.dbpassword, b.encoding, b.decoding, a.updatequery FROM nvsegment a, nvdbinfo b WHERE a.dbinfo_seq = b.dbinfo_seq AND a.segment_no = ? 
09-03 11:22:45.461 ttp-nio-18084-exec-6 ==> Parameters: 0(Integer)
09-03 11:22:45.462 ttp-nio-18084-exec-6 <==      Total: 0
09-03 11:22:45.462 ttp-nio-18084-exec-6 Semantic.selectSementicInfo
09-03 11:22:45.462 ttp-nio-18084-exec-6 ==>  Preparing: SELECT segment_no, field_seq, field_nm, field_desc, null_yn, field_key , (CASE WHEN field_key = 'K' THEN 1 WHEN field_key = 'N' THEN 2 WHEN field_key = 'E' THEN 3 WHEN field_key = 'S' THEN 4 WHEN field_key = 'A' THEN 5 WHEN field_key = 'B' THEN 6 ELSE 99 END) sort FROM nvsemantic WHERE segment_no = ? ORDER BY sort 
09-03 11:22:45.462 ttp-nio-18084-exec-6 ==> Parameters: 0(Integer)
09-03 11:22:45.463 ttp-nio-18084-exec-6 <==      Total: 0
09-03 11:22:45.463 ttp-nio-18084-exec-6 AddQuery.selectAddQuery
09-03 11:22:45.463 ttp-nio-18084-exec-6 ==>  Preparing: SELECT ecare_no, query_seq, query_type, result_id, dbinfo_seq, query, execute_type FROM nvaddquery WHERE ecare_no= ? 
09-03 11:22:45.463 ttp-nio-18084-exec-6 ==> Parameters: 18(Integer)
09-03 11:22:45.464 ttp-nio-18084-exec-6 <==      Total: 0
09-03 11:22:45.464 ttp-nio-18084-exec-6 EcareScenario.selectOmniChannelEcares
09-03 11:22:45.464 ttp-nio-18084-exec-6 ==>  Preparing: SELECT a.scenario_no, a.scenario_nm, coalesce(b.ecare_no,0) ecare_no, b.depth_no, b.channel_type, b.relation_type , (SELECT val FROM nv_cd_mst WHERE cd_cat = '200111' AND cd = b.ecare_sts AND lang = ?) ecare_sts_nm , c.segment_size as target_cnt FROM nvecarescenario a, nvecaremsg b LEFT OUTER JOIN nvsegment c ON b.segment_no = c.segment_no WHERE a.scenario_no = b.scenario_no AND a.scenario_no = ( SELECT scenario_no FROM nvecaremsg WHERE ecare_no = ? ) AND b.relation_type IN ('N','S','F','O') ORDER BY rpad( b.relation_tree , (SELECT max(depth_no) FROM nvecaremsg WHERE scenario_no = (SELECT scenario_no FROM nvecaremsg WHERE ecare_no = ?)) , 0 ), b.ecare_no 
09-03 11:22:45.464 ttp-nio-18084-exec-6 ==> Parameters: ko(String), 18(Integer), 18(Integer)
09-03 11:22:45.465 ttp-nio-18084-exec-6 <==      Total: 3
09-03 11:22:45.465 ttp-nio-18084-exec-6 ServerInfo.selectServerInfo
09-03 11:22:45.465 ttp-nio-18084-exec-6 ==>  Preparing: SELECT host_nm, port_no, driver_nm, driver_dsn, dbuser_id, dbpassword, openclick_path, survey_path, link_path, htmlmaker_path , openimage_path, duration_path, reject_path, smtp_ip, smtp_port, fula_ip, fula_port, ftp_yn, ftp_user_id, ftp_password , lastupdate_dt, editor_id, ret_domain, coalesce(retry_cnt,0) retry_cnt, b4_send_approve_yn, b4_send_verify_yn, b4_real_send_test_send_yn, ase_link_merge_param, ase_reject_merge_param, ase_open_scriptlet , groovy_link_merge_param, groovy_reject_merge_param, groovy_open_scriptlet, resend_include_returnmail_yn, resend_include_mail_key_yn, resend_error_cd, fax_resend_error_cd, sms_resend_error_cd, altalk_resend_error_cd, push_resend_error_cd , spool_preserve_period, log_preserve_period, result_file_download_yn, sucs_result_file_download_yn, kakao_template_last_sync_dtm , (SELECT mintime FROM nvdurationinfo WHERE durationinfo_cd = '01') as duration_time FROM nvserverinfo 
09-03 11:22:45.465 ttp-nio-18084-exec-6 ==> Parameters: 
09-03 11:22:45.466 ttp-nio-18084-exec-6 <==      Total: 1
09-03 11:22:45.466 ttp-nio-18084-exec-6 DbInfo.selectDbInfoList
09-03 11:22:45.467 ttp-nio-18084-exec-6 ==>  Preparing: SELECT dbinfo_seq, driver_nm, server_nm, driver_dsn, dbuser_id, dbpassword, encoding, decoding, dbkind, testquery FROM nvdbinfo 
09-03 11:22:45.467 ttp-nio-18084-exec-6 ==> Parameters: 
09-03 11:22:45.467 ttp-nio-18084-exec-6 <==      Total: 1
09-03 11:22:45.882 ttp-nio-18084-exec-3 Ecare.selectEditorEcare
09-03 11:22:45.882 ttp-nio-18084-exec-4 MobileContents.selectEditorMmsContentsListMax
09-03 11:22:45.882 ttp-nio-18084-exec-3 ==>  Preparing: SELECT ecare_preface, coalesce(template_type,0) template_type, sender_nm, sender_email, receiver_nm , retmail_receiver, sender_tel, coalesce(retry_cnt,0) retry_cnt, mail_type, tmpl_ver , coalesce(preface_ver,0) preface_ver, coalesce(cover_ver,0) cover_ver, coalesce(handler_ver,0) handler_ver, coalesce(handler_seq,0) handler_seq FROM nvecaremsg WHERE ecare_no = ? 
09-03 11:22:45.882 ttp-nio-18084-exec-4 ==>  Preparing: SELECT count(*) FROM nvmobilecontents WHERE file_type IN ('T','D') 
09-03 11:22:45.882 ttp-nio-18084-exec-4 ==> Parameters: 
09-03 11:22:45.882 ttp-nio-18084-exec-3 ==> Parameters: 18(Integer)
09-03 11:22:45.882 ttp-nio-18084-exec-4 <==      Total: 1
09-03 11:22:45.882 ttp-nio-18084-exec-3 <==      Total: 1
09-03 11:22:45.883 ttp-nio-18084-exec-4 MobileContents.selectEditorMmsContentsList
09-03 11:22:45.884 ttp-nio-18084-exec-4 ==>  Preparing: SELECT user_id, conts_no, conts_nm, file_path, file_name, file_type, conts_txt, file_preview_path, file_preview_name, file_size , to_char(to_date(create_dt,'YYYYMMDD'),'YYYY-MM-DD') as create_dt, to_char(to_date(create_tm,'HH24MISS'),'HH:MI:SS') as create_tm FROM ( SELECT row_number() OVER (ORDER BY conts_no DESC) as rnum , user_id, conts_no, conts_nm, file_path, file_name, file_type, conts_txt, file_preview_path, file_preview_name, file_size , create_dt, create_tm FROM nvmobilecontents WHERE file_type IN ('T','D') ORDER BY conts_no DESC ) a WHERE rnum BETWEEN ? AND ? 
09-03 11:22:45.884 ttp-nio-18084-exec-4 ==> Parameters: 1(Integer), 6(Integer)
09-03 11:22:45.884 ttp-nio-18084-exec-4 <==      Total: 0
09-03 11:22:45.921 ttp-nio-18084-exec-7 Ecare.selectSubEcareList
09-03 11:22:45.921 ttp-nio-18084-exec-7 ==>  Preparing: SELECT ecare_no, scenario_no, ecare_nm, channel_type, depth_no, relation_type FROM nvecaremsg WHERE scenario_no = ? AND depth_no = ? AND relation_tree LIKE ((SELECT relation_tree FROM nvecaremsg WHERE ecare_no = ?) || '%') 
09-03 11:22:45.921 ttp-nio-18084-exec-7 ==> Parameters: 15(Integer), 2(Integer), 18(Integer)
09-03 11:22:45.922 ttp-nio-18084-exec-7 <==      Total: 0
09-03 11:22:45.923 ttp-nio-18084-exec-7 Semantic.selectEcareSemanticKey
09-03 11:22:45.923 ttp-nio-18084-exec-7 ==>  Preparing: SELECT field_key FROM nvsemantic WHERE segment_no = (SELECT segment_no FROM nvecaremsg WHERE scenario_no = ? AND depth_no = 1) AND field_key IS NOT NULL 
09-03 11:22:45.923 ttp-nio-18084-exec-7 ==> Parameters: 15(Integer)
09-03 11:22:45.924 ttp-nio-18084-exec-7 <==      Total: 0
09-03 11:22:46.002 ttp-nio-18084-exec-6 EcMsgHandler.selectEcMsgHandlerByPk
09-03 11:22:46.002 ttp-nio-18084-exec-1 Ecare.selectEditorEcare
09-03 11:22:46.002 ttp-nio-18084-exec-6 ==>  Preparing: SELECT ecare_no, type, appsource FROM nvecmsghandler WHERE ecare_no = ? 
09-03 11:22:46.002 ttp-nio-18084-exec-1 ==>  Preparing: SELECT ecare_preface, coalesce(template_type,0) template_type, sender_nm, sender_email, receiver_nm , retmail_receiver, sender_tel, coalesce(retry_cnt,0) retry_cnt, mail_type, tmpl_ver , coalesce(preface_ver,0) preface_ver, coalesce(cover_ver,0) cover_ver, coalesce(handler_ver,0) handler_ver, coalesce(handler_seq,0) handler_seq FROM nvecaremsg WHERE ecare_no = ? 
09-03 11:22:46.002 ttp-nio-18084-exec-6 ==> Parameters: 18(Integer)
09-03 11:22:46.002 ttp-nio-18084-exec-1 ==> Parameters: 18(Integer)
09-03 11:22:46.004 ttp-nio-18084-exec-1 <==      Total: 1
09-03 11:22:46.005 ttp-nio-18084-exec-1 DefaultHandler.selectHandlerUseList
09-03 11:22:46.006 ttp-nio-18084-exec-1 ==>  Preparing: SELECT seq, handle_nm, handle_desc FROM nvdefaulthandler c WHERE EXISTS ( SELECT 0 FROM nvecaremsg a, nvecarescenario b WHERE a.scenario_no = b.scenario_no AND a.channel_type = c.channel AND b.handler_type = c.handle_type AND a.ecare_no = ? AND c.service_type = (CASE WHEN a.sub_type ='N' THEN 'N' WHEN a.service_type ='S' THEN 'S' ELSE 'R' END ) AND c.handle_attr = (CASE WHEN a.mail_type ='NONE' THEN 'D' WHEN a.mail_type ='' THEN 'D' ELSE a.mail_type END ) ) ORDER BY seq 
09-03 11:22:46.006 ttp-nio-18084-exec-1 ==> Parameters: 18(Integer)
09-03 11:22:46.010 ttp-nio-18084-exec-1 <==      Total: 1
09-03 11:22:46.022 ttp-nio-18084-exec-6 <==      Total: 1
09-03 11:22:46.036 ttp-nio-18084-exec-3 EcareTemplate.selectEditorEcareTemplate
09-03 11:22:46.036 ttp-nio-18084-exec-3 ==>  Preparing: SELECT a.seg, a.template, a.kakao_buttons, CASE WHEN a.seg = ' ' THEN 0 ELSE 1 END as seg_no , CASE WHEN b.kakao_image_no IS NULL THEN '' ELSE (SELECT file_preview_path FROM nvmobilecontents WHERE conts_no = b.kakao_image_no) END as image_url , a.conts_no FROM nvecaretemplate a, nvecaremsg b WHERE a.ecare_no = b.ecare_no AND b.ecare_no = ? ORDER BY seg_no 
09-03 11:22:46.036 ttp-nio-18084-exec-3 ==> Parameters: 18(Integer)
09-03 11:22:46.037 ttp-nio-18084-exec-3 <==      Total: 1
09-03 11:22:46.037 ttp-nio-18084-exec-3 Semantic.selectSemanticListBySegmentNo
09-03 11:22:46.037 ttp-nio-18084-exec-3 ==>  Preparing: SELECT field_seq, field_nm, field_desc, coalesce(field_key,'') field_key FROM nvsemantic WHERE segment_no = ? ORDER BY field_seq 
09-03 11:22:46.037 ttp-nio-18084-exec-3 ==> Parameters: 0(Integer)
09-03 11:22:46.038 ttp-nio-18084-exec-3 <==      Total: 0
09-03 11:22:48.898 ttp-nio-18084-exec-4 EcareScenario.updateEcareScenarioByPk
09-03 11:22:48.898 ttp-nio-18084-exec-4 ==>  Preparing: UPDATE nvecarescenario SET scenario_nm = ? , chrg_nm = ? , brc_nm = ? , lastupdate_dt = ? , lastupdate_tm = ? WHERE scenario_no = ? 
09-03 11:22:48.898 ttp-nio-18084-exec-4 ==> Parameters: 간단 LMS 문자 발송(String), (String), (String), 20210903(String), 112248(String), 15(Integer)
09-03 11:22:48.900 ttp-nio-18084-exec-4 <==    Updates: 1
09-03 11:22:48.902 ttp-nio-18084-exec-4 Ecare.updateEcare2StepInfo
09-03 11:22:48.902 ttp-nio-18084-exec-4 ==>  Preparing: UPDATE nvecaremsg SET lastupdate_dt = to_char(sysdate, 'yyyyMMdd') , ecare_nm = ? , sender_tel = ? , deploy_type = ? WHERE ecare_no = ? 
09-03 11:22:48.902 ttp-nio-18084-exec-4 ==> Parameters: 간단 LMS 문자 발송(String), 02-855-4210(String), REAL(String), 18(Integer)
09-03 11:22:48.904 ttp-nio-18084-exec-4 <==    Updates: 1
09-03 11:22:48.905 ttp-nio-18084-exec-4 EcmSchedule.updateEcmSchedule1StepInfo
09-03 11:22:48.905 ttp-nio-18084-exec-4 ==>  Preparing: UPDATE nvecmschedule SET cycle_cd = ? , sendstart_dt = ? , sendend_dt = ? , invoke_tm = ? , invoke_every_min = ? , day = ? , sche_weeknumber = ? , weekday = ? , start_tm = ? , end_tm = ? , term_min = ? WHERE ecmschedule_no = ? 
09-03 11:22:48.905 ttp-nio-18084-exec-4 ==> Parameters: 1(String), 20210820(String), 20210827(String), 142000(String), null, 0(Integer), 1(Integer), MON(String), null, null, null, 15(Integer)
09-03 11:22:48.919 ttp-nio-18084-exec-4 <==    Updates: 1
09-03 11:22:48.920 ttp-nio-18084-exec-4 CycleItem.deleteEcareCycleItemInfo
09-03 11:22:48.921 ttp-nio-18084-exec-4 ==>  Preparing: DELETE FROM nvcycleitem WHERE ecmschedule_no = ? 
09-03 11:22:48.921 ttp-nio-18084-exec-4 ==> Parameters: 15(Integer)
09-03 11:22:48.925 ttp-nio-18084-exec-4 <==    Updates: 1
09-03 11:22:48.926 ttp-nio-18084-exec-4 CycleItem.insertCycleItem
09-03 11:22:48.926 ttp-nio-18084-exec-4 ==>  Preparing: INSERT INTO nvcycleitem (ecmschedule_no, cycleitem, check_yn) VALUES (?, ?, ?) 
09-03 11:22:48.926 ttp-nio-18084-exec-4 ==> Parameters: 15(Integer), FULLDAY(String), Y(String)
09-03 11:22:48.929 ttp-nio-18084-exec-4 <==    Updates: 1
09-03 11:26:11.969 ttp-nio-18084-exec-7 EcareScenario.updateEcareScenarioByPk
09-03 11:26:11.969 ttp-nio-18084-exec-7 ==>  Preparing: UPDATE nvecarescenario SET scenario_nm = ? , chrg_nm = ? , brc_nm = ? , lastupdate_dt = ? , lastupdate_tm = ? WHERE scenario_no = ? 
09-03 11:26:11.970 ttp-nio-18084-exec-7 ==> Parameters: 간단 LMS 문자 발송(String), (String), (String), 20210903(String), 112611(String), 15(Integer)
09-03 11:26:11.971 ttp-nio-18084-exec-7 <==    Updates: 1
09-03 11:26:11.973 ttp-nio-18084-exec-7 Ecare.updateEcare2StepInfo
09-03 11:26:11.973 ttp-nio-18084-exec-7 ==>  Preparing: UPDATE nvecaremsg SET lastupdate_dt = to_char(sysdate, 'yyyyMMdd') , ecare_nm = ? , sender_tel = ? , deploy_type = ? WHERE ecare_no = ? 
09-03 11:26:11.974 ttp-nio-18084-exec-7 ==> Parameters: 간단 LMS 문자 발송(String), 02-855-4210(String), REAL(String), 18(Integer)
09-03 11:26:11.976 ttp-nio-18084-exec-7 <==    Updates: 1
09-03 11:26:11.976 ttp-nio-18084-exec-7 EcmSchedule.updateEcmSchedule1StepInfo
09-03 11:26:11.976 ttp-nio-18084-exec-7 ==>  Preparing: UPDATE nvecmschedule SET cycle_cd = ? , sendstart_dt = ? , sendend_dt = ? , invoke_tm = ? , invoke_every_min = ? , day = ? , sche_weeknumber = ? , weekday = ? , start_tm = ? , end_tm = ? , term_min = ? WHERE ecmschedule_no = ? 
09-03 11:26:11.976 ttp-nio-18084-exec-7 ==> Parameters: 1(String), 20210820(String), 20210827(String), 142000(String), null, 0(Integer), 1(Integer), MON(String), null, null, null, 15(Integer)
09-03 11:26:11.978 ttp-nio-18084-exec-7 <==    Updates: 1
09-03 11:26:11.978 ttp-nio-18084-exec-7 CycleItem.deleteEcareCycleItemInfo
09-03 11:26:11.978 ttp-nio-18084-exec-7 ==>  Preparing: DELETE FROM nvcycleitem WHERE ecmschedule_no = ? 
09-03 11:26:11.978 ttp-nio-18084-exec-7 ==> Parameters: 15(Integer)
09-03 11:26:11.981 ttp-nio-18084-exec-7 <==    Updates: 1
09-03 11:26:11.981 ttp-nio-18084-exec-7 CycleItem.insertCycleItem
09-03 11:26:11.981 ttp-nio-18084-exec-7 ==>  Preparing: INSERT INTO nvcycleitem (ecmschedule_no, cycleitem, check_yn) VALUES (?, ?, ?) 
09-03 11:26:11.981 ttp-nio-18084-exec-7 ==> Parameters: 15(Integer), FULLDAY(String), Y(String)
09-03 11:26:11.982 ttp-nio-18084-exec-7 <==    Updates: 1
09-03 11:26:37.452 ttp-nio-18084-exec-1 EcareScenario.updateEcareScenarioByPk
09-03 11:26:37.452 ttp-nio-18084-exec-1 ==>  Preparing: UPDATE nvecarescenario SET scenario_nm = ? , chrg_nm = ? , brc_nm = ? , lastupdate_dt = ? , lastupdate_tm = ? WHERE scenario_no = ? 
09-03 11:26:37.452 ttp-nio-18084-exec-1 ==> Parameters: 간단 LMS 문자 발송(String), (String), (String), 20210903(String), 112637(String), 15(Integer)
09-03 11:26:37.453 ttp-nio-18084-exec-1 <==    Updates: 1
09-03 11:26:37.454 ttp-nio-18084-exec-1 Ecare.updateEcare2StepInfo
09-03 11:26:37.454 ttp-nio-18084-exec-1 ==>  Preparing: UPDATE nvecaremsg SET lastupdate_dt = to_char(sysdate, 'yyyyMMdd') , ecare_nm = ? , sender_tel = ? , deploy_type = ? WHERE ecare_no = ? 
09-03 11:26:37.455 ttp-nio-18084-exec-1 ==> Parameters: 간단 LMS 문자 발송(String), 02-855-4210(String), REAL(String), 18(Integer)
09-03 11:26:37.459 ttp-nio-18084-exec-1 <==    Updates: 1
09-03 11:26:37.460 ttp-nio-18084-exec-1 EcmSchedule.updateEcmSchedule1StepInfo
09-03 11:26:37.460 ttp-nio-18084-exec-1 ==>  Preparing: UPDATE nvecmschedule SET cycle_cd = ? , sendstart_dt = ? , sendend_dt = ? , invoke_tm = ? , invoke_every_min = ? , day = ? , sche_weeknumber = ? , weekday = ? , start_tm = ? , end_tm = ? , term_min = ? WHERE ecmschedule_no = ? 
09-03 11:26:37.460 ttp-nio-18084-exec-1 ==> Parameters: 2(String), 20210820(String), 20210827(String), 142000(String), null, 0(Integer), 1(Integer), MON(String), null, null, null, 15(Integer)
09-03 11:26:37.461 ttp-nio-18084-exec-1 <==    Updates: 1
09-03 11:26:37.462 ttp-nio-18084-exec-1 CycleItem.deleteEcareCycleItemInfo
09-03 11:26:37.462 ttp-nio-18084-exec-1 ==>  Preparing: DELETE FROM nvcycleitem WHERE ecmschedule_no = ? 
09-03 11:26:37.462 ttp-nio-18084-exec-1 ==> Parameters: 15(Integer)
09-03 11:26:37.464 ttp-nio-18084-exec-1 <==    Updates: 1
09-03 11:26:37.465 ttp-nio-18084-exec-1 CycleItem.insertCycleItem
09-03 11:26:37.465 ttp-nio-18084-exec-1 ==>  Preparing: INSERT INTO nvcycleitem (ecmschedule_no, cycleitem, check_yn) VALUES (?, ?, ?) 
09-03 11:26:37.465 ttp-nio-18084-exec-1 ==> Parameters: 15(Integer), TUE(String), Y(String)
09-03 11:26:37.466 ttp-nio-18084-exec-1 <==    Updates: 1
09-03 11:26:49.885 ttp-nio-18084-exec-6 EcareScenario.updateEcareScenarioByPk
09-03 11:26:49.885 ttp-nio-18084-exec-6 ==>  Preparing: UPDATE nvecarescenario SET scenario_nm = ? , chrg_nm = ? , brc_nm = ? , lastupdate_dt = ? , lastupdate_tm = ? WHERE scenario_no = ? 
09-03 11:26:49.885 ttp-nio-18084-exec-6 ==> Parameters: 간단 LMS 문자 발송(String), (String), (String), 20210903(String), 112649(String), 15(Integer)
09-03 11:26:49.886 ttp-nio-18084-exec-6 <==    Updates: 1
09-03 11:26:49.888 ttp-nio-18084-exec-6 Ecare.updateEcare2StepInfo
09-03 11:26:49.888 ttp-nio-18084-exec-6 ==>  Preparing: UPDATE nvecaremsg SET lastupdate_dt = to_char(sysdate, 'yyyyMMdd') , ecare_nm = ? , sender_tel = ? , deploy_type = ? WHERE ecare_no = ? 
09-03 11:26:49.888 ttp-nio-18084-exec-6 ==> Parameters: 간단 LMS 문자 발송(String), 02-855-4210(String), REAL(String), 18(Integer)
09-03 11:26:49.890 ttp-nio-18084-exec-6 <==    Updates: 1
09-03 11:26:49.890 ttp-nio-18084-exec-6 EcmSchedule.updateEcmSchedule1StepInfo
09-03 11:26:49.890 ttp-nio-18084-exec-6 ==>  Preparing: UPDATE nvecmschedule SET cycle_cd = ? , sendstart_dt = ? , sendend_dt = ? , invoke_tm = ? , invoke_every_min = ? , day = ? , sche_weeknumber = ? , weekday = ? , start_tm = ? , end_tm = ? , term_min = ? WHERE ecmschedule_no = ? 
09-03 11:26:49.890 ttp-nio-18084-exec-6 ==> Parameters: 2(String), 20210820(String), 20210827(String), 142000(String), null, 0(Integer), 1(Integer), MON(String), null, null, null, 15(Integer)
09-03 11:26:49.891 ttp-nio-18084-exec-6 <==    Updates: 1
09-03 11:26:49.892 ttp-nio-18084-exec-6 CycleItem.deleteEcareCycleItemInfo
09-03 11:26:49.892 ttp-nio-18084-exec-6 ==>  Preparing: DELETE FROM nvcycleitem WHERE ecmschedule_no = ? 
09-03 11:26:49.892 ttp-nio-18084-exec-6 ==> Parameters: 15(Integer)
09-03 11:26:49.894 ttp-nio-18084-exec-6 <==    Updates: 1
09-03 11:26:49.895 ttp-nio-18084-exec-6 CycleItem.insertCycleItem
09-03 11:26:49.895 ttp-nio-18084-exec-6 ==>  Preparing: INSERT INTO nvcycleitem (ecmschedule_no, cycleitem, check_yn) VALUES (?, ?, ?) 
09-03 11:26:49.895 ttp-nio-18084-exec-6 ==> Parameters: 15(Integer), TUE(String), Y(String)
09-03 11:26:49.896 ttp-nio-18084-exec-6 <==    Updates: 1
09-03 11:26:49.897 ttp-nio-18084-exec-6 CycleItem.insertCycleItem
09-03 11:26:49.897 ttp-nio-18084-exec-6 ==>  Preparing: INSERT INTO nvcycleitem (ecmschedule_no, cycleitem, check_yn) VALUES (?, ?, ?) 
09-03 11:26:49.897 ttp-nio-18084-exec-6 ==> Parameters: 15(Integer), THU(String), Y(String)
09-03 11:26:49.898 ttp-nio-18084-exec-6 <==    Updates: 1
09-03 11:27:53.913 ttp-nio-18084-exec-7 EcareScenario.getEcareListTotalCount
09-03 11:27:53.913 ttp-nio-18084-exec-7 ==>  Preparing: SELECT count(*) FROM nvecarescenario a, nvecaremsgtag b, nvecaremsg c WHERE a.tag_no = b.tag_no AND a.scenario_no = c.scenario_no 
09-03 11:27:53.913 ttp-nio-18084-exec-7 ==> Parameters: 
09-03 11:27:53.915 ttp-nio-18084-exec-7 <==      Total: 1
09-03 11:27:53.917 ttp-nio-18084-exec-7 EcareScenario.getEcareList
09-03 11:27:53.917 ttp-nio-18084-exec-7 ==>  Preparing: SELECT coalesce(x.scenario_no,0) scenario_no, user_id, grp_cd, scenario_nm, scenario_type , create_dt, decode(l_rank, 1, chrg_nm, '') chrg_nm, decode(l_rank, 1, brc_nm, '') brc_nm, coalesce(x.ecare_no,0) ecare_no, channel_type , ecare_sts, relation_type, coalesce(depth_no,0) depth_no, ecare_level, service_type , sub_type, segment_no, relation_tree, segment_size target_cnt, invoke_tm, sendstart_dt , (SELECT name_kor FROM nvuser WHERE user_id = x.user_id) name_kor , (SELECT grp_nm FROM nvusergrp WHERE grp_cd = x.grp_cd) grp_nm , (SELECT val FROM nv_cd_mst WHERE cd_cat = '200111' AND cd = x.ecare_sts AND lang = ?) ecare_sts_nm , (SELECT val FROM nv_cd_mst WHERE cd_cat = '100221' AND cd = x.relation_type AND lang = ?) relation_type_nm , (SELECT val FROM nv_cd_mst WHERE cd_cat = '200131' AND cd = (x.service_type || x.sub_type) AND lang = ?) service_type_nm , (SELECT val FROM nv_cd_mst WHERE cd_cat = '200141' AND cd = x.sub_type AND lang = ?) sub_type_nm FROM ( SELECT row_number() OVER(PARTITION BY a.scenario_no ORDER BY a.scenario_no DESC, c.relation_tree, c.ecare_no DESC) l_rank , row_number() OVER(ORDER BY a.scenario_no DESC, c.relation_tree, c.ecare_no) rnum , a.scenario_no, a.user_id, a.grp_cd, a.scenario_nm, a.scenario_type, a.create_dt, a.chrg_nm, a.brc_nm, c.ecare_no, c.channel_type , c.ecare_sts, c.relation_type, c.depth_no, c.ecare_level, c.service_type, c.sub_type, c.segment_no, c.relation_tree , d.segment_size, e.invoke_tm, e.sendstart_dt FROM nvecarescenario a, nvecaremsgtag b, nvecaremsg c LEFT OUTER JOIN nvsegment d ON c.segment_no = d.segment_no LEFT OUTER JOIN nvecmschedule e ON c.ecmschedule_no = e.ecmschedule_no WHERE a.tag_no = b.tag_no AND a.scenario_no = c.scenario_no ORDER BY a.scenario_no DESC, c.relation_tree ) x WHERE rnum >= ((? - 1) * ? + 1) AND rnum <= ? * ? ORDER BY scenario_no DESC, relation_tree, ecare_no 
09-03 11:27:53.917 ttp-nio-18084-exec-7 ==> Parameters: ko(String), ko(String), ko(String), ko(String), 1(Integer), 10(Integer), 1(Integer), 10(Integer)
09-03 11:27:53.922 ttp-nio-18084-exec-7 <==      Total: 10
09-03 11:27:53.923 ttp-nio-18084-exec-7 CdMst.getCdMstList
09-03 11:27:53.923 ttp-nio-18084-exec-7 ==>  Preparing: SELECT cd_cat, cd, lang, par_cd_cat, val, cd_desc, use_col, use_yn, reg_dtm, mod_dtm, cd_ord FROM nv_cd_mst WHERE cd_cat = ? AND lang = ? 
09-03 11:27:53.923 ttp-nio-18084-exec-7 ==> Parameters: 200111(String), ko(String)
09-03 11:27:53.925 ttp-nio-18084-exec-7 <==      Total: 5
09-03 11:27:53.926 ttp-nio-18084-exec-7 CdMst.getCdMstList
09-03 11:27:53.926 ttp-nio-18084-exec-7 ==>  Preparing: SELECT cd_cat, cd, lang, par_cd_cat, val, cd_desc, use_col, use_yn, reg_dtm, mod_dtm, cd_ord FROM nv_cd_mst WHERE cd_cat = ? AND lang = ? 
09-03 11:27:53.926 ttp-nio-18084-exec-7 ==> Parameters: 200131(String), ko(String)
09-03 11:27:53.927 ttp-nio-18084-exec-7 <==      Total: 3
09-03 11:27:56.450 ttp-nio-18084-exec-6 EcareScenario.getEcareListTotalCount
09-03 11:27:56.450 ttp-nio-18084-exec-6 ==>  Preparing: SELECT count(*) FROM nvecarescenario a, nvecaremsgtag b, nvecaremsg c WHERE a.tag_no = b.tag_no AND a.scenario_no = c.scenario_no 
09-03 11:27:56.450 ttp-nio-18084-exec-6 ==> Parameters: 
09-03 11:27:56.452 ttp-nio-18084-exec-6 <==      Total: 1
09-03 11:27:56.454 ttp-nio-18084-exec-6 EcareScenario.getEcareList
09-03 11:27:56.454 ttp-nio-18084-exec-6 ==>  Preparing: SELECT coalesce(x.scenario_no,0) scenario_no, user_id, grp_cd, scenario_nm, scenario_type , create_dt, decode(l_rank, 1, chrg_nm, '') chrg_nm, decode(l_rank, 1, brc_nm, '') brc_nm, coalesce(x.ecare_no,0) ecare_no, channel_type , ecare_sts, relation_type, coalesce(depth_no,0) depth_no, ecare_level, service_type , sub_type, segment_no, relation_tree, segment_size target_cnt, invoke_tm, sendstart_dt , (SELECT name_kor FROM nvuser WHERE user_id = x.user_id) name_kor , (SELECT grp_nm FROM nvusergrp WHERE grp_cd = x.grp_cd) grp_nm , (SELECT val FROM nv_cd_mst WHERE cd_cat = '200111' AND cd = x.ecare_sts AND lang = ?) ecare_sts_nm , (SELECT val FROM nv_cd_mst WHERE cd_cat = '100221' AND cd = x.relation_type AND lang = ?) relation_type_nm , (SELECT val FROM nv_cd_mst WHERE cd_cat = '200131' AND cd = (x.service_type || x.sub_type) AND lang = ?) service_type_nm , (SELECT val FROM nv_cd_mst WHERE cd_cat = '200141' AND cd = x.sub_type AND lang = ?) sub_type_nm FROM ( SELECT row_number() OVER(PARTITION BY a.scenario_no ORDER BY a.scenario_no DESC, c.relation_tree, c.ecare_no DESC) l_rank , row_number() OVER(ORDER BY a.scenario_no DESC, c.relation_tree, c.ecare_no) rnum , a.scenario_no, a.user_id, a.grp_cd, a.scenario_nm, a.scenario_type, a.create_dt, a.chrg_nm, a.brc_nm, c.ecare_no, c.channel_type , c.ecare_sts, c.relation_type, c.depth_no, c.ecare_level, c.service_type, c.sub_type, c.segment_no, c.relation_tree , d.segment_size, e.invoke_tm, e.sendstart_dt FROM nvecarescenario a, nvecaremsgtag b, nvecaremsg c LEFT OUTER JOIN nvsegment d ON c.segment_no = d.segment_no LEFT OUTER JOIN nvecmschedule e ON c.ecmschedule_no = e.ecmschedule_no WHERE a.tag_no = b.tag_no AND a.scenario_no = c.scenario_no ORDER BY a.scenario_no DESC, c.relation_tree ) x WHERE rnum >= ((? - 1) * ? + 1) AND rnum <= ? * ? ORDER BY scenario_no DESC, relation_tree, ecare_no 
09-03 11:27:56.455 ttp-nio-18084-exec-6 ==> Parameters: ko(String), ko(String), ko(String), ko(String), 1(Integer), 10(Integer), 1(Integer), 10(Integer)
09-03 11:27:56.457 ttp-nio-18084-exec-6 <==      Total: 10
09-03 11:27:56.458 ttp-nio-18084-exec-6 CdMst.getCdMstList
09-03 11:27:56.458 ttp-nio-18084-exec-6 ==>  Preparing: SELECT cd_cat, cd, lang, par_cd_cat, val, cd_desc, use_col, use_yn, reg_dtm, mod_dtm, cd_ord FROM nv_cd_mst WHERE cd_cat = ? AND lang = ? 
09-03 11:27:56.458 ttp-nio-18084-exec-6 ==> Parameters: 200111(String), ko(String)
09-03 11:27:56.458 ttp-nio-18084-exec-6 <==      Total: 5
09-03 11:27:56.459 ttp-nio-18084-exec-6 CdMst.getCdMstList
09-03 11:27:56.459 ttp-nio-18084-exec-6 ==>  Preparing: SELECT cd_cat, cd, lang, par_cd_cat, val, cd_desc, use_col, use_yn, reg_dtm, mod_dtm, cd_ord FROM nv_cd_mst WHERE cd_cat = ? AND lang = ? 
09-03 11:27:56.459 ttp-nio-18084-exec-6 ==> Parameters: 200131(String), ko(String)
09-03 11:27:56.459 ttp-nio-18084-exec-6 <==      Total: 3
09-03 11:27:57.633 ttp-nio-18084-exec-1 Ecare.getEcareChannelInfo
09-03 11:27:57.633 ttp-nio-18084-exec-1 ==>  Preparing: SELECT (CASE channel_type WHEN 'M' THEN 4 WHEN 'S' THEN 3 WHEN 'T' THEN 2 WHEN 'F' THEN 1 END) as seq, ecare_no, channel_type, depth_no FROM nvecaremsg WHERE scenario_no = ? ORDER BY seq DESC, depth_no 
09-03 11:27:57.634 ttp-nio-18084-exec-1 ==> Parameters: 15(Integer)
09-03 11:27:57.635 ttp-nio-18084-exec-1 <==      Total: 3
09-03 11:27:57.636 ttp-nio-18084-exec-1 EcareScenario.selectEcareScenarioDetailInfo
09-03 11:27:57.636 ttp-nio-18084-exec-1 ==>  Preparing: SELECT a.scenario_no, a.scenario_nm, a.scenario_desc, a.scenario_type, a.finish_yn, a.finish_dt, coalesce(a.tag_no,0) tag_no, a.handler_type, b.name_kor, c.tag_nm , d.ecare_no, d.user_id, d.grp_cd, d.segment_no, d.ecare_nm, d.ecare_preface, d.ecare_sts, d.create_dt, d.create_tm, d.lastupdate_dt , d.lastupdate_tm, d.campaign_type, d.template_type, coalesce(d.ecmschedule_no,0) ecmschedule_no, d.sender_nm, d.sender_email, d.sending_mode, coalesce(d.retry_cnt,1) retry_cnt, d.receiver_nm, d.sender_tel , d.retmail_receiver, d.ecare_class, d.relation_type, d.relation_tree, d.channel_type, d.service_type, d.ecare_level, d.sub_type, d.depth_no, d.verify_b4_send , d.template_sender_key, d.kakao_sender_key, d.kakao_tmpl_cd, coalesce(d.kakao_image_no,0) kakao_image_no, d.failback_send_yn, d.failback_subject, coalesce(d.handler_seq,0) handler_seq , coalesce(e.term_type,'1') term_type, f.segment_nm, f.segment_size, g.sender_nm as env_sender_nm, g.sender_email as env_sender_email , g.receiver_nm as env_receiver_nm, g.sender_tel as env_sender_tel, g.retmail_receiver as env_retmail_receiver, g.sender_fax as env_sender_fax, g.receiver_fax as env_receiver_fax , (SELECT val FROM nv_cd_mst WHERE cd_cat = '200111' AND cd = d.ecare_sts AND lang = ?) as ecare_sts_nm , a.chrg_nm, a.brc_nm , d.slot1_field, d.slot2_field, d.slot3_field, d.slot4_field, d.slot5_field , d.slot6_field, d.slot7_field, d.slot8_field, d.slot9_field, d.slot10_field , d.deploy_type , d.open_type, d.mail_type, d.req_dept_id FROM nvecarescenario a, nvuser b, nvecaremsgtag c, nvecaremsg d LEFT OUTER JOIN nvecaretraceinfo e ON d.ecare_no = e.ecare_no LEFT OUTER JOIN nvsegment f ON d.segment_no = f.segment_no LEFT OUTER JOIN nvusermailinfo g ON d.user_id = g.user_id WHERE a.grp_cd = b.grp_cd AND a.user_id = b.user_id AND a.tag_no = c.tag_no AND a.scenario_no = d.scenario_no AND a.scenario_no = ? AND d.ecare_no = ? 
09-03 11:27:57.636 ttp-nio-18084-exec-1 ==> Parameters: ko(String), 15(Integer), 20(Integer)
09-03 11:27:57.637 ttp-nio-18084-exec-1 <==      Total: 1
09-03 11:27:57.638 ttp-nio-18084-exec-1 Ecare.updateEcare2StepInfo
09-03 11:27:57.638 ttp-nio-18084-exec-1 ==>  Preparing: UPDATE nvecaremsg SET lastupdate_dt = to_char(sysdate, 'yyyyMMdd') WHERE ecare_no = ? 
09-03 11:27:57.638 ttp-nio-18084-exec-1 ==> Parameters: 20(Integer)
09-03 11:27:57.639 ttp-nio-18084-exec-1 <==    Updates: 1
09-03 11:27:57.639 ttp-nio-18084-exec-1 EcmSchedule.selectEcmScheduleByPk
09-03 11:27:57.639 ttp-nio-18084-exec-1 ==>  Preparing: SELECT coalesce(ecmschedule_no,0) ecmschedule_no, ecmschedule_nm, cycle_cd, sendstart_dt, sendend_dt, invoke_tm, invoke_every_min , coalesce(day,0) as day, coalesce(sche_weeknumber,0) sche_weeknumber, weekday, start_tm, end_tm, term_min FROM nvecmschedule WHERE ecmschedule_no = ? 
09-03 11:27:57.639 ttp-nio-18084-exec-1 ==> Parameters: 19(Integer)
09-03 11:27:57.640 ttp-nio-18084-exec-1 <==      Total: 1
09-03 11:27:57.640 ttp-nio-18084-exec-1 CycleItem.selectCycleItemInfo
09-03 11:27:57.640 ttp-nio-18084-exec-1 ==>  Preparing: SELECT cycleitem, check_yn FROM nvcycleitem WHERE ecmschedule_no = ? 
09-03 11:27:57.640 ttp-nio-18084-exec-1 ==> Parameters: 19(Integer)
09-03 11:27:57.641 ttp-nio-18084-exec-1 <==      Total: 0
09-03 11:27:57.641 ttp-nio-18084-exec-1 Segment.selectTargetQueryInfo
09-03 11:27:57.641 ttp-nio-18084-exec-1 ==>  Preparing: SELECT a.dbinfo_seq, coalesce(a.sqlhead,' ') sqlhead, coalesce(a.sqlbody,' ') sqlbody, coalesce(a.sqltail,' ') sqltail, a.testquery , b.dbkind, b.driver_nm, b.driver_dsn, b.dbuser_id, b.dbpassword, b.encoding, b.decoding, a.updatequery FROM nvsegment a, nvdbinfo b WHERE a.dbinfo_seq = b.dbinfo_seq AND a.segment_no = ? 
09-03 11:27:57.641 ttp-nio-18084-exec-1 ==> Parameters: 36(Integer)
09-03 11:27:57.642 ttp-nio-18084-exec-1 <==      Total: 1
09-03 11:27:57.643 ttp-nio-18084-exec-1 Semantic.selectSementicInfo
09-03 11:27:57.643 ttp-nio-18084-exec-1 ==>  Preparing: SELECT segment_no, field_seq, field_nm, field_desc, null_yn, field_key , (CASE WHEN field_key = 'K' THEN 1 WHEN field_key = 'N' THEN 2 WHEN field_key = 'E' THEN 3 WHEN field_key = 'S' THEN 4 WHEN field_key = 'A' THEN 5 WHEN field_key = 'B' THEN 6 ELSE 99 END) sort FROM nvsemantic WHERE segment_no = ? ORDER BY sort 
09-03 11:27:57.643 ttp-nio-18084-exec-1 ==> Parameters: 36(Integer)
09-03 11:27:57.643 ttp-nio-18084-exec-1 <==      Total: 3
09-03 11:27:57.644 ttp-nio-18084-exec-1 AddQuery.selectAddQuery
09-03 11:27:57.644 ttp-nio-18084-exec-1 ==>  Preparing: SELECT ecare_no, query_seq, query_type, result_id, dbinfo_seq, query, execute_type FROM nvaddquery WHERE ecare_no= ? 
09-03 11:27:57.644 ttp-nio-18084-exec-1 ==> Parameters: 20(Integer)
09-03 11:27:57.644 ttp-nio-18084-exec-1 <==      Total: 0
09-03 11:27:57.644 ttp-nio-18084-exec-1 EcareScenario.selectOmniChannelEcares
09-03 11:27:57.644 ttp-nio-18084-exec-1 ==>  Preparing: SELECT a.scenario_no, a.scenario_nm, coalesce(b.ecare_no,0) ecare_no, b.depth_no, b.channel_type, b.relation_type , (SELECT val FROM nv_cd_mst WHERE cd_cat = '200111' AND cd = b.ecare_sts AND lang = ?) ecare_sts_nm , c.segment_size as target_cnt FROM nvecarescenario a, nvecaremsg b LEFT OUTER JOIN nvsegment c ON b.segment_no = c.segment_no WHERE a.scenario_no = b.scenario_no AND a.scenario_no = ( SELECT scenario_no FROM nvecaremsg WHERE ecare_no = ? ) AND b.relation_type IN ('N','S','F','O') ORDER BY rpad( b.relation_tree , (SELECT max(depth_no) FROM nvecaremsg WHERE scenario_no = (SELECT scenario_no FROM nvecaremsg WHERE ecare_no = ?)) , 0 ), b.ecare_no 
09-03 11:27:57.645 ttp-nio-18084-exec-1 ==> Parameters: ko(String), 20(Integer), 20(Integer)
09-03 11:27:57.645 ttp-nio-18084-exec-1 <==      Total: 3
09-03 11:27:57.646 ttp-nio-18084-exec-1 ServerInfo.selectServerInfo
09-03 11:27:57.646 ttp-nio-18084-exec-1 ==>  Preparing: SELECT host_nm, port_no, driver_nm, driver_dsn, dbuser_id, dbpassword, openclick_path, survey_path, link_path, htmlmaker_path , openimage_path, duration_path, reject_path, smtp_ip, smtp_port, fula_ip, fula_port, ftp_yn, ftp_user_id, ftp_password , lastupdate_dt, editor_id, ret_domain, coalesce(retry_cnt,0) retry_cnt, b4_send_approve_yn, b4_send_verify_yn, b4_real_send_test_send_yn, ase_link_merge_param, ase_reject_merge_param, ase_open_scriptlet , groovy_link_merge_param, groovy_reject_merge_param, groovy_open_scriptlet, resend_include_returnmail_yn, resend_include_mail_key_yn, resend_error_cd, fax_resend_error_cd, sms_resend_error_cd, altalk_resend_error_cd, push_resend_error_cd , spool_preserve_period, log_preserve_period, result_file_download_yn, sucs_result_file_download_yn, kakao_template_last_sync_dtm , (SELECT mintime FROM nvdurationinfo WHERE durationinfo_cd = '01') as duration_time FROM nvserverinfo 
09-03 11:27:57.646 ttp-nio-18084-exec-1 ==> Parameters: 
09-03 11:27:57.647 ttp-nio-18084-exec-1 <==      Total: 1
09-03 11:27:57.647 ttp-nio-18084-exec-1 DbInfo.selectDbInfoList
09-03 11:27:57.648 ttp-nio-18084-exec-1 ==>  Preparing: SELECT dbinfo_seq, driver_nm, server_nm, driver_dsn, dbuser_id, dbpassword, encoding, decoding, dbkind, testquery FROM nvdbinfo 
09-03 11:27:57.648 ttp-nio-18084-exec-1 ==> Parameters: 
09-03 11:27:57.648 ttp-nio-18084-exec-1 <==      Total: 1
09-03 11:27:58.069 ttp-nio-18084-exec-9 Ecare.selectEditorEcare
09-03 11:27:58.070 ttp-nio-18084-exec-9 ==>  Preparing: SELECT ecare_preface, coalesce(template_type,0) template_type, sender_nm, sender_email, receiver_nm , retmail_receiver, sender_tel, coalesce(retry_cnt,0) retry_cnt, mail_type, tmpl_ver , coalesce(preface_ver,0) preface_ver, coalesce(cover_ver,0) cover_ver, coalesce(handler_ver,0) handler_ver, coalesce(handler_seq,0) handler_seq FROM nvecaremsg WHERE ecare_no = ? 
09-03 11:27:58.070 ttp-nio-18084-exec-9 ==> Parameters: 20(Integer)
09-03 11:27:58.070 ttp-nio-18084-exec-7 MobileContents.selectEditorSmsContentsListMax
09-03 11:27:58.070 ttp-nio-18084-exec-7 ==>  Preparing: SELECT count(*) FROM nvmobilecontents WHERE file_type = 'D' 
09-03 11:27:58.070 ttp-nio-18084-exec-7 ==> Parameters: 
09-03 11:27:58.071 ttp-nio-18084-exec-9 <==      Total: 1
09-03 11:27:58.071 ttp-nio-18084-exec-7 <==      Total: 1
09-03 11:27:58.072 ttp-nio-18084-exec-7 MobileContents.selectEditorSmsContentsList
09-03 11:27:58.072 ttp-nio-18084-exec-7 ==>  Preparing: SELECT user_id, conts_nm, conts_txt , to_char(to_date(create_dt,'YYYYMMDD'),'YYYY-MM-DD') as create_dt, to_char(to_date(create_tm,'HH24MISS'),'HH:MI:SS') as create_tm FROM ( SELECT row_number() OVER (ORDER BY conts_no DESC) as rnum, conts_no, user_id, conts_nm, conts_txt, create_dt, create_tm FROM nvmobilecontents WHERE file_type = 'D' ORDER BY conts_no DESC ) WHERE rnum BETWEEN ? AND ? 
09-03 11:27:58.073 ttp-nio-18084-exec-7 ==> Parameters: 1(Integer), 6(Integer)
09-03 11:27:58.073 ttp-nio-18084-exec-7 <==      Total: 0
09-03 11:27:58.098 ttp-nio-18084-exec-8 Ecare.selectSubEcareList
09-03 11:27:58.098 ttp-nio-18084-exec-8 ==>  Preparing: SELECT ecare_no, scenario_no, ecare_nm, channel_type, depth_no, relation_type FROM nvecaremsg WHERE scenario_no = ? AND depth_no = ? AND relation_tree LIKE ((SELECT relation_tree FROM nvecaremsg WHERE ecare_no = ?) || '%') 
09-03 11:27:58.098 ttp-nio-18084-exec-8 ==> Parameters: 15(Integer), 3(Integer), 20(Integer)
09-03 11:27:58.098 ttp-nio-18084-exec-8 <==      Total: 0
09-03 11:27:58.152 ttp-nio-18084-exec-3 EcMsgHandler.selectEcMsgHandlerByPk
09-03 11:27:58.152 ttp-nio-18084-exec-4 Ecare.selectEditorEcare
09-03 11:27:58.152 ttp-nio-18084-exec-3 ==>  Preparing: SELECT ecare_no, type, appsource FROM nvecmsghandler WHERE ecare_no = ? 
09-03 11:27:58.153 ttp-nio-18084-exec-4 ==>  Preparing: SELECT ecare_preface, coalesce(template_type,0) template_type, sender_nm, sender_email, receiver_nm , retmail_receiver, sender_tel, coalesce(retry_cnt,0) retry_cnt, mail_type, tmpl_ver , coalesce(preface_ver,0) preface_ver, coalesce(cover_ver,0) cover_ver, coalesce(handler_ver,0) handler_ver, coalesce(handler_seq,0) handler_seq FROM nvecaremsg WHERE ecare_no = ? 
09-03 11:27:58.153 ttp-nio-18084-exec-3 ==> Parameters: 20(Integer)
09-03 11:27:58.153 ttp-nio-18084-exec-4 ==> Parameters: 20(Integer)
09-03 11:27:58.154 ttp-nio-18084-exec-4 <==      Total: 1
09-03 11:27:58.154 ttp-nio-18084-exec-4 DefaultHandler.selectHandlerUseList
09-03 11:27:58.154 ttp-nio-18084-exec-4 ==>  Preparing: SELECT seq, handle_nm, handle_desc FROM nvdefaulthandler c WHERE EXISTS ( SELECT 0 FROM nvecaremsg a, nvecarescenario b WHERE a.scenario_no = b.scenario_no AND a.channel_type = c.channel AND b.handler_type = c.handle_type AND a.ecare_no = ? AND c.service_type = (CASE WHEN a.sub_type ='N' THEN 'N' WHEN a.service_type ='S' THEN 'S' ELSE 'R' END ) AND c.handle_attr = (CASE WHEN a.mail_type ='NONE' THEN 'D' WHEN a.mail_type ='' THEN 'D' ELSE a.mail_type END ) ) ORDER BY seq 
09-03 11:27:58.154 ttp-nio-18084-exec-4 ==> Parameters: 20(Integer)
09-03 11:27:58.156 ttp-nio-18084-exec-4 <==      Total: 1
09-03 11:27:58.170 ttp-nio-18084-exec-3 <==      Total: 1
09-03 11:27:58.181 ttp-nio-18084-exec-6 EcareTemplate.selectEditorEcareTemplate
09-03 11:27:58.181 ttp-nio-18084-exec-6 ==>  Preparing: SELECT a.seg, a.template, a.kakao_buttons, CASE WHEN a.seg = ' ' THEN 0 ELSE 1 END as seg_no , CASE WHEN b.kakao_image_no IS NULL THEN '' ELSE (SELECT file_preview_path FROM nvmobilecontents WHERE conts_no = b.kakao_image_no) END as image_url , a.conts_no FROM nvecaretemplate a, nvecaremsg b WHERE a.ecare_no = b.ecare_no AND b.ecare_no = ? ORDER BY seg_no 
09-03 11:27:58.182 ttp-nio-18084-exec-6 ==> Parameters: 20(Integer)
09-03 11:27:58.182 ttp-nio-18084-exec-6 <==      Total: 1
09-03 11:27:58.183 ttp-nio-18084-exec-6 Semantic.selectSemanticListBySegmentNo
09-03 11:27:58.183 ttp-nio-18084-exec-6 ==>  Preparing: SELECT field_seq, field_nm, field_desc, coalesce(field_key,'') field_key FROM nvsemantic WHERE segment_no = ? ORDER BY field_seq 
09-03 11:27:58.184 ttp-nio-18084-exec-6 ==> Parameters: 36(Integer)
09-03 11:27:58.184 ttp-nio-18084-exec-6 <==      Total: 3
09-03 11:28:05.123 ttp-nio-18084-exec-1 EcareScenario.getEcareListTotalCount
09-03 11:28:05.123 ttp-nio-18084-exec-1 ==>  Preparing: SELECT count(*) FROM nvecarescenario a, nvecaremsgtag b, nvecaremsg c WHERE a.tag_no = b.tag_no AND a.scenario_no = c.scenario_no 
09-03 11:28:05.124 ttp-nio-18084-exec-1 ==> Parameters: 
09-03 11:28:05.125 ttp-nio-18084-exec-1 <==      Total: 1
09-03 11:28:05.127 ttp-nio-18084-exec-1 EcareScenario.getEcareList
09-03 11:28:05.127 ttp-nio-18084-exec-1 ==>  Preparing: SELECT coalesce(x.scenario_no,0) scenario_no, user_id, grp_cd, scenario_nm, scenario_type , create_dt, decode(l_rank, 1, chrg_nm, '') chrg_nm, decode(l_rank, 1, brc_nm, '') brc_nm, coalesce(x.ecare_no,0) ecare_no, channel_type , ecare_sts, relation_type, coalesce(depth_no,0) depth_no, ecare_level, service_type , sub_type, segment_no, relation_tree, segment_size target_cnt, invoke_tm, sendstart_dt , (SELECT name_kor FROM nvuser WHERE user_id = x.user_id) name_kor , (SELECT grp_nm FROM nvusergrp WHERE grp_cd = x.grp_cd) grp_nm , (SELECT val FROM nv_cd_mst WHERE cd_cat = '200111' AND cd = x.ecare_sts AND lang = ?) ecare_sts_nm , (SELECT val FROM nv_cd_mst WHERE cd_cat = '100221' AND cd = x.relation_type AND lang = ?) relation_type_nm , (SELECT val FROM nv_cd_mst WHERE cd_cat = '200131' AND cd = (x.service_type || x.sub_type) AND lang = ?) service_type_nm , (SELECT val FROM nv_cd_mst WHERE cd_cat = '200141' AND cd = x.sub_type AND lang = ?) sub_type_nm FROM ( SELECT row_number() OVER(PARTITION BY a.scenario_no ORDER BY a.scenario_no DESC, c.relation_tree, c.ecare_no DESC) l_rank , row_number() OVER(ORDER BY a.scenario_no DESC, c.relation_tree, c.ecare_no) rnum , a.scenario_no, a.user_id, a.grp_cd, a.scenario_nm, a.scenario_type, a.create_dt, a.chrg_nm, a.brc_nm, c.ecare_no, c.channel_type , c.ecare_sts, c.relation_type, c.depth_no, c.ecare_level, c.service_type, c.sub_type, c.segment_no, c.relation_tree , d.segment_size, e.invoke_tm, e.sendstart_dt FROM nvecarescenario a, nvecaremsgtag b, nvecaremsg c LEFT OUTER JOIN nvsegment d ON c.segment_no = d.segment_no LEFT OUTER JOIN nvecmschedule e ON c.ecmschedule_no = e.ecmschedule_no WHERE a.tag_no = b.tag_no AND a.scenario_no = c.scenario_no ORDER BY a.scenario_no DESC, c.relation_tree ) x WHERE rnum >= ((? - 1) * ? + 1) AND rnum <= ? * ? ORDER BY scenario_no DESC, relation_tree, ecare_no 
09-03 11:28:05.128 ttp-nio-18084-exec-1 ==> Parameters: ko(String), ko(String), ko(String), ko(String), 1(Integer), 10(Integer), 1(Integer), 10(Integer)
09-03 11:28:05.132 ttp-nio-18084-exec-1 <==      Total: 10
09-03 11:28:05.133 ttp-nio-18084-exec-1 CdMst.getCdMstList
09-03 11:28:05.133 ttp-nio-18084-exec-1 ==>  Preparing: SELECT cd_cat, cd, lang, par_cd_cat, val, cd_desc, use_col, use_yn, reg_dtm, mod_dtm, cd_ord FROM nv_cd_mst WHERE cd_cat = ? AND lang = ? 
09-03 11:28:05.133 ttp-nio-18084-exec-1 ==> Parameters: 200111(String), ko(String)
09-03 11:28:05.135 ttp-nio-18084-exec-1 <==      Total: 5
09-03 11:28:05.136 ttp-nio-18084-exec-1 CdMst.getCdMstList
09-03 11:28:05.136 ttp-nio-18084-exec-1 ==>  Preparing: SELECT cd_cat, cd, lang, par_cd_cat, val, cd_desc, use_col, use_yn, reg_dtm, mod_dtm, cd_ord FROM nv_cd_mst WHERE cd_cat = ? AND lang = ? 
09-03 11:28:05.136 ttp-nio-18084-exec-1 ==> Parameters: 200131(String), ko(String)
09-03 11:28:05.137 ttp-nio-18084-exec-1 <==      Total: 3
09-03 11:28:07.731 ttp-nio-18084-exec-9 Ecare.getEcareChannelInfo
09-03 11:28:07.731 ttp-nio-18084-exec-9 ==>  Preparing: SELECT (CASE channel_type WHEN 'M' THEN 4 WHEN 'S' THEN 3 WHEN 'T' THEN 2 WHEN 'F' THEN 1 END) as seq, ecare_no, channel_type, depth_no FROM nvecaremsg WHERE scenario_no = ? ORDER BY seq DESC, depth_no 
09-03 11:28:07.732 ttp-nio-18084-exec-9 ==> Parameters: 14(Integer)
09-03 11:28:07.732 ttp-nio-18084-exec-9 <==      Total: 1
09-03 11:28:07.733 ttp-nio-18084-exec-9 EcareScenario.selectEcareScenarioDetailInfo
09-03 11:28:07.733 ttp-nio-18084-exec-9 ==>  Preparing: SELECT a.scenario_no, a.scenario_nm, a.scenario_desc, a.scenario_type, a.finish_yn, a.finish_dt, coalesce(a.tag_no,0) tag_no, a.handler_type, b.name_kor, c.tag_nm , d.ecare_no, d.user_id, d.grp_cd, d.segment_no, d.ecare_nm, d.ecare_preface, d.ecare_sts, d.create_dt, d.create_tm, d.lastupdate_dt , d.lastupdate_tm, d.campaign_type, d.template_type, coalesce(d.ecmschedule_no,0) ecmschedule_no, d.sender_nm, d.sender_email, d.sending_mode, coalesce(d.retry_cnt,1) retry_cnt, d.receiver_nm, d.sender_tel , d.retmail_receiver, d.ecare_class, d.relation_type, d.relation_tree, d.channel_type, d.service_type, d.ecare_level, d.sub_type, d.depth_no, d.verify_b4_send , d.template_sender_key, d.kakao_sender_key, d.kakao_tmpl_cd, coalesce(d.kakao_image_no,0) kakao_image_no, d.failback_send_yn, d.failback_subject, coalesce(d.handler_seq,0) handler_seq , coalesce(e.term_type,'1') term_type, f.segment_nm, f.segment_size, g.sender_nm as env_sender_nm, g.sender_email as env_sender_email , g.receiver_nm as env_receiver_nm, g.sender_tel as env_sender_tel, g.retmail_receiver as env_retmail_receiver, g.sender_fax as env_sender_fax, g.receiver_fax as env_receiver_fax , (SELECT val FROM nv_cd_mst WHERE cd_cat = '200111' AND cd = d.ecare_sts AND lang = ?) as ecare_sts_nm , a.chrg_nm, a.brc_nm , d.slot1_field, d.slot2_field, d.slot3_field, d.slot4_field, d.slot5_field , d.slot6_field, d.slot7_field, d.slot8_field, d.slot9_field, d.slot10_field , d.deploy_type , d.open_type, d.mail_type, d.req_dept_id FROM nvecarescenario a, nvuser b, nvecaremsgtag c, nvecaremsg d LEFT OUTER JOIN nvecaretraceinfo e ON d.ecare_no = e.ecare_no LEFT OUTER JOIN nvsegment f ON d.segment_no = f.segment_no LEFT OUTER JOIN nvusermailinfo g ON d.user_id = g.user_id WHERE a.grp_cd = b.grp_cd AND a.user_id = b.user_id AND a.tag_no = c.tag_no AND a.scenario_no = d.scenario_no AND a.scenario_no = ? AND d.ecare_no = ? 
09-03 11:28:07.734 ttp-nio-18084-exec-9 ==> Parameters: ko(String), 14(Integer), 17(Integer)
09-03 11:28:07.736 ttp-nio-18084-exec-9 <==      Total: 1
09-03 11:28:07.737 ttp-nio-18084-exec-9 Ecare.updateEcare2StepInfo
09-03 11:28:07.737 ttp-nio-18084-exec-9 ==>  Preparing: UPDATE nvecaremsg SET lastupdate_dt = to_char(sysdate, 'yyyyMMdd') WHERE ecare_no = ? 
09-03 11:28:07.738 ttp-nio-18084-exec-9 ==> Parameters: 17(Integer)
09-03 11:28:07.738 ttp-nio-18084-exec-9 <==    Updates: 1
09-03 11:28:07.739 ttp-nio-18084-exec-9 EcmSchedule.selectEcmScheduleByPk
09-03 11:28:07.739 ttp-nio-18084-exec-9 ==>  Preparing: SELECT coalesce(ecmschedule_no,0) ecmschedule_no, ecmschedule_nm, cycle_cd, sendstart_dt, sendend_dt, invoke_tm, invoke_every_min , coalesce(day,0) as day, coalesce(sche_weeknumber,0) sche_weeknumber, weekday, start_tm, end_tm, term_min FROM nvecmschedule WHERE ecmschedule_no = ? 
09-03 11:28:07.739 ttp-nio-18084-exec-9 ==> Parameters: 14(Integer)
09-03 11:28:07.740 ttp-nio-18084-exec-9 <==      Total: 1
09-03 11:28:07.740 ttp-nio-18084-exec-9 CycleItem.selectCycleItemInfo
09-03 11:28:07.740 ttp-nio-18084-exec-9 ==>  Preparing: SELECT cycleitem, check_yn FROM nvcycleitem WHERE ecmschedule_no = ? 
09-03 11:28:07.741 ttp-nio-18084-exec-9 ==> Parameters: 14(Integer)
09-03 11:28:07.741 ttp-nio-18084-exec-9 <==      Total: 0
09-03 11:28:07.742 ttp-nio-18084-exec-9 Segment.selectTargetQueryInfo
09-03 11:28:07.742 ttp-nio-18084-exec-9 ==>  Preparing: SELECT a.dbinfo_seq, coalesce(a.sqlhead,' ') sqlhead, coalesce(a.sqlbody,' ') sqlbody, coalesce(a.sqltail,' ') sqltail, a.testquery , b.dbkind, b.driver_nm, b.driver_dsn, b.dbuser_id, b.dbpassword, b.encoding, b.decoding, a.updatequery FROM nvsegment a, nvdbinfo b WHERE a.dbinfo_seq = b.dbinfo_seq AND a.segment_no = ? 
09-03 11:28:07.742 ttp-nio-18084-exec-9 ==> Parameters: 0(Integer)
09-03 11:28:07.742 ttp-nio-18084-exec-9 <==      Total: 0
09-03 11:28:07.743 ttp-nio-18084-exec-9 Semantic.selectSementicInfo
09-03 11:28:07.743 ttp-nio-18084-exec-9 ==>  Preparing: SELECT segment_no, field_seq, field_nm, field_desc, null_yn, field_key , (CASE WHEN field_key = 'K' THEN 1 WHEN field_key = 'N' THEN 2 WHEN field_key = 'E' THEN 3 WHEN field_key = 'S' THEN 4 WHEN field_key = 'A' THEN 5 WHEN field_key = 'B' THEN 6 ELSE 99 END) sort FROM nvsemantic WHERE segment_no = ? ORDER BY sort 
09-03 11:28:07.743 ttp-nio-18084-exec-9 ==> Parameters: 0(Integer)
09-03 11:28:07.743 ttp-nio-18084-exec-9 <==      Total: 0
09-03 11:28:07.744 ttp-nio-18084-exec-9 AddQuery.selectAddQuery
09-03 11:28:07.744 ttp-nio-18084-exec-9 ==>  Preparing: SELECT ecare_no, query_seq, query_type, result_id, dbinfo_seq, query, execute_type FROM nvaddquery WHERE ecare_no= ? 
09-03 11:28:07.744 ttp-nio-18084-exec-9 ==> Parameters: 17(Integer)
09-03 11:28:07.745 ttp-nio-18084-exec-9 <==      Total: 0
09-03 11:28:07.745 ttp-nio-18084-exec-9 EcareScenario.selectOmniChannelEcares
09-03 11:28:07.745 ttp-nio-18084-exec-9 ==>  Preparing: SELECT a.scenario_no, a.scenario_nm, coalesce(b.ecare_no,0) ecare_no, b.depth_no, b.channel_type, b.relation_type , (SELECT val FROM nv_cd_mst WHERE cd_cat = '200111' AND cd = b.ecare_sts AND lang = ?) ecare_sts_nm , c.segment_size as target_cnt FROM nvecarescenario a, nvecaremsg b LEFT OUTER JOIN nvsegment c ON b.segment_no = c.segment_no WHERE a.scenario_no = b.scenario_no AND a.scenario_no = ( SELECT scenario_no FROM nvecaremsg WHERE ecare_no = ? ) AND b.relation_type IN ('N','S','F','O') ORDER BY rpad( b.relation_tree , (SELECT max(depth_no) FROM nvecaremsg WHERE scenario_no = (SELECT scenario_no FROM nvecaremsg WHERE ecare_no = ?)) , 0 ), b.ecare_no 
09-03 11:28:07.745 ttp-nio-18084-exec-9 ==> Parameters: ko(String), 17(Integer), 17(Integer)
09-03 11:28:07.746 ttp-nio-18084-exec-9 <==      Total: 1
09-03 11:28:07.747 ttp-nio-18084-exec-9 ServerInfo.selectServerInfo
09-03 11:28:07.747 ttp-nio-18084-exec-9 ==>  Preparing: SELECT host_nm, port_no, driver_nm, driver_dsn, dbuser_id, dbpassword, openclick_path, survey_path, link_path, htmlmaker_path , openimage_path, duration_path, reject_path, smtp_ip, smtp_port, fula_ip, fula_port, ftp_yn, ftp_user_id, ftp_password , lastupdate_dt, editor_id, ret_domain, coalesce(retry_cnt,0) retry_cnt, b4_send_approve_yn, b4_send_verify_yn, b4_real_send_test_send_yn, ase_link_merge_param, ase_reject_merge_param, ase_open_scriptlet , groovy_link_merge_param, groovy_reject_merge_param, groovy_open_scriptlet, resend_include_returnmail_yn, resend_include_mail_key_yn, resend_error_cd, fax_resend_error_cd, sms_resend_error_cd, altalk_resend_error_cd, push_resend_error_cd , spool_preserve_period, log_preserve_period, result_file_download_yn, sucs_result_file_download_yn, kakao_template_last_sync_dtm , (SELECT mintime FROM nvdurationinfo WHERE durationinfo_cd = '01') as duration_time FROM nvserverinfo 
09-03 11:28:07.747 ttp-nio-18084-exec-9 ==> Parameters: 
09-03 11:28:07.748 ttp-nio-18084-exec-9 <==      Total: 1
09-03 11:28:07.748 ttp-nio-18084-exec-9 DbInfo.selectDbInfoList
09-03 11:28:07.748 ttp-nio-18084-exec-9 ==>  Preparing: SELECT dbinfo_seq, driver_nm, server_nm, driver_dsn, dbuser_id, dbpassword, encoding, decoding, dbkind, testquery FROM nvdbinfo 
09-03 11:28:07.748 ttp-nio-18084-exec-9 ==> Parameters: 
09-03 11:28:07.750 ttp-nio-18084-exec-9 <==      Total: 1
09-03 11:28:07.751 ttp-nio-18084-exec-9 PushServiceInfo.selectPushServiceInfo
09-03 11:28:07.751 ttp-nio-18084-exec-9 ==>  Preparing: SELECT svc_type, svc_no, push_app_id, push_msg_type, push_pop_img_use, push_img_url, push_big_img_url, push_click_link, push_pop_big_img_use, push_menu_id FROM nvpushserviceinfo WHERE svc_type = ? AND svc_no = ? 
09-03 11:28:07.751 ttp-nio-18084-exec-9 ==> Parameters: E(String), 17(Integer)
09-03 11:28:07.755 ttp-nio-18084-exec-9 <==      Total: 0
09-03 11:28:07.756 ttp-nio-18084-exec-9 CdMst.selectPushMsgTypeList
09-03 11:28:07.756 ttp-nio-18084-exec-9 ==>  Preparing: SELECT cd_cat, cd, lang, par_cd_cat, val, cd_desc, use_col, use_yn, reg_dtm, mod_dtm, cd_ord FROM nv_cd_mst WHERE par_cd_cat = 'AP0101' AND use_yn = ? ORDER BY cd 
09-03 11:28:07.756 ttp-nio-18084-exec-9 ==> Parameters: y(String)
09-03 11:28:07.775 ttp-nio-18084-exec-9 <==      Total: 0
09-03 11:28:08.214 ttp-nio-18084-exec-7 Ecare.selectEditorEcare
09-03 11:28:08.214 ttp-nio-18084-exec-7 ==>  Preparing: SELECT ecare_preface, coalesce(template_type,0) template_type, sender_nm, sender_email, receiver_nm , retmail_receiver, sender_tel, coalesce(retry_cnt,0) retry_cnt, mail_type, tmpl_ver , coalesce(preface_ver,0) preface_ver, coalesce(cover_ver,0) cover_ver, coalesce(handler_ver,0) handler_ver, coalesce(handler_seq,0) handler_seq FROM nvecaremsg WHERE ecare_no = ? 
09-03 11:28:08.214 ttp-nio-18084-exec-7 ==> Parameters: 17(Integer)
09-03 11:28:08.215 ttp-nio-18084-exec-7 <==      Total: 1
09-03 11:28:08.237 ttp-nio-18084-exec-3 Ecare.selectSubEcareList
09-03 11:28:08.237 ttp-nio-18084-exec-3 ==>  Preparing: SELECT ecare_no, scenario_no, ecare_nm, channel_type, depth_no, relation_type FROM nvecaremsg WHERE scenario_no = ? AND depth_no = ? AND relation_tree LIKE ((SELECT relation_tree FROM nvecaremsg WHERE ecare_no = ?) || '%') 
09-03 11:28:08.237 ttp-nio-18084-exec-3 ==> Parameters: 14(Integer), 2(Integer), 17(Integer)
09-03 11:28:08.238 ttp-nio-18084-exec-3 <==      Total: 0
09-03 11:28:08.239 ttp-nio-18084-exec-3 Semantic.selectEcareSemanticKey
09-03 11:28:08.239 ttp-nio-18084-exec-3 ==>  Preparing: SELECT field_key FROM nvsemantic WHERE segment_no = (SELECT segment_no FROM nvecaremsg WHERE scenario_no = ? AND depth_no = 1) AND field_key IS NOT NULL 
09-03 11:28:08.239 ttp-nio-18084-exec-3 ==> Parameters: 14(Integer)
09-03 11:28:08.240 ttp-nio-18084-exec-3 <==      Total: 0
09-03 11:28:08.247 ttp-nio-18084-exec-4 PushApp.selectPushAppList
09-03 11:28:08.247 ttp-nio-18084-exec-4 ==>  Preparing: SELECT a.push_app_id, a.push_app_nm, a.use_testmode, a.use_yn, a.ins_dts, a.ins_id, a.upd_dts, a.upd_id , b.name_kor as ins_name_kor, b.name_eng as ins_name_eng, c.name_kor as upd_name_kor, c.name_eng as upd_name_eng FROM nvpushapp a LEFT OUTER JOIN nvuser b ON a.ins_id = b.user_id LEFT OUTER JOIN nvuser c ON a.upd_id = c.user_id WHERE a.use_yn = 'Y' 
09-03 11:28:08.247 ttp-nio-18084-exec-4 ==> Parameters: 
09-03 11:28:08.251 ttp-nio-18084-exec-4 <==      Total: 0
09-03 11:28:08.279 ttp-nio-18084-exec-1 EcMsgHandler.selectEcMsgHandlerByPk
09-03 11:28:08.280 ttp-nio-18084-exec-1 ==>  Preparing: SELECT ecare_no, type, appsource FROM nvecmsghandler WHERE ecare_no = ? 
09-03 11:28:08.280 ttp-nio-18084-exec-1 ==> Parameters: 17(Integer)
09-03 11:28:08.281 ttp-nio-18084-exec-6 Ecare.selectEditorEcare
09-03 11:28:08.281 ttp-nio-18084-exec-6 ==>  Preparing: SELECT ecare_preface, coalesce(template_type,0) template_type, sender_nm, sender_email, receiver_nm , retmail_receiver, sender_tel, coalesce(retry_cnt,0) retry_cnt, mail_type, tmpl_ver , coalesce(preface_ver,0) preface_ver, coalesce(cover_ver,0) cover_ver, coalesce(handler_ver,0) handler_ver, coalesce(handler_seq,0) handler_seq FROM nvecaremsg WHERE ecare_no = ? 
09-03 11:28:08.281 ttp-nio-18084-exec-6 ==> Parameters: 17(Integer)
09-03 11:28:08.282 ttp-nio-18084-exec-6 <==      Total: 1
09-03 11:28:08.284 ttp-nio-18084-exec-6 DefaultHandler.selectHandlerUseList
09-03 11:28:08.284 ttp-nio-18084-exec-6 ==>  Preparing: SELECT seq, handle_nm, handle_desc FROM nvdefaulthandler c WHERE EXISTS ( SELECT 0 FROM nvecaremsg a, nvecarescenario b WHERE a.scenario_no = b.scenario_no AND a.channel_type = c.channel AND b.handler_type = c.handle_type AND a.ecare_no = ? AND c.service_type = (CASE WHEN a.sub_type ='N' THEN 'N' WHEN a.service_type ='S' THEN 'S' ELSE 'R' END ) AND c.handle_attr = (CASE WHEN a.mail_type ='NONE' THEN 'D' WHEN a.mail_type ='' THEN 'D' ELSE a.mail_type END ) ) ORDER BY seq 
09-03 11:28:08.284 ttp-nio-18084-exec-6 ==> Parameters: 17(Integer)
09-03 11:28:08.285 ttp-nio-18084-exec-6 <==      Total: 1
09-03 11:28:08.291 ttp-nio-18084-exec-1 <==      Total: 1
09-03 11:28:08.326 ttp-nio-18084-exec-9 EcareTemplate.selectEditorEcareTemplate
09-03 11:28:08.326 ttp-nio-18084-exec-9 ==>  Preparing: SELECT a.seg, a.template, a.kakao_buttons, CASE WHEN a.seg = ' ' THEN 0 ELSE 1 END as seg_no , CASE WHEN b.kakao_image_no IS NULL THEN '' ELSE (SELECT file_preview_path FROM nvmobilecontents WHERE conts_no = b.kakao_image_no) END as image_url , a.conts_no FROM nvecaretemplate a, nvecaremsg b WHERE a.ecare_no = b.ecare_no AND b.ecare_no = ? ORDER BY seg_no 
09-03 11:28:08.326 ttp-nio-18084-exec-9 ==> Parameters: 17(Integer)
09-03 11:28:08.328 ttp-nio-18084-exec-9 <==      Total: 1
09-03 11:28:08.329 ttp-nio-18084-exec-9 Semantic.selectSemanticListBySegmentNo
09-03 11:28:08.329 ttp-nio-18084-exec-9 ==>  Preparing: SELECT field_seq, field_nm, field_desc, coalesce(field_key,'') field_key FROM nvsemantic WHERE segment_no = ? ORDER BY field_seq 
09-03 11:28:08.329 ttp-nio-18084-exec-9 ==> Parameters: 0(Integer)
09-03 11:28:08.329 ttp-nio-18084-exec-9 <==      Total: 0
09-03 11:28:43.416 ttp-nio-18084-exec-7 EcareScenario.updateEcareScenarioByPk
09-03 11:28:43.416 ttp-nio-18084-exec-7 ==>  Preparing: UPDATE nvecarescenario SET scenario_nm = ? , chrg_nm = ? , brc_nm = ? , lastupdate_dt = ? , lastupdate_tm = ? WHERE scenario_no = ? 
09-03 11:28:43.416 ttp-nio-18084-exec-7 ==> Parameters: 이케어 발송 테스트(String), (String), (String), 20210903(String), 112843(String), 14(Integer)
09-03 11:28:43.417 ttp-nio-18084-exec-7 <==    Updates: 1
09-03 11:28:43.418 ttp-nio-18084-exec-7 Ecare.updateEcare2StepInfo
09-03 11:28:43.418 ttp-nio-18084-exec-7 ==>  Preparing: UPDATE nvecaremsg SET lastupdate_dt = to_char(sysdate, 'yyyyMMdd') , ecare_nm = ? , deploy_type = ? WHERE ecare_no = ? 
09-03 11:28:43.418 ttp-nio-18084-exec-7 ==> Parameters: 이케어 발송 테스트(String), REAL(String), 17(Integer)
09-03 11:28:43.420 ttp-nio-18084-exec-7 <==    Updates: 1
09-03 11:28:43.421 ttp-nio-18084-exec-7 EcmSchedule.updateEcmSchedule1StepInfo
09-03 11:28:43.421 ttp-nio-18084-exec-7 ==>  Preparing: UPDATE nvecmschedule SET cycle_cd = ? , sendstart_dt = ? , sendend_dt = ? , invoke_tm = ? , invoke_every_min = ? , day = ? , sche_weeknumber = ? , weekday = ? , start_tm = ? , end_tm = ? , term_min = ? WHERE ecmschedule_no = ? 
09-03 11:28:43.421 ttp-nio-18084-exec-7 ==> Parameters: 1(String), 20210903(String), 20210910(String), 112800(String), null, 0(Integer), 1(Integer), MON(String), null, null, null, 14(Integer)
09-03 11:28:43.422 ttp-nio-18084-exec-7 <==    Updates: 1
09-03 11:28:43.423 ttp-nio-18084-exec-7 CycleItem.deleteEcareCycleItemInfo
09-03 11:28:43.423 ttp-nio-18084-exec-7 ==>  Preparing: DELETE FROM nvcycleitem WHERE ecmschedule_no = ? 
09-03 11:28:43.423 ttp-nio-18084-exec-7 ==> Parameters: 14(Integer)
09-03 11:28:43.423 ttp-nio-18084-exec-7 <==    Updates: 0
09-03 11:28:43.424 ttp-nio-18084-exec-7 CycleItem.insertCycleItem
09-03 11:28:43.424 ttp-nio-18084-exec-7 ==>  Preparing: INSERT INTO nvcycleitem (ecmschedule_no, cycleitem, check_yn) VALUES (?, ?, ?) 
09-03 11:28:43.424 ttp-nio-18084-exec-7 ==> Parameters: 14(Integer), FULLDAY(String), Y(String)
09-03 11:28:43.425 ttp-nio-18084-exec-7 <==    Updates: 1
09-03 11:29:46.606 ttp-nio-18084-exec-6 EcareScenario.getEcareListTotalCount
09-03 11:29:46.606 ttp-nio-18084-exec-6 ==>  Preparing: SELECT count(*) FROM nvecarescenario a, nvecaremsgtag b, nvecaremsg c WHERE a.tag_no = b.tag_no AND a.scenario_no = c.scenario_no 
09-03 11:29:46.606 ttp-nio-18084-exec-6 ==> Parameters: 
09-03 11:29:46.608 ttp-nio-18084-exec-6 <==      Total: 1
09-03 11:29:46.608 ttp-nio-18084-exec-6 EcareScenario.getEcareList
09-03 11:29:46.609 ttp-nio-18084-exec-6 ==>  Preparing: SELECT coalesce(x.scenario_no,0) scenario_no, user_id, grp_cd, scenario_nm, scenario_type , create_dt, decode(l_rank, 1, chrg_nm, '') chrg_nm, decode(l_rank, 1, brc_nm, '') brc_nm, coalesce(x.ecare_no,0) ecare_no, channel_type , ecare_sts, relation_type, coalesce(depth_no,0) depth_no, ecare_level, service_type , sub_type, segment_no, relation_tree, segment_size target_cnt, invoke_tm, sendstart_dt , (SELECT name_kor FROM nvuser WHERE user_id = x.user_id) name_kor , (SELECT grp_nm FROM nvusergrp WHERE grp_cd = x.grp_cd) grp_nm , (SELECT val FROM nv_cd_mst WHERE cd_cat = '200111' AND cd = x.ecare_sts AND lang = ?) ecare_sts_nm , (SELECT val FROM nv_cd_mst WHERE cd_cat = '100221' AND cd = x.relation_type AND lang = ?) relation_type_nm , (SELECT val FROM nv_cd_mst WHERE cd_cat = '200131' AND cd = (x.service_type || x.sub_type) AND lang = ?) service_type_nm , (SELECT val FROM nv_cd_mst WHERE cd_cat = '200141' AND cd = x.sub_type AND lang = ?) sub_type_nm FROM ( SELECT row_number() OVER(PARTITION BY a.scenario_no ORDER BY a.scenario_no DESC, c.relation_tree, c.ecare_no DESC) l_rank , row_number() OVER(ORDER BY a.scenario_no DESC, c.relation_tree, c.ecare_no) rnum , a.scenario_no, a.user_id, a.grp_cd, a.scenario_nm, a.scenario_type, a.create_dt, a.chrg_nm, a.brc_nm, c.ecare_no, c.channel_type , c.ecare_sts, c.relation_type, c.depth_no, c.ecare_level, c.service_type, c.sub_type, c.segment_no, c.relation_tree , d.segment_size, e.invoke_tm, e.sendstart_dt FROM nvecarescenario a, nvecaremsgtag b, nvecaremsg c LEFT OUTER JOIN nvsegment d ON c.segment_no = d.segment_no LEFT OUTER JOIN nvecmschedule e ON c.ecmschedule_no = e.ecmschedule_no WHERE a.tag_no = b.tag_no AND a.scenario_no = c.scenario_no ORDER BY a.scenario_no DESC, c.relation_tree ) x WHERE rnum >= ((? - 1) * ? + 1) AND rnum <= ? * ? ORDER BY scenario_no DESC, relation_tree, ecare_no 
09-03 11:29:46.609 ttp-nio-18084-exec-6 ==> Parameters: ko(String), ko(String), ko(String), ko(String), 1(Integer), 10(Integer), 1(Integer), 10(Integer)
09-03 11:29:46.620 ttp-nio-18084-exec-6 <==      Total: 10
09-03 11:29:46.620 ttp-nio-18084-exec-6 CdMst.getCdMstList
09-03 11:29:46.620 ttp-nio-18084-exec-6 ==>  Preparing: SELECT cd_cat, cd, lang, par_cd_cat, val, cd_desc, use_col, use_yn, reg_dtm, mod_dtm, cd_ord FROM nv_cd_mst WHERE cd_cat = ? AND lang = ? 
09-03 11:29:46.621 ttp-nio-18084-exec-6 ==> Parameters: 200111(String), ko(String)
09-03 11:29:46.621 ttp-nio-18084-exec-6 <==      Total: 5
09-03 11:29:46.622 ttp-nio-18084-exec-6 CdMst.getCdMstList
09-03 11:29:46.622 ttp-nio-18084-exec-6 ==>  Preparing: SELECT cd_cat, cd, lang, par_cd_cat, val, cd_desc, use_col, use_yn, reg_dtm, mod_dtm, cd_ord FROM nv_cd_mst WHERE cd_cat = ? AND lang = ? 
09-03 11:29:46.622 ttp-nio-18084-exec-6 ==> Parameters: 200131(String), ko(String)
09-03 11:29:46.622 ttp-nio-18084-exec-6 <==      Total: 3
09-03 11:29:51.145 ttp-nio-18084-exec-1 Ecare.getEcareChannelInfo
09-03 11:29:51.145 ttp-nio-18084-exec-1 ==>  Preparing: SELECT (CASE channel_type WHEN 'M' THEN 4 WHEN 'S' THEN 3 WHEN 'T' THEN 2 WHEN 'F' THEN 1 END) as seq, ecare_no, channel_type, depth_no FROM nvecaremsg WHERE scenario_no = ? ORDER BY seq DESC, depth_no 
09-03 11:29:51.145 ttp-nio-18084-exec-1 ==> Parameters: 14(Integer)
09-03 11:29:51.146 ttp-nio-18084-exec-1 <==      Total: 1
09-03 11:29:51.147 ttp-nio-18084-exec-1 EcareScenario.selectEcareScenarioDetailInfo
09-03 11:29:51.147 ttp-nio-18084-exec-1 ==>  Preparing: SELECT a.scenario_no, a.scenario_nm, a.scenario_desc, a.scenario_type, a.finish_yn, a.finish_dt, coalesce(a.tag_no,0) tag_no, a.handler_type, b.name_kor, c.tag_nm , d.ecare_no, d.user_id, d.grp_cd, d.segment_no, d.ecare_nm, d.ecare_preface, d.ecare_sts, d.create_dt, d.create_tm, d.lastupdate_dt , d.lastupdate_tm, d.campaign_type, d.template_type, coalesce(d.ecmschedule_no,0) ecmschedule_no, d.sender_nm, d.sender_email, d.sending_mode, coalesce(d.retry_cnt,1) retry_cnt, d.receiver_nm, d.sender_tel , d.retmail_receiver, d.ecare_class, d.relation_type, d.relation_tree, d.channel_type, d.service_type, d.ecare_level, d.sub_type, d.depth_no, d.verify_b4_send , d.template_sender_key, d.kakao_sender_key, d.kakao_tmpl_cd, coalesce(d.kakao_image_no,0) kakao_image_no, d.failback_send_yn, d.failback_subject, coalesce(d.handler_seq,0) handler_seq , coalesce(e.term_type,'1') term_type, f.segment_nm, f.segment_size, g.sender_nm as env_sender_nm, g.sender_email as env_sender_email , g.receiver_nm as env_receiver_nm, g.sender_tel as env_sender_tel, g.retmail_receiver as env_retmail_receiver, g.sender_fax as env_sender_fax, g.receiver_fax as env_receiver_fax , (SELECT val FROM nv_cd_mst WHERE cd_cat = '200111' AND cd = d.ecare_sts AND lang = ?) as ecare_sts_nm , a.chrg_nm, a.brc_nm , d.slot1_field, d.slot2_field, d.slot3_field, d.slot4_field, d.slot5_field , d.slot6_field, d.slot7_field, d.slot8_field, d.slot9_field, d.slot10_field , d.deploy_type , d.open_type, d.mail_type, d.req_dept_id FROM nvecarescenario a, nvuser b, nvecaremsgtag c, nvecaremsg d LEFT OUTER JOIN nvecaretraceinfo e ON d.ecare_no = e.ecare_no LEFT OUTER JOIN nvsegment f ON d.segment_no = f.segment_no LEFT OUTER JOIN nvusermailinfo g ON d.user_id = g.user_id WHERE a.grp_cd = b.grp_cd AND a.user_id = b.user_id AND a.tag_no = c.tag_no AND a.scenario_no = d.scenario_no AND a.scenario_no = ? AND d.ecare_no = ? 
09-03 11:29:51.147 ttp-nio-18084-exec-1 ==> Parameters: ko(String), 14(Integer), 17(Integer)
09-03 11:29:51.148 ttp-nio-18084-exec-1 <==      Total: 1
09-03 11:29:51.149 ttp-nio-18084-exec-1 Ecare.updateEcare2StepInfo
09-03 11:29:51.149 ttp-nio-18084-exec-1 ==>  Preparing: UPDATE nvecaremsg SET lastupdate_dt = to_char(sysdate, 'yyyyMMdd') WHERE ecare_no = ? 
09-03 11:29:51.149 ttp-nio-18084-exec-1 ==> Parameters: 17(Integer)
09-03 11:29:51.151 ttp-nio-18084-exec-1 <==    Updates: 1
09-03 11:29:51.152 ttp-nio-18084-exec-1 EcmSchedule.selectEcmScheduleByPk
09-03 11:29:51.152 ttp-nio-18084-exec-1 ==>  Preparing: SELECT coalesce(ecmschedule_no,0) ecmschedule_no, ecmschedule_nm, cycle_cd, sendstart_dt, sendend_dt, invoke_tm, invoke_every_min , coalesce(day,0) as day, coalesce(sche_weeknumber,0) sche_weeknumber, weekday, start_tm, end_tm, term_min FROM nvecmschedule WHERE ecmschedule_no = ? 
09-03 11:29:51.152 ttp-nio-18084-exec-1 ==> Parameters: 14(Integer)
09-03 11:29:51.152 ttp-nio-18084-exec-1 <==      Total: 1
09-03 11:29:51.153 ttp-nio-18084-exec-1 CycleItem.selectCycleItemInfo
09-03 11:29:51.153 ttp-nio-18084-exec-1 ==>  Preparing: SELECT cycleitem, check_yn FROM nvcycleitem WHERE ecmschedule_no = ? 
09-03 11:29:51.153 ttp-nio-18084-exec-1 ==> Parameters: 14(Integer)
09-03 11:29:51.153 ttp-nio-18084-exec-1 <==      Total: 1
09-03 11:29:51.153 ttp-nio-18084-exec-1 Segment.selectTargetQueryInfo
09-03 11:29:51.153 ttp-nio-18084-exec-1 ==>  Preparing: SELECT a.dbinfo_seq, coalesce(a.sqlhead,' ') sqlhead, coalesce(a.sqlbody,' ') sqlbody, coalesce(a.sqltail,' ') sqltail, a.testquery , b.dbkind, b.driver_nm, b.driver_dsn, b.dbuser_id, b.dbpassword, b.encoding, b.decoding, a.updatequery FROM nvsegment a, nvdbinfo b WHERE a.dbinfo_seq = b.dbinfo_seq AND a.segment_no = ? 
09-03 11:29:51.153 ttp-nio-18084-exec-1 ==> Parameters: 0(Integer)
09-03 11:29:51.154 ttp-nio-18084-exec-1 <==      Total: 0
09-03 11:29:51.154 ttp-nio-18084-exec-1 Semantic.selectSementicInfo
09-03 11:29:51.154 ttp-nio-18084-exec-1 ==>  Preparing: SELECT segment_no, field_seq, field_nm, field_desc, null_yn, field_key , (CASE WHEN field_key = 'K' THEN 1 WHEN field_key = 'N' THEN 2 WHEN field_key = 'E' THEN 3 WHEN field_key = 'S' THEN 4 WHEN field_key = 'A' THEN 5 WHEN field_key = 'B' THEN 6 ELSE 99 END) sort FROM nvsemantic WHERE segment_no = ? ORDER BY sort 
09-03 11:29:51.154 ttp-nio-18084-exec-1 ==> Parameters: 0(Integer)
09-03 11:29:51.154 ttp-nio-18084-exec-1 <==      Total: 0
09-03 11:29:51.155 ttp-nio-18084-exec-1 AddQuery.selectAddQuery
09-03 11:29:51.155 ttp-nio-18084-exec-1 ==>  Preparing: SELECT ecare_no, query_seq, query_type, result_id, dbinfo_seq, query, execute_type FROM nvaddquery WHERE ecare_no= ? 
09-03 11:29:51.155 ttp-nio-18084-exec-1 ==> Parameters: 17(Integer)
09-03 11:29:51.155 ttp-nio-18084-exec-1 <==      Total: 0
09-03 11:29:51.156 ttp-nio-18084-exec-1 EcareScenario.selectOmniChannelEcares
09-03 11:29:51.156 ttp-nio-18084-exec-1 ==>  Preparing: SELECT a.scenario_no, a.scenario_nm, coalesce(b.ecare_no,0) ecare_no, b.depth_no, b.channel_type, b.relation_type , (SELECT val FROM nv_cd_mst WHERE cd_cat = '200111' AND cd = b.ecare_sts AND lang = ?) ecare_sts_nm , c.segment_size as target_cnt FROM nvecarescenario a, nvecaremsg b LEFT OUTER JOIN nvsegment c ON b.segment_no = c.segment_no WHERE a.scenario_no = b.scenario_no AND a.scenario_no = ( SELECT scenario_no FROM nvecaremsg WHERE ecare_no = ? ) AND b.relation_type IN ('N','S','F','O') ORDER BY rpad( b.relation_tree , (SELECT max(depth_no) FROM nvecaremsg WHERE scenario_no = (SELECT scenario_no FROM nvecaremsg WHERE ecare_no = ?)) , 0 ), b.ecare_no 
09-03 11:29:51.156 ttp-nio-18084-exec-1 ==> Parameters: ko(String), 17(Integer), 17(Integer)
09-03 11:29:51.156 ttp-nio-18084-exec-1 <==      Total: 1
09-03 11:29:51.157 ttp-nio-18084-exec-1 ServerInfo.selectServerInfo
09-03 11:29:51.157 ttp-nio-18084-exec-1 ==>  Preparing: SELECT host_nm, port_no, driver_nm, driver_dsn, dbuser_id, dbpassword, openclick_path, survey_path, link_path, htmlmaker_path , openimage_path, duration_path, reject_path, smtp_ip, smtp_port, fula_ip, fula_port, ftp_yn, ftp_user_id, ftp_password , lastupdate_dt, editor_id, ret_domain, coalesce(retry_cnt,0) retry_cnt, b4_send_approve_yn, b4_send_verify_yn, b4_real_send_test_send_yn, ase_link_merge_param, ase_reject_merge_param, ase_open_scriptlet , groovy_link_merge_param, groovy_reject_merge_param, groovy_open_scriptlet, resend_include_returnmail_yn, resend_include_mail_key_yn, resend_error_cd, fax_resend_error_cd, sms_resend_error_cd, altalk_resend_error_cd, push_resend_error_cd , spool_preserve_period, log_preserve_period, result_file_download_yn, sucs_result_file_download_yn, kakao_template_last_sync_dtm , (SELECT mintime FROM nvdurationinfo WHERE durationinfo_cd = '01') as duration_time FROM nvserverinfo 
09-03 11:29:51.157 ttp-nio-18084-exec-1 ==> Parameters: 
09-03 11:29:51.157 ttp-nio-18084-exec-1 <==      Total: 1
09-03 11:29:51.158 ttp-nio-18084-exec-1 DbInfo.selectDbInfoList
09-03 11:29:51.158 ttp-nio-18084-exec-1 ==>  Preparing: SELECT dbinfo_seq, driver_nm, server_nm, driver_dsn, dbuser_id, dbpassword, encoding, decoding, dbkind, testquery FROM nvdbinfo 
09-03 11:29:51.158 ttp-nio-18084-exec-1 ==> Parameters: 
09-03 11:29:51.158 ttp-nio-18084-exec-1 <==      Total: 1
09-03 11:29:51.158 ttp-nio-18084-exec-1 PushServiceInfo.selectPushServiceInfo
09-03 11:29:51.158 ttp-nio-18084-exec-1 ==>  Preparing: SELECT svc_type, svc_no, push_app_id, push_msg_type, push_pop_img_use, push_img_url, push_big_img_url, push_click_link, push_pop_big_img_use, push_menu_id FROM nvpushserviceinfo WHERE svc_type = ? AND svc_no = ? 
09-03 11:29:51.158 ttp-nio-18084-exec-1 ==> Parameters: E(String), 17(Integer)
09-03 11:29:51.159 ttp-nio-18084-exec-1 <==      Total: 0
09-03 11:29:51.159 ttp-nio-18084-exec-1 CdMst.selectPushMsgTypeList
09-03 11:29:51.159 ttp-nio-18084-exec-1 ==>  Preparing: SELECT cd_cat, cd, lang, par_cd_cat, val, cd_desc, use_col, use_yn, reg_dtm, mod_dtm, cd_ord FROM nv_cd_mst WHERE par_cd_cat = 'AP0101' AND use_yn = ? ORDER BY cd 
09-03 11:29:51.159 ttp-nio-18084-exec-1 ==> Parameters: y(String)
09-03 11:29:51.160 ttp-nio-18084-exec-1 <==      Total: 0
09-03 11:29:51.600 ttp-nio-18084-exec-9 Ecare.selectEditorEcare
09-03 11:29:51.600 ttp-nio-18084-exec-8 PushApp.selectPushAppList
09-03 11:29:51.600 ttp-nio-18084-exec-9 ==>  Preparing: SELECT ecare_preface, coalesce(template_type,0) template_type, sender_nm, sender_email, receiver_nm , retmail_receiver, sender_tel, coalesce(retry_cnt,0) retry_cnt, mail_type, tmpl_ver , coalesce(preface_ver,0) preface_ver, coalesce(cover_ver,0) cover_ver, coalesce(handler_ver,0) handler_ver, coalesce(handler_seq,0) handler_seq FROM nvecaremsg WHERE ecare_no = ? 
09-03 11:29:51.600 ttp-nio-18084-exec-8 ==>  Preparing: SELECT a.push_app_id, a.push_app_nm, a.use_testmode, a.use_yn, a.ins_dts, a.ins_id, a.upd_dts, a.upd_id , b.name_kor as ins_name_kor, b.name_eng as ins_name_eng, c.name_kor as upd_name_kor, c.name_eng as upd_name_eng FROM nvpushapp a LEFT OUTER JOIN nvuser b ON a.ins_id = b.user_id LEFT OUTER JOIN nvuser c ON a.upd_id = c.user_id WHERE a.use_yn = 'Y' 
09-03 11:29:51.601 ttp-nio-18084-exec-8 ==> Parameters: 
09-03 11:29:51.601 ttp-nio-18084-exec-9 ==> Parameters: 17(Integer)
09-03 11:29:51.601 ttp-nio-18084-exec-8 <==      Total: 0
09-03 11:29:51.601 ttp-nio-18084-exec-9 <==      Total: 1
09-03 11:29:51.638 ttp-nio-18084-exec-7 Ecare.selectSubEcareList
09-03 11:29:51.638 ttp-nio-18084-exec-7 ==>  Preparing: SELECT ecare_no, scenario_no, ecare_nm, channel_type, depth_no, relation_type FROM nvecaremsg WHERE scenario_no = ? AND depth_no = ? AND relation_tree LIKE ((SELECT relation_tree FROM nvecaremsg WHERE ecare_no = ?) || '%') 
09-03 11:29:51.638 ttp-nio-18084-exec-7 ==> Parameters: 14(Integer), 2(Integer), 17(Integer)
09-03 11:29:51.639 ttp-nio-18084-exec-7 <==      Total: 0
09-03 11:29:51.640 ttp-nio-18084-exec-7 Semantic.selectEcareSemanticKey
09-03 11:29:51.640 ttp-nio-18084-exec-7 ==>  Preparing: SELECT field_key FROM nvsemantic WHERE segment_no = (SELECT segment_no FROM nvecaremsg WHERE scenario_no = ? AND depth_no = 1) AND field_key IS NOT NULL 
09-03 11:29:51.640 ttp-nio-18084-exec-7 ==> Parameters: 14(Integer)
09-03 11:29:51.640 ttp-nio-18084-exec-7 <==      Total: 0
09-03 11:29:51.677 ttp-nio-18084-exec-6 Ecare.selectEditorEcare
09-03 11:29:51.677 ttp-nio-18084-exec-1 EcMsgHandler.selectEcMsgHandlerByPk
09-03 11:29:51.677 ttp-nio-18084-exec-6 ==>  Preparing: SELECT ecare_preface, coalesce(template_type,0) template_type, sender_nm, sender_email, receiver_nm , retmail_receiver, sender_tel, coalesce(retry_cnt,0) retry_cnt, mail_type, tmpl_ver , coalesce(preface_ver,0) preface_ver, coalesce(cover_ver,0) cover_ver, coalesce(handler_ver,0) handler_ver, coalesce(handler_seq,0) handler_seq FROM nvecaremsg WHERE ecare_no = ? 
09-03 11:29:51.677 ttp-nio-18084-exec-1 ==>  Preparing: SELECT ecare_no, type, appsource FROM nvecmsghandler WHERE ecare_no = ? 
09-03 11:29:51.678 ttp-nio-18084-exec-1 ==> Parameters: 17(Integer)
09-03 11:29:51.678 ttp-nio-18084-exec-6 ==> Parameters: 17(Integer)
09-03 11:29:51.678 ttp-nio-18084-exec-6 <==      Total: 1
09-03 11:29:51.679 ttp-nio-18084-exec-1 <==      Total: 1
09-03 11:29:51.680 ttp-nio-18084-exec-6 DefaultHandler.selectHandlerUseList
09-03 11:29:51.680 ttp-nio-18084-exec-6 ==>  Preparing: SELECT seq, handle_nm, handle_desc FROM nvdefaulthandler c WHERE EXISTS ( SELECT 0 FROM nvecaremsg a, nvecarescenario b WHERE a.scenario_no = b.scenario_no AND a.channel_type = c.channel AND b.handler_type = c.handle_type AND a.ecare_no = ? AND c.service_type = (CASE WHEN a.sub_type ='N' THEN 'N' WHEN a.service_type ='S' THEN 'S' ELSE 'R' END ) AND c.handle_attr = (CASE WHEN a.mail_type ='NONE' THEN 'D' WHEN a.mail_type ='' THEN 'D' ELSE a.mail_type END ) ) ORDER BY seq 
09-03 11:29:51.681 ttp-nio-18084-exec-6 ==> Parameters: 17(Integer)
09-03 11:29:51.683 ttp-nio-18084-exec-6 <==      Total: 1
09-03 11:29:51.710 ttp-nio-18084-exec-9 EcareTemplate.selectEditorEcareTemplate
09-03 11:29:51.710 ttp-nio-18084-exec-9 ==>  Preparing: SELECT a.seg, a.template, a.kakao_buttons, CASE WHEN a.seg = ' ' THEN 0 ELSE 1 END as seg_no , CASE WHEN b.kakao_image_no IS NULL THEN '' ELSE (SELECT file_preview_path FROM nvmobilecontents WHERE conts_no = b.kakao_image_no) END as image_url , a.conts_no FROM nvecaretemplate a, nvecaremsg b WHERE a.ecare_no = b.ecare_no AND b.ecare_no = ? ORDER BY seg_no 
09-03 11:29:51.710 ttp-nio-18084-exec-9 ==> Parameters: 17(Integer)
09-03 11:29:51.711 ttp-nio-18084-exec-9 <==      Total: 1
09-03 11:29:51.712 ttp-nio-18084-exec-9 Semantic.selectSemanticListBySegmentNo
09-03 11:29:51.712 ttp-nio-18084-exec-9 ==>  Preparing: SELECT field_seq, field_nm, field_desc, coalesce(field_key,'') field_key FROM nvsemantic WHERE segment_no = ? ORDER BY field_seq 
09-03 11:29:51.712 ttp-nio-18084-exec-9 ==> Parameters: 0(Integer)
09-03 11:29:51.713 ttp-nio-18084-exec-9 <==      Total: 0
09-03 11:29:55.609 ttp-nio-18084-exec-8 EcareScenario.updateEcareScenarioByPk
09-03 11:29:55.609 ttp-nio-18084-exec-8 ==>  Preparing: UPDATE nvecarescenario SET scenario_nm = ? , chrg_nm = ? , brc_nm = ? , lastupdate_dt = ? , lastupdate_tm = ? WHERE scenario_no = ? 
09-03 11:29:55.609 ttp-nio-18084-exec-8 ==> Parameters: 이케어 발송 테스트(String), (String), (String), 20210903(String), 112955(String), 14(Integer)
09-03 11:29:55.610 ttp-nio-18084-exec-8 <==    Updates: 1
09-03 11:29:55.611 ttp-nio-18084-exec-8 Ecare.updateEcare2StepInfo
09-03 11:29:55.611 ttp-nio-18084-exec-8 ==>  Preparing: UPDATE nvecaremsg SET lastupdate_dt = to_char(sysdate, 'yyyyMMdd') , ecare_nm = ? , deploy_type = ? WHERE ecare_no = ? 
09-03 11:29:55.611 ttp-nio-18084-exec-8 ==> Parameters: 이케어 발송 테스트(String), REAL(String), 17(Integer)
09-03 11:29:55.612 ttp-nio-18084-exec-8 <==    Updates: 1
09-03 11:29:55.613 ttp-nio-18084-exec-8 EcmSchedule.updateEcmSchedule1StepInfo
09-03 11:29:55.613 ttp-nio-18084-exec-8 ==>  Preparing: UPDATE nvecmschedule SET cycle_cd = ? , sendstart_dt = ? , sendend_dt = ? , invoke_tm = ? , invoke_every_min = ? , day = ? , sche_weeknumber = ? , weekday = ? , start_tm = ? , end_tm = ? , term_min = ? WHERE ecmschedule_no = ? 
09-03 11:29:55.614 ttp-nio-18084-exec-8 ==> Parameters: 1(String), 20210903(String), 20210910(String), 112800(String), null, 0(Integer), 1(Integer), MON(String), null, null, null, 14(Integer)
09-03 11:29:55.615 ttp-nio-18084-exec-8 <==    Updates: 1
09-03 11:29:55.615 ttp-nio-18084-exec-8 CycleItem.deleteEcareCycleItemInfo
09-03 11:29:55.615 ttp-nio-18084-exec-8 ==>  Preparing: DELETE FROM nvcycleitem WHERE ecmschedule_no = ? 
09-03 11:29:55.616 ttp-nio-18084-exec-8 ==> Parameters: 14(Integer)
09-03 11:29:55.617 ttp-nio-18084-exec-8 <==    Updates: 1
09-03 11:29:55.617 ttp-nio-18084-exec-8 CycleItem.insertCycleItem
09-03 11:29:55.618 ttp-nio-18084-exec-8 ==>  Preparing: INSERT INTO nvcycleitem (ecmschedule_no, cycleitem, check_yn) VALUES (?, ?, ?) 
09-03 11:29:55.618 ttp-nio-18084-exec-8 ==> Parameters: 14(Integer), WORKDAY(String), Y(String)
09-03 11:29:55.619 ttp-nio-18084-exec-8 <==    Updates: 1
09-03 11:30:04.887 ttp-nio-18084-exec-7 EcareScenario.updateEcareScenarioByPk
09-03 11:30:04.887 ttp-nio-18084-exec-7 ==>  Preparing: UPDATE nvecarescenario SET scenario_nm = ? , chrg_nm = ? , brc_nm = ? , lastupdate_dt = ? , lastupdate_tm = ? WHERE scenario_no = ? 
09-03 11:30:04.887 ttp-nio-18084-exec-7 ==> Parameters: 이케어 발송 테스트(String), (String), (String), 20210903(String), 113004(String), 14(Integer)
09-03 11:30:04.889 ttp-nio-18084-exec-7 <==    Updates: 1
09-03 11:30:04.889 ttp-nio-18084-exec-7 Ecare.updateEcare2StepInfo
09-03 11:30:04.889 ttp-nio-18084-exec-7 ==>  Preparing: UPDATE nvecaremsg SET lastupdate_dt = to_char(sysdate, 'yyyyMMdd') , ecare_nm = ? , deploy_type = ? WHERE ecare_no = ? 
09-03 11:30:04.889 ttp-nio-18084-exec-7 ==> Parameters: 이케어 발송 테스트(String), REAL(String), 17(Integer)
09-03 11:30:04.890 ttp-nio-18084-exec-7 <==    Updates: 1
09-03 11:30:04.891 ttp-nio-18084-exec-7 EcmSchedule.updateEcmSchedule1StepInfo
09-03 11:30:04.891 ttp-nio-18084-exec-7 ==>  Preparing: UPDATE nvecmschedule SET cycle_cd = ? , sendstart_dt = ? , sendend_dt = ? , invoke_tm = ? , invoke_every_min = ? , day = ? , sche_weeknumber = ? , weekday = ? , start_tm = ? , end_tm = ? , term_min = ? WHERE ecmschedule_no = ? 
09-03 11:30:04.891 ttp-nio-18084-exec-7 ==> Parameters: 1(String), 20210903(String), 20210910(String), 112800(String), null, 0(Integer), 1(Integer), MON(String), null, null, null, 14(Integer)
09-03 11:30:04.893 ttp-nio-18084-exec-7 <==    Updates: 1
09-03 11:30:04.893 ttp-nio-18084-exec-7 CycleItem.deleteEcareCycleItemInfo
09-03 11:30:04.893 ttp-nio-18084-exec-7 ==>  Preparing: DELETE FROM nvcycleitem WHERE ecmschedule_no = ? 
09-03 11:30:04.893 ttp-nio-18084-exec-7 ==> Parameters: 14(Integer)
09-03 11:30:04.894 ttp-nio-18084-exec-7 <==    Updates: 1
09-03 11:30:04.895 ttp-nio-18084-exec-7 CycleItem.insertCycleItem
09-03 11:30:04.895 ttp-nio-18084-exec-7 ==>  Preparing: INSERT INTO nvcycleitem (ecmschedule_no, cycleitem, check_yn) VALUES (?, ?, ?) 
09-03 11:30:04.895 ttp-nio-18084-exec-7 ==> Parameters: 14(Integer), RWORKDAY(String), Y(String)
09-03 11:30:04.897 ttp-nio-18084-exec-7 <==    Updates: 1
09-03 11:30:23.404 ttp-nio-18084-exec-1 EcareScenario.updateEcareScenarioByPk
09-03 11:30:23.404 ttp-nio-18084-exec-1 ==>  Preparing: UPDATE nvecarescenario SET scenario_nm = ? , chrg_nm = ? , brc_nm = ? , lastupdate_dt = ? , lastupdate_tm = ? WHERE scenario_no = ? 
09-03 11:30:23.404 ttp-nio-18084-exec-1 ==> Parameters: 이케어 발송 테스트(String), (String), (String), 20210903(String), 113023(String), 14(Integer)
09-03 11:30:23.406 ttp-nio-18084-exec-1 <==    Updates: 1
09-03 11:30:23.406 ttp-nio-18084-exec-1 Ecare.updateEcare2StepInfo
09-03 11:30:23.406 ttp-nio-18084-exec-1 ==>  Preparing: UPDATE nvecaremsg SET lastupdate_dt = to_char(sysdate, 'yyyyMMdd') , ecare_nm = ? , deploy_type = ? WHERE ecare_no = ? 
09-03 11:30:23.407 ttp-nio-18084-exec-1 ==> Parameters: 이케어 발송 테스트(String), REAL(String), 17(Integer)
09-03 11:30:23.407 ttp-nio-18084-exec-1 <==    Updates: 1
09-03 11:30:23.408 ttp-nio-18084-exec-1 EcmSchedule.updateEcmSchedule1StepInfo
09-03 11:30:23.408 ttp-nio-18084-exec-1 ==>  Preparing: UPDATE nvecmschedule SET cycle_cd = ? , sendstart_dt = ? , sendend_dt = ? , invoke_tm = ? , invoke_every_min = ? , day = ? , sche_weeknumber = ? , weekday = ? , start_tm = ? , end_tm = ? , term_min = ? WHERE ecmschedule_no = ? 
09-03 11:30:23.408 ttp-nio-18084-exec-1 ==> Parameters: 1(String), 20210903(String), 20210910(String), 112800(String), null, 0(Integer), 1(Integer), MON(String), null, null, null, 14(Integer)
09-03 11:30:23.409 ttp-nio-18084-exec-1 <==    Updates: 1
09-03 11:30:23.410 ttp-nio-18084-exec-1 CycleItem.deleteEcareCycleItemInfo
09-03 11:30:23.410 ttp-nio-18084-exec-1 ==>  Preparing: DELETE FROM nvcycleitem WHERE ecmschedule_no = ? 
09-03 11:30:23.410 ttp-nio-18084-exec-1 ==> Parameters: 14(Integer)
09-03 11:30:23.411 ttp-nio-18084-exec-1 <==    Updates: 1
09-03 11:30:23.411 ttp-nio-18084-exec-1 CycleItem.insertCycleItem
09-03 11:30:23.411 ttp-nio-18084-exec-1 ==>  Preparing: INSERT INTO nvcycleitem (ecmschedule_no, cycleitem, check_yn) VALUES (?, ?, ?) 
09-03 11:30:23.411 ttp-nio-18084-exec-1 ==> Parameters: 14(Integer), RWORKDAY(String), Y(String)
09-03 11:30:23.412 ttp-nio-18084-exec-1 <==    Updates: 1
09-03 11:31:13.572 ttp-nio-18084-exec-6 EcareScenario.updateEcareScenarioByPk
09-03 11:31:13.572 ttp-nio-18084-exec-6 ==>  Preparing: UPDATE nvecarescenario SET scenario_nm = ? , chrg_nm = ? , brc_nm = ? , lastupdate_dt = ? , lastupdate_tm = ? WHERE scenario_no = ? 
09-03 11:31:13.572 ttp-nio-18084-exec-6 ==> Parameters: 이케어 발송 테스트(String), (String), (String), 20210903(String), 113113(String), 14(Integer)
09-03 11:31:13.573 ttp-nio-18084-exec-6 <==    Updates: 1
09-03 11:31:13.574 ttp-nio-18084-exec-6 Ecare.updateEcare2StepInfo
09-03 11:31:13.574 ttp-nio-18084-exec-6 ==>  Preparing: UPDATE nvecaremsg SET lastupdate_dt = to_char(sysdate, 'yyyyMMdd') , ecare_nm = ? , deploy_type = ? WHERE ecare_no = ? 
09-03 11:31:13.574 ttp-nio-18084-exec-6 ==> Parameters: 이케어 발송 테스트(String), REAL(String), 17(Integer)
09-03 11:31:13.575 ttp-nio-18084-exec-6 <==    Updates: 1
09-03 11:31:13.576 ttp-nio-18084-exec-6 EcmSchedule.updateEcmSchedule1StepInfo
09-03 11:31:13.576 ttp-nio-18084-exec-6 ==>  Preparing: UPDATE nvecmschedule SET cycle_cd = ? , sendstart_dt = ? , sendend_dt = ? , invoke_tm = ? , invoke_every_min = ? , day = ? , sche_weeknumber = ? , weekday = ? , start_tm = ? , end_tm = ? , term_min = ? WHERE ecmschedule_no = ? 
09-03 11:31:13.576 ttp-nio-18084-exec-6 ==> Parameters: 2(String), 20210903(String), 20210910(String), 112800(String), null, 0(Integer), 1(Integer), MON(String), null, null, null, 14(Integer)
09-03 11:31:13.577 ttp-nio-18084-exec-6 <==    Updates: 1
09-03 11:31:13.577 ttp-nio-18084-exec-6 CycleItem.deleteEcareCycleItemInfo
09-03 11:31:13.578 ttp-nio-18084-exec-6 ==>  Preparing: DELETE FROM nvcycleitem WHERE ecmschedule_no = ? 
09-03 11:31:13.578 ttp-nio-18084-exec-6 ==> Parameters: 14(Integer)
09-03 11:31:13.578 ttp-nio-18084-exec-6 <==    Updates: 1
09-03 11:31:13.579 ttp-nio-18084-exec-6 CycleItem.insertCycleItem
09-03 11:31:13.579 ttp-nio-18084-exec-6 ==>  Preparing: INSERT INTO nvcycleitem (ecmschedule_no, cycleitem, check_yn) VALUES (?, ?, ?) 
09-03 11:31:13.579 ttp-nio-18084-exec-6 ==> Parameters: 14(Integer), MON(String), Y(String)
09-03 11:31:13.580 ttp-nio-18084-exec-6 <==    Updates: 1
09-03 11:33:24.848 ttp-nio-18084-exec-9 EcareScenario.updateEcareScenarioByPk
09-03 11:33:24.848 ttp-nio-18084-exec-9 ==>  Preparing: UPDATE nvecarescenario SET scenario_nm = ? , chrg_nm = ? , brc_nm = ? , lastupdate_dt = ? , lastupdate_tm = ? WHERE scenario_no = ? 
09-03 11:33:24.848 ttp-nio-18084-exec-9 ==> Parameters: 이케어 발송 테스트(String), (String), (String), 20210903(String), 113324(String), 14(Integer)
09-03 11:33:24.849 ttp-nio-18084-exec-9 <==    Updates: 1
09-03 11:33:24.850 ttp-nio-18084-exec-9 Ecare.updateEcare2StepInfo
09-03 11:33:24.850 ttp-nio-18084-exec-9 ==>  Preparing: UPDATE nvecaremsg SET lastupdate_dt = to_char(sysdate, 'yyyyMMdd') , ecare_nm = ? , deploy_type = ? WHERE ecare_no = ? 
09-03 11:33:24.850 ttp-nio-18084-exec-9 ==> Parameters: 이케어 발송 테스트(String), REAL(String), 17(Integer)
09-03 11:33:24.851 ttp-nio-18084-exec-9 <==    Updates: 1
09-03 11:33:24.852 ttp-nio-18084-exec-9 EcmSchedule.updateEcmSchedule1StepInfo
09-03 11:33:24.852 ttp-nio-18084-exec-9 ==>  Preparing: UPDATE nvecmschedule SET cycle_cd = ? , sendstart_dt = ? , sendend_dt = ? , invoke_tm = ? , invoke_every_min = ? , day = ? , sche_weeknumber = ? , weekday = ? , start_tm = ? , end_tm = ? , term_min = ? WHERE ecmschedule_no = ? 
09-03 11:33:24.852 ttp-nio-18084-exec-9 ==> Parameters: 3(String), 20210903(String), 20210910(String), 112800(String), null, 5(Integer), 0(Integer), (String), null, null, null, 14(Integer)
09-03 11:33:24.853 ttp-nio-18084-exec-9 <==    Updates: 1
09-03 11:33:24.853 ttp-nio-18084-exec-9 CycleItem.deleteEcareCycleItemInfo
09-03 11:33:24.853 ttp-nio-18084-exec-9 ==>  Preparing: DELETE FROM nvcycleitem WHERE ecmschedule_no = ? 
09-03 11:33:24.853 ttp-nio-18084-exec-9 ==> Parameters: 14(Integer)
09-03 11:33:24.854 ttp-nio-18084-exec-9 <==    Updates: 1
09-03 11:33:24.855 ttp-nio-18084-exec-9 CycleItem.insertCycleItem
09-03 11:33:24.855 ttp-nio-18084-exec-9 ==>  Preparing: INSERT INTO nvcycleitem (ecmschedule_no, cycleitem, check_yn) VALUES (?, ?, ?) 
09-03 11:33:24.855 ttp-nio-18084-exec-9 ==> Parameters: 14(Integer), JAN(String), Y(String)
09-03 11:33:24.856 ttp-nio-18084-exec-9 <==    Updates: 1
09-03 11:40:49.884 ttp-nio-18084-exec-6 EcareScenario.getEcareListTotalCount
09-03 11:40:49.884 ttp-nio-18084-exec-6 ==>  Preparing: SELECT count(*) FROM nvecarescenario a, nvecaremsgtag b, nvecaremsg c WHERE a.tag_no = b.tag_no AND a.scenario_no = c.scenario_no 
09-03 11:40:49.885 ttp-nio-18084-exec-6 ==> Parameters: 
09-03 11:40:49.886 ttp-nio-18084-exec-6 <==      Total: 1
09-03 11:40:49.887 ttp-nio-18084-exec-6 EcareScenario.getEcareList
09-03 11:40:49.887 ttp-nio-18084-exec-6 ==>  Preparing: SELECT coalesce(x.scenario_no,0) scenario_no, user_id, grp_cd, scenario_nm, scenario_type , create_dt, decode(l_rank, 1, chrg_nm, '') chrg_nm, decode(l_rank, 1, brc_nm, '') brc_nm, coalesce(x.ecare_no,0) ecare_no, channel_type , ecare_sts, relation_type, coalesce(depth_no,0) depth_no, ecare_level, service_type , sub_type, segment_no, relation_tree, segment_size target_cnt, invoke_tm, sendstart_dt , (SELECT name_kor FROM nvuser WHERE user_id = x.user_id) name_kor , (SELECT grp_nm FROM nvusergrp WHERE grp_cd = x.grp_cd) grp_nm , (SELECT val FROM nv_cd_mst WHERE cd_cat = '200111' AND cd = x.ecare_sts AND lang = ?) ecare_sts_nm , (SELECT val FROM nv_cd_mst WHERE cd_cat = '100221' AND cd = x.relation_type AND lang = ?) relation_type_nm , (SELECT val FROM nv_cd_mst WHERE cd_cat = '200131' AND cd = (x.service_type || x.sub_type) AND lang = ?) service_type_nm , (SELECT val FROM nv_cd_mst WHERE cd_cat = '200141' AND cd = x.sub_type AND lang = ?) sub_type_nm FROM ( SELECT row_number() OVER(PARTITION BY a.scenario_no ORDER BY a.scenario_no DESC, c.relation_tree, c.ecare_no DESC) l_rank , row_number() OVER(ORDER BY a.scenario_no DESC, c.relation_tree, c.ecare_no) rnum , a.scenario_no, a.user_id, a.grp_cd, a.scenario_nm, a.scenario_type, a.create_dt, a.chrg_nm, a.brc_nm, c.ecare_no, c.channel_type , c.ecare_sts, c.relation_type, c.depth_no, c.ecare_level, c.service_type, c.sub_type, c.segment_no, c.relation_tree , d.segment_size, e.invoke_tm, e.sendstart_dt FROM nvecarescenario a, nvecaremsgtag b, nvecaremsg c LEFT OUTER JOIN nvsegment d ON c.segment_no = d.segment_no LEFT OUTER JOIN nvecmschedule e ON c.ecmschedule_no = e.ecmschedule_no WHERE a.tag_no = b.tag_no AND a.scenario_no = c.scenario_no ORDER BY a.scenario_no DESC, c.relation_tree ) x WHERE rnum >= ((? - 1) * ? + 1) AND rnum <= ? * ? ORDER BY scenario_no DESC, relation_tree, ecare_no 
09-03 11:40:49.887 ttp-nio-18084-exec-6 ==> Parameters: ko(String), ko(String), ko(String), ko(String), 1(Integer), 10(Integer), 1(Integer), 10(Integer)
09-03 11:40:49.893 ttp-nio-18084-exec-6 <==      Total: 10
09-03 11:40:49.894 ttp-nio-18084-exec-6 CdMst.getCdMstList
09-03 11:40:49.894 ttp-nio-18084-exec-6 ==>  Preparing: SELECT cd_cat, cd, lang, par_cd_cat, val, cd_desc, use_col, use_yn, reg_dtm, mod_dtm, cd_ord FROM nv_cd_mst WHERE cd_cat = ? AND lang = ? 
09-03 11:40:49.895 ttp-nio-18084-exec-6 ==> Parameters: 200111(String), ko(String)
09-03 11:40:49.896 ttp-nio-18084-exec-6 <==      Total: 5
09-03 11:40:49.896 ttp-nio-18084-exec-6 CdMst.getCdMstList
09-03 11:40:49.896 ttp-nio-18084-exec-6 ==>  Preparing: SELECT cd_cat, cd, lang, par_cd_cat, val, cd_desc, use_col, use_yn, reg_dtm, mod_dtm, cd_ord FROM nv_cd_mst WHERE cd_cat = ? AND lang = ? 
09-03 11:40:49.896 ttp-nio-18084-exec-6 ==> Parameters: 200131(String), ko(String)
09-03 11:40:49.897 ttp-nio-18084-exec-6 <==      Total: 3
09-03 11:40:53.026 ttp-nio-18084-exec-9 Ecare.getEcareChannelInfo
09-03 11:40:53.027 ttp-nio-18084-exec-9 ==>  Preparing: SELECT (CASE channel_type WHEN 'M' THEN 4 WHEN 'S' THEN 3 WHEN 'T' THEN 2 WHEN 'F' THEN 1 END) as seq, ecare_no, channel_type, depth_no FROM nvecaremsg WHERE scenario_no = ? ORDER BY seq DESC, depth_no 
09-03 11:40:53.027 ttp-nio-18084-exec-9 ==> Parameters: 13(Integer)
09-03 11:40:53.027 ttp-nio-18084-exec-9 <==      Total: 1
09-03 11:40:53.028 ttp-nio-18084-exec-9 EcareScenario.selectEcareScenarioDetailInfo
09-03 11:40:53.028 ttp-nio-18084-exec-9 ==>  Preparing: SELECT a.scenario_no, a.scenario_nm, a.scenario_desc, a.scenario_type, a.finish_yn, a.finish_dt, coalesce(a.tag_no,0) tag_no, a.handler_type, b.name_kor, c.tag_nm , d.ecare_no, d.user_id, d.grp_cd, d.segment_no, d.ecare_nm, d.ecare_preface, d.ecare_sts, d.create_dt, d.create_tm, d.lastupdate_dt , d.lastupdate_tm, d.campaign_type, d.template_type, coalesce(d.ecmschedule_no,0) ecmschedule_no, d.sender_nm, d.sender_email, d.sending_mode, coalesce(d.retry_cnt,1) retry_cnt, d.receiver_nm, d.sender_tel , d.retmail_receiver, d.ecare_class, d.relation_type, d.relation_tree, d.channel_type, d.service_type, d.ecare_level, d.sub_type, d.depth_no, d.verify_b4_send , d.template_sender_key, d.kakao_sender_key, d.kakao_tmpl_cd, coalesce(d.kakao_image_no,0) kakao_image_no, d.failback_send_yn, d.failback_subject, coalesce(d.handler_seq,0) handler_seq , coalesce(e.term_type,'1') term_type, f.segment_nm, f.segment_size, g.sender_nm as env_sender_nm, g.sender_email as env_sender_email , g.receiver_nm as env_receiver_nm, g.sender_tel as env_sender_tel, g.retmail_receiver as env_retmail_receiver, g.sender_fax as env_sender_fax, g.receiver_fax as env_receiver_fax , (SELECT val FROM nv_cd_mst WHERE cd_cat = '200111' AND cd = d.ecare_sts AND lang = ?) as ecare_sts_nm , a.chrg_nm, a.brc_nm , d.slot1_field, d.slot2_field, d.slot3_field, d.slot4_field, d.slot5_field , d.slot6_field, d.slot7_field, d.slot8_field, d.slot9_field, d.slot10_field , d.deploy_type , d.open_type, d.mail_type, d.req_dept_id FROM nvecarescenario a, nvuser b, nvecaremsgtag c, nvecaremsg d LEFT OUTER JOIN nvecaretraceinfo e ON d.ecare_no = e.ecare_no LEFT OUTER JOIN nvsegment f ON d.segment_no = f.segment_no LEFT OUTER JOIN nvusermailinfo g ON d.user_id = g.user_id WHERE a.grp_cd = b.grp_cd AND a.user_id = b.user_id AND a.tag_no = c.tag_no AND a.scenario_no = d.scenario_no AND a.scenario_no = ? AND d.ecare_no = ? 
09-03 11:40:53.028 ttp-nio-18084-exec-9 ==> Parameters: ko(String), 13(Integer), 16(Integer)
09-03 11:40:53.030 ttp-nio-18084-exec-9 <==      Total: 1
09-03 11:40:53.039 ttp-nio-18084-exec-9 Ecare.updateEcare2StepInfo
09-03 11:40:53.039 ttp-nio-18084-exec-9 ==>  Preparing: UPDATE nvecaremsg SET lastupdate_dt = to_char(sysdate, 'yyyyMMdd') WHERE ecare_no = ? 
09-03 11:40:53.039 ttp-nio-18084-exec-9 ==> Parameters: 16(Integer)
09-03 11:40:53.041 ttp-nio-18084-exec-9 <==    Updates: 1
09-03 11:40:53.041 ttp-nio-18084-exec-9 EcmSchedule.selectEcmScheduleByPk
09-03 11:40:53.041 ttp-nio-18084-exec-9 ==>  Preparing: SELECT coalesce(ecmschedule_no,0) ecmschedule_no, ecmschedule_nm, cycle_cd, sendstart_dt, sendend_dt, invoke_tm, invoke_every_min , coalesce(day,0) as day, coalesce(sche_weeknumber,0) sche_weeknumber, weekday, start_tm, end_tm, term_min FROM nvecmschedule WHERE ecmschedule_no = ? 
09-03 11:40:53.041 ttp-nio-18084-exec-9 ==> Parameters: 13(Integer)
09-03 11:40:53.042 ttp-nio-18084-exec-9 <==      Total: 1
09-03 11:40:53.042 ttp-nio-18084-exec-9 CycleItem.selectCycleItemInfo
09-03 11:40:53.042 ttp-nio-18084-exec-9 ==>  Preparing: SELECT cycleitem, check_yn FROM nvcycleitem WHERE ecmschedule_no = ? 
09-03 11:40:53.042 ttp-nio-18084-exec-9 ==> Parameters: 13(Integer)
09-03 11:40:53.043 ttp-nio-18084-exec-9 <==      Total: 0
09-03 11:40:53.043 ttp-nio-18084-exec-9 Segment.selectTargetQueryInfo
09-03 11:40:53.043 ttp-nio-18084-exec-9 ==>  Preparing: SELECT a.dbinfo_seq, coalesce(a.sqlhead,' ') sqlhead, coalesce(a.sqlbody,' ') sqlbody, coalesce(a.sqltail,' ') sqltail, a.testquery , b.dbkind, b.driver_nm, b.driver_dsn, b.dbuser_id, b.dbpassword, b.encoding, b.decoding, a.updatequery FROM nvsegment a, nvdbinfo b WHERE a.dbinfo_seq = b.dbinfo_seq AND a.segment_no = ? 
09-03 11:40:53.043 ttp-nio-18084-exec-9 ==> Parameters: 0(Integer)
09-03 11:40:53.044 ttp-nio-18084-exec-9 <==      Total: 0
09-03 11:40:53.044 ttp-nio-18084-exec-9 Semantic.selectSementicInfo
09-03 11:40:53.044 ttp-nio-18084-exec-9 ==>  Preparing: SELECT segment_no, field_seq, field_nm, field_desc, null_yn, field_key , (CASE WHEN field_key = 'K' THEN 1 WHEN field_key = 'N' THEN 2 WHEN field_key = 'E' THEN 3 WHEN field_key = 'S' THEN 4 WHEN field_key = 'A' THEN 5 WHEN field_key = 'B' THEN 6 ELSE 99 END) sort FROM nvsemantic WHERE segment_no = ? ORDER BY sort 
09-03 11:40:53.044 ttp-nio-18084-exec-9 ==> Parameters: 0(Integer)
09-03 11:40:53.045 ttp-nio-18084-exec-9 <==      Total: 0
09-03 11:40:53.045 ttp-nio-18084-exec-9 AddQuery.selectAddQuery
09-03 11:40:53.045 ttp-nio-18084-exec-9 ==>  Preparing: SELECT ecare_no, query_seq, query_type, result_id, dbinfo_seq, query, execute_type FROM nvaddquery WHERE ecare_no= ? 
09-03 11:40:53.045 ttp-nio-18084-exec-9 ==> Parameters: 16(Integer)
09-03 11:40:53.045 ttp-nio-18084-exec-9 <==      Total: 0
09-03 11:40:53.046 ttp-nio-18084-exec-9 EcareScenario.selectOmniChannelEcares
09-03 11:40:53.046 ttp-nio-18084-exec-9 ==>  Preparing: SELECT a.scenario_no, a.scenario_nm, coalesce(b.ecare_no,0) ecare_no, b.depth_no, b.channel_type, b.relation_type , (SELECT val FROM nv_cd_mst WHERE cd_cat = '200111' AND cd = b.ecare_sts AND lang = ?) ecare_sts_nm , c.segment_size as target_cnt FROM nvecarescenario a, nvecaremsg b LEFT OUTER JOIN nvsegment c ON b.segment_no = c.segment_no WHERE a.scenario_no = b.scenario_no AND a.scenario_no = ( SELECT scenario_no FROM nvecaremsg WHERE ecare_no = ? ) AND b.relation_type IN ('N','S','F','O') ORDER BY rpad( b.relation_tree , (SELECT max(depth_no) FROM nvecaremsg WHERE scenario_no = (SELECT scenario_no FROM nvecaremsg WHERE ecare_no = ?)) , 0 ), b.ecare_no 
09-03 11:40:53.046 ttp-nio-18084-exec-9 ==> Parameters: ko(String), 16(Integer), 16(Integer)
09-03 11:40:53.047 ttp-nio-18084-exec-9 <==      Total: 1
09-03 11:40:53.047 ttp-nio-18084-exec-9 ServerInfo.selectServerInfo
09-03 11:40:53.047 ttp-nio-18084-exec-9 ==>  Preparing: SELECT host_nm, port_no, driver_nm, driver_dsn, dbuser_id, dbpassword, openclick_path, survey_path, link_path, htmlmaker_path , openimage_path, duration_path, reject_path, smtp_ip, smtp_port, fula_ip, fula_port, ftp_yn, ftp_user_id, ftp_password , lastupdate_dt, editor_id, ret_domain, coalesce(retry_cnt,0) retry_cnt, b4_send_approve_yn, b4_send_verify_yn, b4_real_send_test_send_yn, ase_link_merge_param, ase_reject_merge_param, ase_open_scriptlet , groovy_link_merge_param, groovy_reject_merge_param, groovy_open_scriptlet, resend_include_returnmail_yn, resend_include_mail_key_yn, resend_error_cd, fax_resend_error_cd, sms_resend_error_cd, altalk_resend_error_cd, push_resend_error_cd , spool_preserve_period, log_preserve_period, result_file_download_yn, sucs_result_file_download_yn, kakao_template_last_sync_dtm , (SELECT mintime FROM nvdurationinfo WHERE durationinfo_cd = '01') as duration_time FROM nvserverinfo 
09-03 11:40:53.047 ttp-nio-18084-exec-9 ==> Parameters: 
09-03 11:40:53.048 ttp-nio-18084-exec-9 <==      Total: 1
09-03 11:40:53.048 ttp-nio-18084-exec-9 DbInfo.selectDbInfoList
09-03 11:40:53.048 ttp-nio-18084-exec-9 ==>  Preparing: SELECT dbinfo_seq, driver_nm, server_nm, driver_dsn, dbuser_id, dbpassword, encoding, decoding, dbkind, testquery FROM nvdbinfo 
09-03 11:40:53.048 ttp-nio-18084-exec-9 ==> Parameters: 
09-03 11:40:53.049 ttp-nio-18084-exec-9 <==      Total: 1
09-03 11:40:53.592 ttp-nio-18084-exec-8 MobileContents.selectEditorSmsContentsListMax
09-03 11:40:53.592 ttp-nio-18084-exec-8 ==>  Preparing: SELECT count(*) FROM nvmobilecontents WHERE file_type = 'D' 
09-03 11:40:53.592 ttp-nio-18084-exec-8 ==> Parameters: 
09-03 11:40:53.593 ttp-nio-18084-exec-1 Ecare.selectEditorEcare
09-03 11:40:53.593 ttp-nio-18084-exec-1 ==>  Preparing: SELECT ecare_preface, coalesce(template_type,0) template_type, sender_nm, sender_email, receiver_nm , retmail_receiver, sender_tel, coalesce(retry_cnt,0) retry_cnt, mail_type, tmpl_ver , coalesce(preface_ver,0) preface_ver, coalesce(cover_ver,0) cover_ver, coalesce(handler_ver,0) handler_ver, coalesce(handler_seq,0) handler_seq FROM nvecaremsg WHERE ecare_no = ? 
09-03 11:40:53.593 ttp-nio-18084-exec-1 ==> Parameters: 16(Integer)
09-03 11:40:53.593 ttp-nio-18084-exec-8 <==      Total: 1
09-03 11:40:53.593 ttp-nio-18084-exec-1 <==      Total: 1
09-03 11:40:53.594 ttp-nio-18084-exec-8 MobileContents.selectEditorSmsContentsList
09-03 11:40:53.594 ttp-nio-18084-exec-8 ==>  Preparing: SELECT user_id, conts_nm, conts_txt , to_char(to_date(create_dt,'YYYYMMDD'),'YYYY-MM-DD') as create_dt, to_char(to_date(create_tm,'HH24MISS'),'HH:MI:SS') as create_tm FROM ( SELECT row_number() OVER (ORDER BY conts_no DESC) as rnum, conts_no, user_id, conts_nm, conts_txt, create_dt, create_tm FROM nvmobilecontents WHERE file_type = 'D' ORDER BY conts_no DESC ) WHERE rnum BETWEEN ? AND ? 
09-03 11:40:53.594 ttp-nio-18084-exec-8 ==> Parameters: 1(Integer), 6(Integer)
09-03 11:40:53.595 ttp-nio-18084-exec-8 <==      Total: 0
09-03 11:40:53.628 ttp-nio-18084-exec-7 Ecare.selectSubEcareList
09-03 11:40:53.628 ttp-nio-18084-exec-7 ==>  Preparing: SELECT ecare_no, scenario_no, ecare_nm, channel_type, depth_no, relation_type FROM nvecaremsg WHERE scenario_no = ? AND depth_no = ? AND relation_tree LIKE ((SELECT relation_tree FROM nvecaremsg WHERE ecare_no = ?) || '%') 
09-03 11:40:53.628 ttp-nio-18084-exec-7 ==> Parameters: 13(Integer), 2(Integer), 16(Integer)
09-03 11:40:53.629 ttp-nio-18084-exec-7 <==      Total: 0
09-03 11:40:53.630 ttp-nio-18084-exec-7 Semantic.selectEcareSemanticKey
09-03 11:40:53.630 ttp-nio-18084-exec-7 ==>  Preparing: SELECT field_key FROM nvsemantic WHERE segment_no = (SELECT segment_no FROM nvecaremsg WHERE scenario_no = ? AND depth_no = 1) AND field_key IS NOT NULL 
09-03 11:40:53.630 ttp-nio-18084-exec-7 ==> Parameters: 13(Integer)
09-03 11:40:53.630 ttp-nio-18084-exec-7 <==      Total: 0
09-03 11:40:53.699 ttp-nio-18084-exec-6 Ecare.selectEditorEcare
09-03 11:40:53.699 ttp-nio-18084-exec-9 EcMsgHandler.selectEcMsgHandlerByPk
09-03 11:40:53.699 ttp-nio-18084-exec-6 ==>  Preparing: SELECT ecare_preface, coalesce(template_type,0) template_type, sender_nm, sender_email, receiver_nm , retmail_receiver, sender_tel, coalesce(retry_cnt,0) retry_cnt, mail_type, tmpl_ver , coalesce(preface_ver,0) preface_ver, coalesce(cover_ver,0) cover_ver, coalesce(handler_ver,0) handler_ver, coalesce(handler_seq,0) handler_seq FROM nvecaremsg WHERE ecare_no = ? 
09-03 11:40:53.699 ttp-nio-18084-exec-9 ==>  Preparing: SELECT ecare_no, type, appsource FROM nvecmsghandler WHERE ecare_no = ? 
09-03 11:40:53.702 ttp-nio-18084-exec-6 ==> Parameters: 16(Integer)
09-03 11:40:53.702 ttp-nio-18084-exec-9 ==> Parameters: 16(Integer)
09-03 11:40:53.703 ttp-nio-18084-exec-6 <==      Total: 1
09-03 11:40:53.703 ttp-nio-18084-exec-6 DefaultHandler.selectHandlerUseList
09-03 11:40:53.703 ttp-nio-18084-exec-6 ==>  Preparing: SELECT seq, handle_nm, handle_desc FROM nvdefaulthandler c WHERE EXISTS ( SELECT 0 FROM nvecaremsg a, nvecarescenario b WHERE a.scenario_no = b.scenario_no AND a.channel_type = c.channel AND b.handler_type = c.handle_type AND a.ecare_no = ? AND c.service_type = (CASE WHEN a.sub_type ='N' THEN 'N' WHEN a.service_type ='S' THEN 'S' ELSE 'R' END ) AND c.handle_attr = (CASE WHEN a.mail_type ='NONE' THEN 'D' WHEN a.mail_type ='' THEN 'D' ELSE a.mail_type END ) ) ORDER BY seq 
09-03 11:40:53.703 ttp-nio-18084-exec-6 ==> Parameters: 16(Integer)
09-03 11:40:53.715 ttp-nio-18084-exec-6 <==      Total: 1
09-03 11:40:53.723 ttp-nio-18084-exec-9 <==      Total: 1
09-03 11:40:53.748 ttp-nio-18084-exec-1 EcareTemplate.selectEditorEcareTemplate
09-03 11:40:53.748 ttp-nio-18084-exec-1 ==>  Preparing: SELECT a.seg, a.template, a.kakao_buttons, CASE WHEN a.seg = ' ' THEN 0 ELSE 1 END as seg_no , CASE WHEN b.kakao_image_no IS NULL THEN '' ELSE (SELECT file_preview_path FROM nvmobilecontents WHERE conts_no = b.kakao_image_no) END as image_url , a.conts_no FROM nvecaretemplate a, nvecaremsg b WHERE a.ecare_no = b.ecare_no AND b.ecare_no = ? ORDER BY seg_no 
09-03 11:40:53.748 ttp-nio-18084-exec-1 ==> Parameters: 16(Integer)
09-03 11:40:53.749 ttp-nio-18084-exec-1 <==      Total: 1
09-03 11:40:53.750 ttp-nio-18084-exec-1 Semantic.selectSemanticListBySegmentNo
09-03 11:40:53.750 ttp-nio-18084-exec-1 ==>  Preparing: SELECT field_seq, field_nm, field_desc, coalesce(field_key,'') field_key FROM nvsemantic WHERE segment_no = ? ORDER BY field_seq 
09-03 11:40:53.750 ttp-nio-18084-exec-1 ==> Parameters: 0(Integer)
09-03 11:40:53.750 ttp-nio-18084-exec-1 <==      Total: 0
09-03 11:40:57.449 ttp-nio-18084-exec-8 Ecare.getEcareChannelInfo
09-03 11:40:57.449 ttp-nio-18084-exec-8 ==>  Preparing: SELECT (CASE channel_type WHEN 'M' THEN 4 WHEN 'S' THEN 3 WHEN 'T' THEN 2 WHEN 'F' THEN 1 END) as seq, ecare_no, channel_type, depth_no FROM nvecaremsg WHERE scenario_no = ? ORDER BY seq DESC, depth_no 
09-03 11:40:57.449 ttp-nio-18084-exec-8 ==> Parameters: 11(Integer)
09-03 11:40:57.450 ttp-nio-18084-exec-8 <==      Total: 1
09-03 11:40:57.450 ttp-nio-18084-exec-8 EcareScenario.selectEcareScenarioDetailInfo
09-03 11:40:57.450 ttp-nio-18084-exec-8 ==>  Preparing: SELECT a.scenario_no, a.scenario_nm, a.scenario_desc, a.scenario_type, a.finish_yn, a.finish_dt, coalesce(a.tag_no,0) tag_no, a.handler_type, b.name_kor, c.tag_nm , d.ecare_no, d.user_id, d.grp_cd, d.segment_no, d.ecare_nm, d.ecare_preface, d.ecare_sts, d.create_dt, d.create_tm, d.lastupdate_dt , d.lastupdate_tm, d.campaign_type, d.template_type, coalesce(d.ecmschedule_no,0) ecmschedule_no, d.sender_nm, d.sender_email, d.sending_mode, coalesce(d.retry_cnt,1) retry_cnt, d.receiver_nm, d.sender_tel , d.retmail_receiver, d.ecare_class, d.relation_type, d.relation_tree, d.channel_type, d.service_type, d.ecare_level, d.sub_type, d.depth_no, d.verify_b4_send , d.template_sender_key, d.kakao_sender_key, d.kakao_tmpl_cd, coalesce(d.kakao_image_no,0) kakao_image_no, d.failback_send_yn, d.failback_subject, coalesce(d.handler_seq,0) handler_seq , coalesce(e.term_type,'1') term_type, f.segment_nm, f.segment_size, g.sender_nm as env_sender_nm, g.sender_email as env_sender_email , g.receiver_nm as env_receiver_nm, g.sender_tel as env_sender_tel, g.retmail_receiver as env_retmail_receiver, g.sender_fax as env_sender_fax, g.receiver_fax as env_receiver_fax , (SELECT val FROM nv_cd_mst WHERE cd_cat = '200111' AND cd = d.ecare_sts AND lang = ?) as ecare_sts_nm , a.chrg_nm, a.brc_nm , d.slot1_field, d.slot2_field, d.slot3_field, d.slot4_field, d.slot5_field , d.slot6_field, d.slot7_field, d.slot8_field, d.slot9_field, d.slot10_field , d.deploy_type , d.open_type, d.mail_type, d.req_dept_id FROM nvecarescenario a, nvuser b, nvecaremsgtag c, nvecaremsg d LEFT OUTER JOIN nvecaretraceinfo e ON d.ecare_no = e.ecare_no LEFT OUTER JOIN nvsegment f ON d.segment_no = f.segment_no LEFT OUTER JOIN nvusermailinfo g ON d.user_id = g.user_id WHERE a.grp_cd = b.grp_cd AND a.user_id = b.user_id AND a.tag_no = c.tag_no AND a.scenario_no = d.scenario_no AND a.scenario_no = ? AND d.ecare_no = ? 
09-03 11:40:57.451 ttp-nio-18084-exec-8 ==> Parameters: ko(String), 11(Integer), 14(Integer)
09-03 11:40:57.464 ttp-nio-18084-exec-8 <==      Total: 1
09-03 11:40:57.465 ttp-nio-18084-exec-8 Ecare.updateEcare2StepInfo
09-03 11:40:57.465 ttp-nio-18084-exec-8 ==>  Preparing: UPDATE nvecaremsg SET lastupdate_dt = to_char(sysdate, 'yyyyMMdd') WHERE ecare_no = ? 
09-03 11:40:57.465 ttp-nio-18084-exec-8 ==> Parameters: 14(Integer)
09-03 11:40:57.466 ttp-nio-18084-exec-8 <==    Updates: 1
09-03 11:40:57.467 ttp-nio-18084-exec-8 EcmSchedule.selectEcmScheduleByPk
09-03 11:40:57.467 ttp-nio-18084-exec-8 ==>  Preparing: SELECT coalesce(ecmschedule_no,0) ecmschedule_no, ecmschedule_nm, cycle_cd, sendstart_dt, sendend_dt, invoke_tm, invoke_every_min , coalesce(day,0) as day, coalesce(sche_weeknumber,0) sche_weeknumber, weekday, start_tm, end_tm, term_min FROM nvecmschedule WHERE ecmschedule_no = ? 
09-03 11:40:57.467 ttp-nio-18084-exec-8 ==> Parameters: 11(Integer)
09-03 11:40:57.467 ttp-nio-18084-exec-8 <==      Total: 1
09-03 11:40:57.468 ttp-nio-18084-exec-8 CycleItem.selectCycleItemInfo
09-03 11:40:57.468 ttp-nio-18084-exec-8 ==>  Preparing: SELECT cycleitem, check_yn FROM nvcycleitem WHERE ecmschedule_no = ? 
09-03 11:40:57.468 ttp-nio-18084-exec-8 ==> Parameters: 11(Integer)
09-03 11:40:57.468 ttp-nio-18084-exec-8 <==      Total: 0
09-03 11:40:57.469 ttp-nio-18084-exec-8 EcareMultipartFile.selectEditorEcareMultipartFile
09-03 11:40:57.469 ttp-nio-18084-exec-8 ==>  Preparing: SELECT file_alias, file_path, file_size, file_name, file_type, secu_field, enc_yn FROM nvecaremultipartfile WHERE ecare_no = ? 
09-03 11:40:57.469 ttp-nio-18084-exec-8 ==> Parameters: 14(Integer)
09-03 11:40:57.471 ttp-nio-18084-exec-8 <==      Total: 0
09-03 11:40:57.472 ttp-nio-18084-exec-8 AddQuery.selectAddQuery
09-03 11:40:57.472 ttp-nio-18084-exec-8 ==>  Preparing: SELECT ecare_no, query_seq, query_type, result_id, dbinfo_seq, query, execute_type FROM nvaddquery WHERE ecare_no= ? 
09-03 11:40:57.472 ttp-nio-18084-exec-8 ==> Parameters: 14(Integer)
09-03 11:40:57.480 ttp-nio-18084-exec-8 <==      Total: 2
09-03 11:40:57.481 ttp-nio-18084-exec-8 EcareScenario.selectOmniChannelEcares
09-03 11:40:57.481 ttp-nio-18084-exec-8 ==>  Preparing: SELECT a.scenario_no, a.scenario_nm, coalesce(b.ecare_no,0) ecare_no, b.depth_no, b.channel_type, b.relation_type , (SELECT val FROM nv_cd_mst WHERE cd_cat = '200111' AND cd = b.ecare_sts AND lang = ?) ecare_sts_nm , c.segment_size as target_cnt FROM nvecarescenario a, nvecaremsg b LEFT OUTER JOIN nvsegment c ON b.segment_no = c.segment_no WHERE a.scenario_no = b.scenario_no AND a.scenario_no = ( SELECT scenario_no FROM nvecaremsg WHERE ecare_no = ? ) AND b.relation_type IN ('N','S','F','O') ORDER BY rpad( b.relation_tree , (SELECT max(depth_no) FROM nvecaremsg WHERE scenario_no = (SELECT scenario_no FROM nvecaremsg WHERE ecare_no = ?)) , 0 ), b.ecare_no 
09-03 11:40:57.482 ttp-nio-18084-exec-8 ==> Parameters: ko(String), 14(Integer), 14(Integer)
09-03 11:40:57.482 ttp-nio-18084-exec-8 <==      Total: 1
09-03 11:40:57.483 ttp-nio-18084-exec-8 ServerInfo.selectServerInfo
09-03 11:40:57.483 ttp-nio-18084-exec-8 ==>  Preparing: SELECT host_nm, port_no, driver_nm, driver_dsn, dbuser_id, dbpassword, openclick_path, survey_path, link_path, htmlmaker_path , openimage_path, duration_path, reject_path, smtp_ip, smtp_port, fula_ip, fula_port, ftp_yn, ftp_user_id, ftp_password , lastupdate_dt, editor_id, ret_domain, coalesce(retry_cnt,0) retry_cnt, b4_send_approve_yn, b4_send_verify_yn, b4_real_send_test_send_yn, ase_link_merge_param, ase_reject_merge_param, ase_open_scriptlet , groovy_link_merge_param, groovy_reject_merge_param, groovy_open_scriptlet, resend_include_returnmail_yn, resend_include_mail_key_yn, resend_error_cd, fax_resend_error_cd, sms_resend_error_cd, altalk_resend_error_cd, push_resend_error_cd , spool_preserve_period, log_preserve_period, result_file_download_yn, sucs_result_file_download_yn, kakao_template_last_sync_dtm , (SELECT mintime FROM nvdurationinfo WHERE durationinfo_cd = '01') as duration_time FROM nvserverinfo 
09-03 11:40:57.483 ttp-nio-18084-exec-8 ==> Parameters: 
09-03 11:40:57.484 ttp-nio-18084-exec-8 <==      Total: 1
09-03 11:40:57.485 ttp-nio-18084-exec-8 DbInfo.selectDbInfoList
09-03 11:40:57.485 ttp-nio-18084-exec-8 ==>  Preparing: SELECT dbinfo_seq, driver_nm, server_nm, driver_dsn, dbuser_id, dbpassword, encoding, decoding, dbkind, testquery FROM nvdbinfo 
09-03 11:40:57.485 ttp-nio-18084-exec-8 ==> Parameters: 
09-03 11:40:57.485 ttp-nio-18084-exec-8 <==      Total: 1
09-03 11:40:57.926 ttp-nio-18084-exec-9 Ecare.selectEditorEcare
09-03 11:40:57.926 ttp-nio-18084-exec-9 ==>  Preparing: SELECT ecare_preface, coalesce(template_type,0) template_type, sender_nm, sender_email, receiver_nm , retmail_receiver, sender_tel, coalesce(retry_cnt,0) retry_cnt, mail_type, tmpl_ver , coalesce(preface_ver,0) preface_ver, coalesce(cover_ver,0) cover_ver, coalesce(handler_ver,0) handler_ver, coalesce(handler_seq,0) handler_seq FROM nvecaremsg WHERE ecare_no = ? 
09-03 11:40:57.926 ttp-nio-18084-exec-9 ==> Parameters: 14(Integer)
09-03 11:40:57.927 ttp-nio-18084-exec-9 <==      Total: 1
09-03 11:40:57.938 ttp-nio-18084-exec-6 Ecare.selectSubEcareList
09-03 11:40:57.938 ttp-nio-18084-exec-6 ==>  Preparing: SELECT ecare_no, scenario_no, ecare_nm, channel_type, depth_no, relation_type FROM nvecaremsg WHERE scenario_no = ? AND depth_no = ? AND relation_tree LIKE ((SELECT relation_tree FROM nvecaremsg WHERE ecare_no = ?) || '%') 
09-03 11:40:57.938 ttp-nio-18084-exec-6 ==> Parameters: 11(Integer), 2(Integer), 14(Integer)
09-03 11:40:57.939 ttp-nio-18084-exec-6 <==      Total: 0
09-03 11:40:57.963 ttp-nio-18084-exec-8 Ecare.selectEditorEcare
09-03 11:40:57.963 ttp-nio-18084-exec-1 EcMsgHandler.selectEcMsgHandlerByPk
09-03 11:40:57.964 ttp-nio-18084-exec-8 ==>  Preparing: SELECT ecare_preface, coalesce(template_type,0) template_type, sender_nm, sender_email, receiver_nm , retmail_receiver, sender_tel, coalesce(retry_cnt,0) retry_cnt, mail_type, tmpl_ver , coalesce(preface_ver,0) preface_ver, coalesce(cover_ver,0) cover_ver, coalesce(handler_ver,0) handler_ver, coalesce(handler_seq,0) handler_seq FROM nvecaremsg WHERE ecare_no = ? 
09-03 11:40:57.964 ttp-nio-18084-exec-1 ==>  Preparing: SELECT ecare_no, type, appsource FROM nvecmsghandler WHERE ecare_no = ? 
09-03 11:40:57.964 ttp-nio-18084-exec-8 ==> Parameters: 14(Integer)
09-03 11:40:57.964 ttp-nio-18084-exec-1 ==> Parameters: 14(Integer)
09-03 11:40:57.964 ttp-nio-18084-exec-8 <==      Total: 1
09-03 11:40:57.965 ttp-nio-18084-exec-8 DefaultHandler.selectHandlerUseList
09-03 11:40:57.965 ttp-nio-18084-exec-8 ==>  Preparing: SELECT seq, handle_nm, handle_desc FROM nvdefaulthandler c WHERE EXISTS ( SELECT 0 FROM nvecaremsg a, nvecarescenario b WHERE a.scenario_no = b.scenario_no AND a.channel_type = c.channel AND b.handler_type = c.handle_type AND a.ecare_no = ? AND c.service_type = (CASE WHEN a.sub_type ='N' THEN 'N' WHEN a.service_type ='S' THEN 'S' ELSE 'R' END ) AND c.handle_attr = (CASE WHEN a.mail_type ='NONE' THEN 'D' WHEN a.mail_type ='' THEN 'D' ELSE a.mail_type END ) ) ORDER BY seq 
09-03 11:40:57.966 ttp-nio-18084-exec-8 ==> Parameters: 14(Integer)
09-03 11:40:57.967 ttp-nio-18084-exec-1 <==      Total: 1
09-03 11:40:57.967 ttp-nio-18084-exec-8 <==      Total: 1
09-03 11:40:58.137 ttp-nio-18084-exec-7 EcareTemplate.selectEditorEcareTemplate
09-03 11:40:58.137 ttp-nio-18084-exec-7 ==>  Preparing: SELECT a.seg, a.template, a.kakao_buttons, CASE WHEN a.seg = ' ' THEN 0 ELSE 1 END as seg_no , CASE WHEN b.kakao_image_no IS NULL THEN '' ELSE (SELECT file_preview_path FROM nvmobilecontents WHERE conts_no = b.kakao_image_no) END as image_url , a.conts_no FROM nvecaretemplate a, nvecaremsg b WHERE a.ecare_no = b.ecare_no AND b.ecare_no = ? ORDER BY seg_no 
09-03 11:40:58.138 ttp-nio-18084-exec-7 ==> Parameters: 14(Integer)
09-03 11:40:58.140 ttp-nio-18084-exec-7 <==      Total: 1
09-03 11:41:03.835 ttp-nio-18084-exec-9 Ecare.getEcareChannelInfo
09-03 11:41:03.835 ttp-nio-18084-exec-9 ==>  Preparing: SELECT (CASE channel_type WHEN 'M' THEN 4 WHEN 'S' THEN 3 WHEN 'T' THEN 2 WHEN 'F' THEN 1 END) as seq, ecare_no, channel_type, depth_no FROM nvecaremsg WHERE scenario_no = ? ORDER BY seq DESC, depth_no 
09-03 11:41:03.835 ttp-nio-18084-exec-9 ==> Parameters: 14(Integer)
09-03 11:41:03.836 ttp-nio-18084-exec-9 <==      Total: 1
09-03 11:41:03.837 ttp-nio-18084-exec-9 EcareScenario.selectEcareScenarioDetailInfo
09-03 11:41:03.837 ttp-nio-18084-exec-9 ==>  Preparing: SELECT a.scenario_no, a.scenario_nm, a.scenario_desc, a.scenario_type, a.finish_yn, a.finish_dt, coalesce(a.tag_no,0) tag_no, a.handler_type, b.name_kor, c.tag_nm , d.ecare_no, d.user_id, d.grp_cd, d.segment_no, d.ecare_nm, d.ecare_preface, d.ecare_sts, d.create_dt, d.create_tm, d.lastupdate_dt , d.lastupdate_tm, d.campaign_type, d.template_type, coalesce(d.ecmschedule_no,0) ecmschedule_no, d.sender_nm, d.sender_email, d.sending_mode, coalesce(d.retry_cnt,1) retry_cnt, d.receiver_nm, d.sender_tel , d.retmail_receiver, d.ecare_class, d.relation_type, d.relation_tree, d.channel_type, d.service_type, d.ecare_level, d.sub_type, d.depth_no, d.verify_b4_send , d.template_sender_key, d.kakao_sender_key, d.kakao_tmpl_cd, coalesce(d.kakao_image_no,0) kakao_image_no, d.failback_send_yn, d.failback_subject, coalesce(d.handler_seq,0) handler_seq , coalesce(e.term_type,'1') term_type, f.segment_nm, f.segment_size, g.sender_nm as env_sender_nm, g.sender_email as env_sender_email , g.receiver_nm as env_receiver_nm, g.sender_tel as env_sender_tel, g.retmail_receiver as env_retmail_receiver, g.sender_fax as env_sender_fax, g.receiver_fax as env_receiver_fax , (SELECT val FROM nv_cd_mst WHERE cd_cat = '200111' AND cd = d.ecare_sts AND lang = ?) as ecare_sts_nm , a.chrg_nm, a.brc_nm , d.slot1_field, d.slot2_field, d.slot3_field, d.slot4_field, d.slot5_field , d.slot6_field, d.slot7_field, d.slot8_field, d.slot9_field, d.slot10_field , d.deploy_type , d.open_type, d.mail_type, d.req_dept_id FROM nvecarescenario a, nvuser b, nvecaremsgtag c, nvecaremsg d LEFT OUTER JOIN nvecaretraceinfo e ON d.ecare_no = e.ecare_no LEFT OUTER JOIN nvsegment f ON d.segment_no = f.segment_no LEFT OUTER JOIN nvusermailinfo g ON d.user_id = g.user_id WHERE a.grp_cd = b.grp_cd AND a.user_id = b.user_id AND a.tag_no = c.tag_no AND a.scenario_no = d.scenario_no AND a.scenario_no = ? AND d.ecare_no = ? 
09-03 11:41:03.837 ttp-nio-18084-exec-9 ==> Parameters: ko(String), 14(Integer), 17(Integer)
09-03 11:41:03.839 ttp-nio-18084-exec-9 <==      Total: 1
09-03 11:41:03.840 ttp-nio-18084-exec-9 Ecare.updateEcare2StepInfo
09-03 11:41:03.840 ttp-nio-18084-exec-9 ==>  Preparing: UPDATE nvecaremsg SET lastupdate_dt = to_char(sysdate, 'yyyyMMdd') WHERE ecare_no = ? 
09-03 11:41:03.840 ttp-nio-18084-exec-9 ==> Parameters: 17(Integer)
09-03 11:41:03.841 ttp-nio-18084-exec-9 <==    Updates: 1
09-03 11:41:03.841 ttp-nio-18084-exec-9 EcmSchedule.selectEcmScheduleByPk
09-03 11:41:03.841 ttp-nio-18084-exec-9 ==>  Preparing: SELECT coalesce(ecmschedule_no,0) ecmschedule_no, ecmschedule_nm, cycle_cd, sendstart_dt, sendend_dt, invoke_tm, invoke_every_min , coalesce(day,0) as day, coalesce(sche_weeknumber,0) sche_weeknumber, weekday, start_tm, end_tm, term_min FROM nvecmschedule WHERE ecmschedule_no = ? 
09-03 11:41:03.842 ttp-nio-18084-exec-9 ==> Parameters: 14(Integer)
09-03 11:41:03.842 ttp-nio-18084-exec-9 <==      Total: 1
09-03 11:41:03.843 ttp-nio-18084-exec-9 CycleItem.selectCycleItemInfo
09-03 11:41:03.843 ttp-nio-18084-exec-9 ==>  Preparing: SELECT cycleitem, check_yn FROM nvcycleitem WHERE ecmschedule_no = ? 
09-03 11:41:03.843 ttp-nio-18084-exec-9 ==> Parameters: 14(Integer)
09-03 11:41:03.843 ttp-nio-18084-exec-9 <==      Total: 1
09-03 11:41:03.844 ttp-nio-18084-exec-9 Segment.selectTargetQueryInfo
09-03 11:41:03.844 ttp-nio-18084-exec-9 ==>  Preparing: SELECT a.dbinfo_seq, coalesce(a.sqlhead,' ') sqlhead, coalesce(a.sqlbody,' ') sqlbody, coalesce(a.sqltail,' ') sqltail, a.testquery , b.dbkind, b.driver_nm, b.driver_dsn, b.dbuser_id, b.dbpassword, b.encoding, b.decoding, a.updatequery FROM nvsegment a, nvdbinfo b WHERE a.dbinfo_seq = b.dbinfo_seq AND a.segment_no = ? 
09-03 11:41:03.844 ttp-nio-18084-exec-9 ==> Parameters: 0(Integer)
09-03 11:41:03.844 ttp-nio-18084-exec-9 <==      Total: 0
09-03 11:41:03.845 ttp-nio-18084-exec-9 Semantic.selectSementicInfo
09-03 11:41:03.845 ttp-nio-18084-exec-9 ==>  Preparing: SELECT segment_no, field_seq, field_nm, field_desc, null_yn, field_key , (CASE WHEN field_key = 'K' THEN 1 WHEN field_key = 'N' THEN 2 WHEN field_key = 'E' THEN 3 WHEN field_key = 'S' THEN 4 WHEN field_key = 'A' THEN 5 WHEN field_key = 'B' THEN 6 ELSE 99 END) sort FROM nvsemantic WHERE segment_no = ? ORDER BY sort 
09-03 11:41:03.845 ttp-nio-18084-exec-9 ==> Parameters: 0(Integer)
09-03 11:41:03.846 ttp-nio-18084-exec-9 <==      Total: 0
09-03 11:41:03.846 ttp-nio-18084-exec-9 AddQuery.selectAddQuery
09-03 11:41:03.846 ttp-nio-18084-exec-9 ==>  Preparing: SELECT ecare_no, query_seq, query_type, result_id, dbinfo_seq, query, execute_type FROM nvaddquery WHERE ecare_no= ? 
09-03 11:41:03.846 ttp-nio-18084-exec-9 ==> Parameters: 17(Integer)
09-03 11:41:03.847 ttp-nio-18084-exec-9 <==      Total: 0
09-03 11:41:03.847 ttp-nio-18084-exec-9 EcareScenario.selectOmniChannelEcares
09-03 11:41:03.847 ttp-nio-18084-exec-9 ==>  Preparing: SELECT a.scenario_no, a.scenario_nm, coalesce(b.ecare_no,0) ecare_no, b.depth_no, b.channel_type, b.relation_type , (SELECT val FROM nv_cd_mst WHERE cd_cat = '200111' AND cd = b.ecare_sts AND lang = ?) ecare_sts_nm , c.segment_size as target_cnt FROM nvecarescenario a, nvecaremsg b LEFT OUTER JOIN nvsegment c ON b.segment_no = c.segment_no WHERE a.scenario_no = b.scenario_no AND a.scenario_no = ( SELECT scenario_no FROM nvecaremsg WHERE ecare_no = ? ) AND b.relation_type IN ('N','S','F','O') ORDER BY rpad( b.relation_tree , (SELECT max(depth_no) FROM nvecaremsg WHERE scenario_no = (SELECT scenario_no FROM nvecaremsg WHERE ecare_no = ?)) , 0 ), b.ecare_no 
09-03 11:41:03.847 ttp-nio-18084-exec-9 ==> Parameters: ko(String), 17(Integer), 17(Integer)
09-03 11:41:03.848 ttp-nio-18084-exec-9 <==      Total: 1
09-03 11:41:03.849 ttp-nio-18084-exec-9 ServerInfo.selectServerInfo
09-03 11:41:03.849 ttp-nio-18084-exec-9 ==>  Preparing: SELECT host_nm, port_no, driver_nm, driver_dsn, dbuser_id, dbpassword, openclick_path, survey_path, link_path, htmlmaker_path , openimage_path, duration_path, reject_path, smtp_ip, smtp_port, fula_ip, fula_port, ftp_yn, ftp_user_id, ftp_password , lastupdate_dt, editor_id, ret_domain, coalesce(retry_cnt,0) retry_cnt, b4_send_approve_yn, b4_send_verify_yn, b4_real_send_test_send_yn, ase_link_merge_param, ase_reject_merge_param, ase_open_scriptlet , groovy_link_merge_param, groovy_reject_merge_param, groovy_open_scriptlet, resend_include_returnmail_yn, resend_include_mail_key_yn, resend_error_cd, fax_resend_error_cd, sms_resend_error_cd, altalk_resend_error_cd, push_resend_error_cd , spool_preserve_period, log_preserve_period, result_file_download_yn, sucs_result_file_download_yn, kakao_template_last_sync_dtm , (SELECT mintime FROM nvdurationinfo WHERE durationinfo_cd = '01') as duration_time FROM nvserverinfo 
09-03 11:41:03.849 ttp-nio-18084-exec-9 ==> Parameters: 
09-03 11:41:03.849 ttp-nio-18084-exec-9 <==      Total: 1
09-03 11:41:03.850 ttp-nio-18084-exec-9 DbInfo.selectDbInfoList
09-03 11:41:03.850 ttp-nio-18084-exec-9 ==>  Preparing: SELECT dbinfo_seq, driver_nm, server_nm, driver_dsn, dbuser_id, dbpassword, encoding, decoding, dbkind, testquery FROM nvdbinfo 
09-03 11:41:03.850 ttp-nio-18084-exec-9 ==> Parameters: 
09-03 11:41:03.851 ttp-nio-18084-exec-9 <==      Total: 1
09-03 11:41:03.852 ttp-nio-18084-exec-9 PushServiceInfo.selectPushServiceInfo
09-03 11:41:03.852 ttp-nio-18084-exec-9 ==>  Preparing: SELECT svc_type, svc_no, push_app_id, push_msg_type, push_pop_img_use, push_img_url, push_big_img_url, push_click_link, push_pop_big_img_use, push_menu_id FROM nvpushserviceinfo WHERE svc_type = ? AND svc_no = ? 
09-03 11:41:03.852 ttp-nio-18084-exec-9 ==> Parameters: E(String), 17(Integer)
09-03 11:41:03.852 ttp-nio-18084-exec-9 <==      Total: 0
09-03 11:41:03.854 ttp-nio-18084-exec-9 CdMst.selectPushMsgTypeList
09-03 11:41:03.854 ttp-nio-18084-exec-9 ==>  Preparing: SELECT cd_cat, cd, lang, par_cd_cat, val, cd_desc, use_col, use_yn, reg_dtm, mod_dtm, cd_ord FROM nv_cd_mst WHERE par_cd_cat = 'AP0101' AND use_yn = ? ORDER BY cd 
09-03 11:41:03.854 ttp-nio-18084-exec-9 ==> Parameters: y(String)
09-03 11:41:03.854 ttp-nio-18084-exec-9 <==      Total: 0
09-03 11:41:04.374 ttp-nio-18084-exec-6 Ecare.selectEditorEcare
09-03 11:41:04.374 ttp-nio-18084-exec-6 ==>  Preparing: SELECT ecare_preface, coalesce(template_type,0) template_type, sender_nm, sender_email, receiver_nm , retmail_receiver, sender_tel, coalesce(retry_cnt,0) retry_cnt, mail_type, tmpl_ver , coalesce(preface_ver,0) preface_ver, coalesce(cover_ver,0) cover_ver, coalesce(handler_ver,0) handler_ver, coalesce(handler_seq,0) handler_seq FROM nvecaremsg WHERE ecare_no = ? 
09-03 11:41:04.374 ttp-nio-18084-exec-6 ==> Parameters: 17(Integer)
09-03 11:41:04.375 ttp-nio-18084-exec-6 <==      Total: 1
09-03 11:41:04.375 ttp-nio-18084-exec-1 PushApp.selectPushAppList
09-03 11:41:04.375 ttp-nio-18084-exec-1 ==>  Preparing: SELECT a.push_app_id, a.push_app_nm, a.use_testmode, a.use_yn, a.ins_dts, a.ins_id, a.upd_dts, a.upd_id , b.name_kor as ins_name_kor, b.name_eng as ins_name_eng, c.name_kor as upd_name_kor, c.name_eng as upd_name_eng FROM nvpushapp a LEFT OUTER JOIN nvuser b ON a.ins_id = b.user_id LEFT OUTER JOIN nvuser c ON a.upd_id = c.user_id WHERE a.use_yn = 'Y' 
09-03 11:41:04.375 ttp-nio-18084-exec-1 ==> Parameters: 
09-03 11:41:04.375 ttp-nio-18084-exec-1 <==      Total: 0
09-03 11:41:04.405 ttp-nio-18084-exec-8 Ecare.selectSubEcareList
09-03 11:41:04.405 ttp-nio-18084-exec-8 ==>  Preparing: SELECT ecare_no, scenario_no, ecare_nm, channel_type, depth_no, relation_type FROM nvecaremsg WHERE scenario_no = ? AND depth_no = ? AND relation_tree LIKE ((SELECT relation_tree FROM nvecaremsg WHERE ecare_no = ?) || '%') 
09-03 11:41:04.406 ttp-nio-18084-exec-8 ==> Parameters: 14(Integer), 2(Integer), 17(Integer)
09-03 11:41:04.407 ttp-nio-18084-exec-8 <==      Total: 0
09-03 11:41:04.407 ttp-nio-18084-exec-8 Semantic.selectEcareSemanticKey
09-03 11:41:04.407 ttp-nio-18084-exec-8 ==>  Preparing: SELECT field_key FROM nvsemantic WHERE segment_no = (SELECT segment_no FROM nvecaremsg WHERE scenario_no = ? AND depth_no = 1) AND field_key IS NOT NULL 
09-03 11:41:04.408 ttp-nio-18084-exec-8 ==> Parameters: 14(Integer)
09-03 11:41:04.408 ttp-nio-18084-exec-8 <==      Total: 0
09-03 11:41:04.445 ttp-nio-18084-exec-9 EcMsgHandler.selectEcMsgHandlerByPk
09-03 11:41:04.445 ttp-nio-18084-exec-7 Ecare.selectEditorEcare
09-03 11:41:04.445 ttp-nio-18084-exec-9 ==>  Preparing: SELECT ecare_no, type, appsource FROM nvecmsghandler WHERE ecare_no = ? 
09-03 11:41:04.446 ttp-nio-18084-exec-7 ==>  Preparing: SELECT ecare_preface, coalesce(template_type,0) template_type, sender_nm, sender_email, receiver_nm , retmail_receiver, sender_tel, coalesce(retry_cnt,0) retry_cnt, mail_type, tmpl_ver , coalesce(preface_ver,0) preface_ver, coalesce(cover_ver,0) cover_ver, coalesce(handler_ver,0) handler_ver, coalesce(handler_seq,0) handler_seq FROM nvecaremsg WHERE ecare_no = ? 
09-03 11:41:04.446 ttp-nio-18084-exec-7 ==> Parameters: 17(Integer)
09-03 11:41:04.446 ttp-nio-18084-exec-9 ==> Parameters: 17(Integer)
09-03 11:41:04.447 ttp-nio-18084-exec-9 <==      Total: 1
09-03 11:41:04.449 ttp-nio-18084-exec-7 <==      Total: 1
09-03 11:41:04.450 ttp-nio-18084-exec-7 DefaultHandler.selectHandlerUseList
09-03 11:41:04.451 ttp-nio-18084-exec-7 ==>  Preparing: SELECT seq, handle_nm, handle_desc FROM nvdefaulthandler c WHERE EXISTS ( SELECT 0 FROM nvecaremsg a, nvecarescenario b WHERE a.scenario_no = b.scenario_no AND a.channel_type = c.channel AND b.handler_type = c.handle_type AND a.ecare_no = ? AND c.service_type = (CASE WHEN a.sub_type ='N' THEN 'N' WHEN a.service_type ='S' THEN 'S' ELSE 'R' END ) AND c.handle_attr = (CASE WHEN a.mail_type ='NONE' THEN 'D' WHEN a.mail_type ='' THEN 'D' ELSE a.mail_type END ) ) ORDER BY seq 
09-03 11:41:04.451 ttp-nio-18084-exec-7 ==> Parameters: 17(Integer)
09-03 11:41:04.453 ttp-nio-18084-exec-7 <==      Total: 1
09-03 11:41:04.497 ttp-nio-18084-exec-6 EcareTemplate.selectEditorEcareTemplate
09-03 11:41:04.497 ttp-nio-18084-exec-6 ==>  Preparing: SELECT a.seg, a.template, a.kakao_buttons, CASE WHEN a.seg = ' ' THEN 0 ELSE 1 END as seg_no , CASE WHEN b.kakao_image_no IS NULL THEN '' ELSE (SELECT file_preview_path FROM nvmobilecontents WHERE conts_no = b.kakao_image_no) END as image_url , a.conts_no FROM nvecaretemplate a, nvecaremsg b WHERE a.ecare_no = b.ecare_no AND b.ecare_no = ? ORDER BY seg_no 
09-03 11:41:04.497 ttp-nio-18084-exec-6 ==> Parameters: 17(Integer)
09-03 11:41:04.498 ttp-nio-18084-exec-6 <==      Total: 1
09-03 11:41:04.499 ttp-nio-18084-exec-6 Semantic.selectSemanticListBySegmentNo
09-03 11:41:04.499 ttp-nio-18084-exec-6 ==>  Preparing: SELECT field_seq, field_nm, field_desc, coalesce(field_key,'') field_key FROM nvsemantic WHERE segment_no = ? ORDER BY field_seq 
09-03 11:41:04.499 ttp-nio-18084-exec-6 ==> Parameters: 0(Integer)
09-03 11:41:04.500 ttp-nio-18084-exec-6 <==      Total: 0
09-03 11:41:51.175 ttp-nio-18084-exec-1 EcareScenario.getEcareListTotalCount
09-03 11:41:51.175 ttp-nio-18084-exec-1 ==>  Preparing: SELECT count(*) FROM nvecarescenario a, nvecaremsgtag b, nvecaremsg c WHERE a.tag_no = b.tag_no AND a.scenario_no = c.scenario_no 
09-03 11:41:51.175 ttp-nio-18084-exec-1 ==> Parameters: 
09-03 11:41:51.177 ttp-nio-18084-exec-1 <==      Total: 1
09-03 11:41:51.185 ttp-nio-18084-exec-1 EcareScenario.getEcareList
09-03 11:41:51.185 ttp-nio-18084-exec-1 ==>  Preparing: SELECT coalesce(x.scenario_no,0) scenario_no, user_id, grp_cd, scenario_nm, scenario_type , create_dt, decode(l_rank, 1, chrg_nm, '') chrg_nm, decode(l_rank, 1, brc_nm, '') brc_nm, coalesce(x.ecare_no,0) ecare_no, channel_type , ecare_sts, relation_type, coalesce(depth_no,0) depth_no, ecare_level, service_type , sub_type, segment_no, relation_tree, segment_size target_cnt, invoke_tm, sendstart_dt , (SELECT name_kor FROM nvuser WHERE user_id = x.user_id) name_kor , (SELECT grp_nm FROM nvusergrp WHERE grp_cd = x.grp_cd) grp_nm , (SELECT val FROM nv_cd_mst WHERE cd_cat = '200111' AND cd = x.ecare_sts AND lang = ?) ecare_sts_nm , (SELECT val FROM nv_cd_mst WHERE cd_cat = '100221' AND cd = x.relation_type AND lang = ?) relation_type_nm , (SELECT val FROM nv_cd_mst WHERE cd_cat = '200131' AND cd = (x.service_type || x.sub_type) AND lang = ?) service_type_nm , (SELECT val FROM nv_cd_mst WHERE cd_cat = '200141' AND cd = x.sub_type AND lang = ?) sub_type_nm FROM ( SELECT row_number() OVER(PARTITION BY a.scenario_no ORDER BY a.scenario_no DESC, c.relation_tree, c.ecare_no DESC) l_rank , row_number() OVER(ORDER BY a.scenario_no DESC, c.relation_tree, c.ecare_no) rnum , a.scenario_no, a.user_id, a.grp_cd, a.scenario_nm, a.scenario_type, a.create_dt, a.chrg_nm, a.brc_nm, c.ecare_no, c.channel_type , c.ecare_sts, c.relation_type, c.depth_no, c.ecare_level, c.service_type, c.sub_type, c.segment_no, c.relation_tree , d.segment_size, e.invoke_tm, e.sendstart_dt FROM nvecarescenario a, nvecaremsgtag b, nvecaremsg c LEFT OUTER JOIN nvsegment d ON c.segment_no = d.segment_no LEFT OUTER JOIN nvecmschedule e ON c.ecmschedule_no = e.ecmschedule_no WHERE a.tag_no = b.tag_no AND a.scenario_no = c.scenario_no ORDER BY a.scenario_no DESC, c.relation_tree ) x WHERE rnum >= ((? - 1) * ? + 1) AND rnum <= ? * ? ORDER BY scenario_no DESC, relation_tree, ecare_no 
09-03 11:41:51.186 ttp-nio-18084-exec-1 ==> Parameters: ko(String), ko(String), ko(String), ko(String), 1(Integer), 10(Integer), 1(Integer), 10(Integer)
09-03 11:41:51.190 ttp-nio-18084-exec-1 <==      Total: 10
09-03 11:41:51.191 ttp-nio-18084-exec-1 CdMst.getCdMstList
09-03 11:41:51.191 ttp-nio-18084-exec-1 ==>  Preparing: SELECT cd_cat, cd, lang, par_cd_cat, val, cd_desc, use_col, use_yn, reg_dtm, mod_dtm, cd_ord FROM nv_cd_mst WHERE cd_cat = ? AND lang = ? 
09-03 11:41:51.191 ttp-nio-18084-exec-1 ==> Parameters: 200111(String), ko(String)
09-03 11:41:51.192 ttp-nio-18084-exec-1 <==      Total: 5
09-03 11:41:51.192 ttp-nio-18084-exec-1 CdMst.getCdMstList
09-03 11:41:51.192 ttp-nio-18084-exec-1 ==>  Preparing: SELECT cd_cat, cd, lang, par_cd_cat, val, cd_desc, use_col, use_yn, reg_dtm, mod_dtm, cd_ord FROM nv_cd_mst WHERE cd_cat = ? AND lang = ? 
09-03 11:41:51.192 ttp-nio-18084-exec-1 ==> Parameters: 200131(String), ko(String)
09-03 11:41:51.193 ttp-nio-18084-exec-1 <==      Total: 3
09-03 11:41:53.016 ttp-nio-18084-exec-8 Ecare.getEcareChannelInfo
09-03 11:41:53.016 ttp-nio-18084-exec-8 ==>  Preparing: SELECT (CASE channel_type WHEN 'M' THEN 4 WHEN 'S' THEN 3 WHEN 'T' THEN 2 WHEN 'F' THEN 1 END) as seq, ecare_no, channel_type, depth_no FROM nvecaremsg WHERE scenario_no = ? ORDER BY seq DESC, depth_no 
09-03 11:41:53.017 ttp-nio-18084-exec-8 ==> Parameters: 16(Integer)
09-03 11:41:53.018 ttp-nio-18084-exec-8 <==      Total: 1
09-03 11:41:53.019 ttp-nio-18084-exec-8 EcareScenario.selectEcareScenarioDetailInfo
09-03 11:41:53.019 ttp-nio-18084-exec-8 ==>  Preparing: SELECT a.scenario_no, a.scenario_nm, a.scenario_desc, a.scenario_type, a.finish_yn, a.finish_dt, coalesce(a.tag_no,0) tag_no, a.handler_type, b.name_kor, c.tag_nm , d.ecare_no, d.user_id, d.grp_cd, d.segment_no, d.ecare_nm, d.ecare_preface, d.ecare_sts, d.create_dt, d.create_tm, d.lastupdate_dt , d.lastupdate_tm, d.campaign_type, d.template_type, coalesce(d.ecmschedule_no,0) ecmschedule_no, d.sender_nm, d.sender_email, d.sending_mode, coalesce(d.retry_cnt,1) retry_cnt, d.receiver_nm, d.sender_tel , d.retmail_receiver, d.ecare_class, d.relation_type, d.relation_tree, d.channel_type, d.service_type, d.ecare_level, d.sub_type, d.depth_no, d.verify_b4_send , d.template_sender_key, d.kakao_sender_key, d.kakao_tmpl_cd, coalesce(d.kakao_image_no,0) kakao_image_no, d.failback_send_yn, d.failback_subject, coalesce(d.handler_seq,0) handler_seq , coalesce(e.term_type,'1') term_type, f.segment_nm, f.segment_size, g.sender_nm as env_sender_nm, g.sender_email as env_sender_email , g.receiver_nm as env_receiver_nm, g.sender_tel as env_sender_tel, g.retmail_receiver as env_retmail_receiver, g.sender_fax as env_sender_fax, g.receiver_fax as env_receiver_fax , (SELECT val FROM nv_cd_mst WHERE cd_cat = '200111' AND cd = d.ecare_sts AND lang = ?) as ecare_sts_nm , a.chrg_nm, a.brc_nm , d.slot1_field, d.slot2_field, d.slot3_field, d.slot4_field, d.slot5_field , d.slot6_field, d.slot7_field, d.slot8_field, d.slot9_field, d.slot10_field , d.deploy_type , d.open_type, d.mail_type, d.req_dept_id FROM nvecarescenario a, nvuser b, nvecaremsgtag c, nvecaremsg d LEFT OUTER JOIN nvecaretraceinfo e ON d.ecare_no = e.ecare_no LEFT OUTER JOIN nvsegment f ON d.segment_no = f.segment_no LEFT OUTER JOIN nvusermailinfo g ON d.user_id = g.user_id WHERE a.grp_cd = b.grp_cd AND a.user_id = b.user_id AND a.tag_no = c.tag_no AND a.scenario_no = d.scenario_no AND a.scenario_no = ? AND d.ecare_no = ? 
09-03 11:41:53.019 ttp-nio-18084-exec-8 ==> Parameters: ko(String), 16(Integer), 21(Integer)
09-03 11:41:53.020 ttp-nio-18084-exec-8 <==      Total: 1
09-03 11:41:53.021 ttp-nio-18084-exec-8 Ecare.updateEcare2StepInfo
09-03 11:41:53.021 ttp-nio-18084-exec-8 ==>  Preparing: UPDATE nvecaremsg SET lastupdate_dt = to_char(sysdate, 'yyyyMMdd') WHERE ecare_no = ? 
09-03 11:41:53.021 ttp-nio-18084-exec-8 ==> Parameters: 21(Integer)
09-03 11:41:53.022 ttp-nio-18084-exec-8 <==    Updates: 1
09-03 11:41:53.023 ttp-nio-18084-exec-8 EcmSchedule.selectEcmScheduleByPk
09-03 11:41:53.023 ttp-nio-18084-exec-8 ==>  Preparing: SELECT coalesce(ecmschedule_no,0) ecmschedule_no, ecmschedule_nm, cycle_cd, sendstart_dt, sendend_dt, invoke_tm, invoke_every_min , coalesce(day,0) as day, coalesce(sche_weeknumber,0) sche_weeknumber, weekday, start_tm, end_tm, term_min FROM nvecmschedule WHERE ecmschedule_no = ? 
09-03 11:41:53.023 ttp-nio-18084-exec-8 ==> Parameters: 20(Integer)
09-03 11:41:53.024 ttp-nio-18084-exec-8 <==      Total: 1
09-03 11:41:53.024 ttp-nio-18084-exec-8 CycleItem.selectCycleItemInfo
09-03 11:41:53.024 ttp-nio-18084-exec-8 ==>  Preparing: SELECT cycleitem, check_yn FROM nvcycleitem WHERE ecmschedule_no = ? 
09-03 11:41:53.024 ttp-nio-18084-exec-8 ==> Parameters: 20(Integer)
09-03 11:41:53.024 ttp-nio-18084-exec-8 <==      Total: 0
09-03 11:41:53.025 ttp-nio-18084-exec-8 Segment.selectTargetQueryInfo
09-03 11:41:53.025 ttp-nio-18084-exec-8 ==>  Preparing: SELECT a.dbinfo_seq, coalesce(a.sqlhead,' ') sqlhead, coalesce(a.sqlbody,' ') sqlbody, coalesce(a.sqltail,' ') sqltail, a.testquery , b.dbkind, b.driver_nm, b.driver_dsn, b.dbuser_id, b.dbpassword, b.encoding, b.decoding, a.updatequery FROM nvsegment a, nvdbinfo b WHERE a.dbinfo_seq = b.dbinfo_seq AND a.segment_no = ? 
09-03 11:41:53.025 ttp-nio-18084-exec-8 ==> Parameters: 0(Integer)
09-03 11:41:53.025 ttp-nio-18084-exec-8 <==      Total: 0
09-03 11:41:53.026 ttp-nio-18084-exec-8 Semantic.selectSementicInfo
09-03 11:41:53.026 ttp-nio-18084-exec-8 ==>  Preparing: SELECT segment_no, field_seq, field_nm, field_desc, null_yn, field_key , (CASE WHEN field_key = 'K' THEN 1 WHEN field_key = 'N' THEN 2 WHEN field_key = 'E' THEN 3 WHEN field_key = 'S' THEN 4 WHEN field_key = 'A' THEN 5 WHEN field_key = 'B' THEN 6 ELSE 99 END) sort FROM nvsemantic WHERE segment_no = ? ORDER BY sort 
09-03 11:41:53.026 ttp-nio-18084-exec-8 ==> Parameters: 0(Integer)
09-03 11:41:53.026 ttp-nio-18084-exec-8 <==      Total: 0
09-03 11:41:53.027 ttp-nio-18084-exec-8 AddQuery.selectAddQuery
09-03 11:41:53.027 ttp-nio-18084-exec-8 ==>  Preparing: SELECT ecare_no, query_seq, query_type, result_id, dbinfo_seq, query, execute_type FROM nvaddquery WHERE ecare_no= ? 
09-03 11:41:53.027 ttp-nio-18084-exec-8 ==> Parameters: 21(Integer)
09-03 11:41:53.028 ttp-nio-18084-exec-8 <==      Total: 0
09-03 11:41:53.028 ttp-nio-18084-exec-8 EcareScenario.selectOmniChannelEcares
09-03 11:41:53.028 ttp-nio-18084-exec-8 ==>  Preparing: SELECT a.scenario_no, a.scenario_nm, coalesce(b.ecare_no,0) ecare_no, b.depth_no, b.channel_type, b.relation_type , (SELECT val FROM nv_cd_mst WHERE cd_cat = '200111' AND cd = b.ecare_sts AND lang = ?) ecare_sts_nm , c.segment_size as target_cnt FROM nvecarescenario a, nvecaremsg b LEFT OUTER JOIN nvsegment c ON b.segment_no = c.segment_no WHERE a.scenario_no = b.scenario_no AND a.scenario_no = ( SELECT scenario_no FROM nvecaremsg WHERE ecare_no = ? ) AND b.relation_type IN ('N','S','F','O') ORDER BY rpad( b.relation_tree , (SELECT max(depth_no) FROM nvecaremsg WHERE scenario_no = (SELECT scenario_no FROM nvecaremsg WHERE ecare_no = ?)) , 0 ), b.ecare_no 
09-03 11:41:53.028 ttp-nio-18084-exec-8 ==> Parameters: ko(String), 21(Integer), 21(Integer)
09-03 11:41:53.029 ttp-nio-18084-exec-8 <==      Total: 1
09-03 11:41:53.030 ttp-nio-18084-exec-8 ServerInfo.selectServerInfo
09-03 11:41:53.030 ttp-nio-18084-exec-8 ==>  Preparing: SELECT host_nm, port_no, driver_nm, driver_dsn, dbuser_id, dbpassword, openclick_path, survey_path, link_path, htmlmaker_path , openimage_path, duration_path, reject_path, smtp_ip, smtp_port, fula_ip, fula_port, ftp_yn, ftp_user_id, ftp_password , lastupdate_dt, editor_id, ret_domain, coalesce(retry_cnt,0) retry_cnt, b4_send_approve_yn, b4_send_verify_yn, b4_real_send_test_send_yn, ase_link_merge_param, ase_reject_merge_param, ase_open_scriptlet , groovy_link_merge_param, groovy_reject_merge_param, groovy_open_scriptlet, resend_include_returnmail_yn, resend_include_mail_key_yn, resend_error_cd, fax_resend_error_cd, sms_resend_error_cd, altalk_resend_error_cd, push_resend_error_cd , spool_preserve_period, log_preserve_period, result_file_download_yn, sucs_result_file_download_yn, kakao_template_last_sync_dtm , (SELECT mintime FROM nvdurationinfo WHERE durationinfo_cd = '01') as duration_time FROM nvserverinfo 
09-03 11:41:53.030 ttp-nio-18084-exec-8 ==> Parameters: 
09-03 11:41:53.031 ttp-nio-18084-exec-8 <==      Total: 1
09-03 11:41:53.032 ttp-nio-18084-exec-8 DbInfo.selectDbInfoList
09-03 11:41:53.032 ttp-nio-18084-exec-8 ==>  Preparing: SELECT dbinfo_seq, driver_nm, server_nm, driver_dsn, dbuser_id, dbpassword, encoding, decoding, dbkind, testquery FROM nvdbinfo 
09-03 11:41:53.032 ttp-nio-18084-exec-8 ==> Parameters: 
09-03 11:41:53.032 ttp-nio-18084-exec-8 <==      Total: 1
09-03 11:41:53.461 ttp-nio-18084-exec-9 MobileContents.selectEditorMmsContentsListMax
09-03 11:41:53.461 ttp-nio-18084-exec-7 Ecare.selectEditorEcare
09-03 11:41:53.461 ttp-nio-18084-exec-7 ==>  Preparing: SELECT ecare_preface, coalesce(template_type,0) template_type, sender_nm, sender_email, receiver_nm , retmail_receiver, sender_tel, coalesce(retry_cnt,0) retry_cnt, mail_type, tmpl_ver , coalesce(preface_ver,0) preface_ver, coalesce(cover_ver,0) cover_ver, coalesce(handler_ver,0) handler_ver, coalesce(handler_seq,0) handler_seq FROM nvecaremsg WHERE ecare_no = ? 
09-03 11:41:53.461 ttp-nio-18084-exec-9 ==>  Preparing: SELECT count(*) FROM nvmobilecontents WHERE file_type IN ('T','D') 
09-03 11:41:53.461 ttp-nio-18084-exec-7 ==> Parameters: 21(Integer)
09-03 11:41:53.461 ttp-nio-18084-exec-9 ==> Parameters: 
09-03 11:41:53.462 ttp-nio-18084-exec-9 <==      Total: 1
09-03 11:41:53.462 ttp-nio-18084-exec-7 <==      Total: 1
09-03 11:41:53.463 ttp-nio-18084-exec-9 MobileContents.selectEditorMmsContentsList
09-03 11:41:53.463 ttp-nio-18084-exec-9 ==>  Preparing: SELECT user_id, conts_no, conts_nm, file_path, file_name, file_type, conts_txt, file_preview_path, file_preview_name, file_size , to_char(to_date(create_dt,'YYYYMMDD'),'YYYY-MM-DD') as create_dt, to_char(to_date(create_tm,'HH24MISS'),'HH:MI:SS') as create_tm FROM ( SELECT row_number() OVER (ORDER BY conts_no DESC) as rnum , user_id, conts_no, conts_nm, file_path, file_name, file_type, conts_txt, file_preview_path, file_preview_name, file_size , create_dt, create_tm FROM nvmobilecontents WHERE file_type IN ('T','D') ORDER BY conts_no DESC ) a WHERE rnum BETWEEN ? AND ? 
09-03 11:41:53.463 ttp-nio-18084-exec-9 ==> Parameters: 1(Integer), 6(Integer)
09-03 11:41:53.464 ttp-nio-18084-exec-9 <==      Total: 0
09-03 11:41:53.499 ttp-nio-18084-exec-6 Ecare.selectSubEcareList
09-03 11:41:53.499 ttp-nio-18084-exec-6 ==>  Preparing: SELECT ecare_no, scenario_no, ecare_nm, channel_type, depth_no, relation_type FROM nvecaremsg WHERE scenario_no = ? AND depth_no = ? AND relation_tree LIKE ((SELECT relation_tree FROM nvecaremsg WHERE ecare_no = ?) || '%') 
09-03 11:41:53.499 ttp-nio-18084-exec-6 ==> Parameters: 16(Integer), 2(Integer), 21(Integer)
09-03 11:41:53.500 ttp-nio-18084-exec-6 <==      Total: 0
09-03 11:41:53.501 ttp-nio-18084-exec-6 Semantic.selectEcareSemanticKey
09-03 11:41:53.501 ttp-nio-18084-exec-6 ==>  Preparing: SELECT field_key FROM nvsemantic WHERE segment_no = (SELECT segment_no FROM nvecaremsg WHERE scenario_no = ? AND depth_no = 1) AND field_key IS NOT NULL 
09-03 11:41:53.501 ttp-nio-18084-exec-6 ==> Parameters: 16(Integer)
09-03 11:41:53.502 ttp-nio-18084-exec-6 <==      Total: 0
09-03 11:41:53.572 ttp-nio-18084-exec-1 Ecare.selectEditorEcare
09-03 11:41:53.572 ttp-nio-18084-exec-1 ==>  Preparing: SELECT ecare_preface, coalesce(template_type,0) template_type, sender_nm, sender_email, receiver_nm , retmail_receiver, sender_tel, coalesce(retry_cnt,0) retry_cnt, mail_type, tmpl_ver , coalesce(preface_ver,0) preface_ver, coalesce(cover_ver,0) cover_ver, coalesce(handler_ver,0) handler_ver, coalesce(handler_seq,0) handler_seq FROM nvecaremsg WHERE ecare_no = ? 
09-03 11:41:53.573 ttp-nio-18084-exec-1 ==> Parameters: 21(Integer)
09-03 11:41:53.573 ttp-nio-18084-exec-8 EcMsgHandler.selectEcMsgHandlerByPk
09-03 11:41:53.573 ttp-nio-18084-exec-8 ==>  Preparing: SELECT ecare_no, type, appsource FROM nvecmsghandler WHERE ecare_no = ? 
09-03 11:41:53.573 ttp-nio-18084-exec-8 ==> Parameters: 21(Integer)
09-03 11:41:53.574 ttp-nio-18084-exec-1 <==      Total: 1
09-03 11:41:53.574 ttp-nio-18084-exec-1 DefaultHandler.selectHandlerUseList
09-03 11:41:53.574 ttp-nio-18084-exec-1 ==>  Preparing: SELECT seq, handle_nm, handle_desc FROM nvdefaulthandler c WHERE EXISTS ( SELECT 0 FROM nvecaremsg a, nvecarescenario b WHERE a.scenario_no = b.scenario_no AND a.channel_type = c.channel AND b.handler_type = c.handle_type AND a.ecare_no = ? AND c.service_type = (CASE WHEN a.sub_type ='N' THEN 'N' WHEN a.service_type ='S' THEN 'S' ELSE 'R' END ) AND c.handle_attr = (CASE WHEN a.mail_type ='NONE' THEN 'D' WHEN a.mail_type ='' THEN 'D' ELSE a.mail_type END ) ) ORDER BY seq 
09-03 11:41:53.574 ttp-nio-18084-exec-8 <==      Total: 1
09-03 11:41:53.574 ttp-nio-18084-exec-1 ==> Parameters: 21(Integer)
09-03 11:41:53.576 ttp-nio-18084-exec-1 <==      Total: 1
09-03 11:41:53.623 ttp-nio-18084-exec-7 EcareTemplate.selectEditorEcareTemplate
09-03 11:41:53.624 ttp-nio-18084-exec-7 ==>  Preparing: SELECT a.seg, a.template, a.kakao_buttons, CASE WHEN a.seg = ' ' THEN 0 ELSE 1 END as seg_no , CASE WHEN b.kakao_image_no IS NULL THEN '' ELSE (SELECT file_preview_path FROM nvmobilecontents WHERE conts_no = b.kakao_image_no) END as image_url , a.conts_no FROM nvecaretemplate a, nvecaremsg b WHERE a.ecare_no = b.ecare_no AND b.ecare_no = ? ORDER BY seg_no 
09-03 11:41:53.624 ttp-nio-18084-exec-7 ==> Parameters: 21(Integer)
09-03 11:41:53.624 ttp-nio-18084-exec-7 <==      Total: 1
09-03 11:41:53.625 ttp-nio-18084-exec-7 Semantic.selectSemanticListBySegmentNo
09-03 11:41:53.625 ttp-nio-18084-exec-7 ==>  Preparing: SELECT field_seq, field_nm, field_desc, coalesce(field_key,'') field_key FROM nvsemantic WHERE segment_no = ? ORDER BY field_seq 
09-03 11:41:53.625 ttp-nio-18084-exec-7 ==> Parameters: 0(Integer)
09-03 11:41:53.625 ttp-nio-18084-exec-7 <==      Total: 0
09-03 11:41:56.960 ttp-nio-18084-exec-9 EcareScenario.getEcareListTotalCount
09-03 11:41:56.960 ttp-nio-18084-exec-9 ==>  Preparing: SELECT count(*) FROM nvecarescenario a, nvecaremsgtag b, nvecaremsg c WHERE a.tag_no = b.tag_no AND a.scenario_no = c.scenario_no 
09-03 11:41:56.960 ttp-nio-18084-exec-9 ==> Parameters: 
09-03 11:41:56.962 ttp-nio-18084-exec-9 <==      Total: 1
09-03 11:41:56.962 ttp-nio-18084-exec-9 EcareScenario.getEcareList
09-03 11:41:56.962 ttp-nio-18084-exec-9 ==>  Preparing: SELECT coalesce(x.scenario_no,0) scenario_no, user_id, grp_cd, scenario_nm, scenario_type , create_dt, decode(l_rank, 1, chrg_nm, '') chrg_nm, decode(l_rank, 1, brc_nm, '') brc_nm, coalesce(x.ecare_no,0) ecare_no, channel_type , ecare_sts, relation_type, coalesce(depth_no,0) depth_no, ecare_level, service_type , sub_type, segment_no, relation_tree, segment_size target_cnt, invoke_tm, sendstart_dt , (SELECT name_kor FROM nvuser WHERE user_id = x.user_id) name_kor , (SELECT grp_nm FROM nvusergrp WHERE grp_cd = x.grp_cd) grp_nm , (SELECT val FROM nv_cd_mst WHERE cd_cat = '200111' AND cd = x.ecare_sts AND lang = ?) ecare_sts_nm , (SELECT val FROM nv_cd_mst WHERE cd_cat = '100221' AND cd = x.relation_type AND lang = ?) relation_type_nm , (SELECT val FROM nv_cd_mst WHERE cd_cat = '200131' AND cd = (x.service_type || x.sub_type) AND lang = ?) service_type_nm , (SELECT val FROM nv_cd_mst WHERE cd_cat = '200141' AND cd = x.sub_type AND lang = ?) sub_type_nm FROM ( SELECT row_number() OVER(PARTITION BY a.scenario_no ORDER BY a.scenario_no DESC, c.relation_tree, c.ecare_no DESC) l_rank , row_number() OVER(ORDER BY a.scenario_no DESC, c.relation_tree, c.ecare_no) rnum , a.scenario_no, a.user_id, a.grp_cd, a.scenario_nm, a.scenario_type, a.create_dt, a.chrg_nm, a.brc_nm, c.ecare_no, c.channel_type , c.ecare_sts, c.relation_type, c.depth_no, c.ecare_level, c.service_type, c.sub_type, c.segment_no, c.relation_tree , d.segment_size, e.invoke_tm, e.sendstart_dt FROM nvecarescenario a, nvecaremsgtag b, nvecaremsg c LEFT OUTER JOIN nvsegment d ON c.segment_no = d.segment_no LEFT OUTER JOIN nvecmschedule e ON c.ecmschedule_no = e.ecmschedule_no WHERE a.tag_no = b.tag_no AND a.scenario_no = c.scenario_no ORDER BY a.scenario_no DESC, c.relation_tree ) x WHERE rnum >= ((? - 1) * ? + 1) AND rnum <= ? * ? ORDER BY scenario_no DESC, relation_tree, ecare_no 
09-03 11:41:56.963 ttp-nio-18084-exec-9 ==> Parameters: ko(String), ko(String), ko(String), ko(String), 1(Integer), 10(Integer), 1(Integer), 10(Integer)
09-03 11:41:56.974 ttp-nio-18084-exec-9 <==      Total: 10
09-03 11:41:56.974 ttp-nio-18084-exec-9 CdMst.getCdMstList
09-03 11:41:56.974 ttp-nio-18084-exec-9 ==>  Preparing: SELECT cd_cat, cd, lang, par_cd_cat, val, cd_desc, use_col, use_yn, reg_dtm, mod_dtm, cd_ord FROM nv_cd_mst WHERE cd_cat = ? AND lang = ? 
09-03 11:41:56.974 ttp-nio-18084-exec-9 ==> Parameters: 200111(String), ko(String)
09-03 11:41:56.975 ttp-nio-18084-exec-9 <==      Total: 5
09-03 11:41:56.975 ttp-nio-18084-exec-9 CdMst.getCdMstList
09-03 11:41:56.975 ttp-nio-18084-exec-9 ==>  Preparing: SELECT cd_cat, cd, lang, par_cd_cat, val, cd_desc, use_col, use_yn, reg_dtm, mod_dtm, cd_ord FROM nv_cd_mst WHERE cd_cat = ? AND lang = ? 
09-03 11:41:56.975 ttp-nio-18084-exec-9 ==> Parameters: 200131(String), ko(String)
09-03 11:41:56.976 ttp-nio-18084-exec-9 <==      Total: 3
09-03 11:41:58.425 ttp-nio-18084-exec-6 Ecare.getEcareChannelInfo
09-03 11:41:58.425 ttp-nio-18084-exec-6 ==>  Preparing: SELECT (CASE channel_type WHEN 'M' THEN 4 WHEN 'S' THEN 3 WHEN 'T' THEN 2 WHEN 'F' THEN 1 END) as seq, ecare_no, channel_type, depth_no FROM nvecaremsg WHERE scenario_no = ? ORDER BY seq DESC, depth_no 
09-03 11:41:58.426 ttp-nio-18084-exec-6 ==> Parameters: 11(Integer)
09-03 11:41:58.426 ttp-nio-18084-exec-6 <==      Total: 1
09-03 11:41:58.427 ttp-nio-18084-exec-6 EcareScenario.selectEcareScenarioDetailInfo
09-03 11:41:58.428 ttp-nio-18084-exec-6 ==>  Preparing: SELECT a.scenario_no, a.scenario_nm, a.scenario_desc, a.scenario_type, a.finish_yn, a.finish_dt, coalesce(a.tag_no,0) tag_no, a.handler_type, b.name_kor, c.tag_nm , d.ecare_no, d.user_id, d.grp_cd, d.segment_no, d.ecare_nm, d.ecare_preface, d.ecare_sts, d.create_dt, d.create_tm, d.lastupdate_dt , d.lastupdate_tm, d.campaign_type, d.template_type, coalesce(d.ecmschedule_no,0) ecmschedule_no, d.sender_nm, d.sender_email, d.sending_mode, coalesce(d.retry_cnt,1) retry_cnt, d.receiver_nm, d.sender_tel , d.retmail_receiver, d.ecare_class, d.relation_type, d.relation_tree, d.channel_type, d.service_type, d.ecare_level, d.sub_type, d.depth_no, d.verify_b4_send , d.template_sender_key, d.kakao_sender_key, d.kakao_tmpl_cd, coalesce(d.kakao_image_no,0) kakao_image_no, d.failback_send_yn, d.failback_subject, coalesce(d.handler_seq,0) handler_seq , coalesce(e.term_type,'1') term_type, f.segment_nm, f.segment_size, g.sender_nm as env_sender_nm, g.sender_email as env_sender_email , g.receiver_nm as env_receiver_nm, g.sender_tel as env_sender_tel, g.retmail_receiver as env_retmail_receiver, g.sender_fax as env_sender_fax, g.receiver_fax as env_receiver_fax , (SELECT val FROM nv_cd_mst WHERE cd_cat = '200111' AND cd = d.ecare_sts AND lang = ?) as ecare_sts_nm , a.chrg_nm, a.brc_nm , d.slot1_field, d.slot2_field, d.slot3_field, d.slot4_field, d.slot5_field , d.slot6_field, d.slot7_field, d.slot8_field, d.slot9_field, d.slot10_field , d.deploy_type , d.open_type, d.mail_type, d.req_dept_id FROM nvecarescenario a, nvuser b, nvecaremsgtag c, nvecaremsg d LEFT OUTER JOIN nvecaretraceinfo e ON d.ecare_no = e.ecare_no LEFT OUTER JOIN nvsegment f ON d.segment_no = f.segment_no LEFT OUTER JOIN nvusermailinfo g ON d.user_id = g.user_id WHERE a.grp_cd = b.grp_cd AND a.user_id = b.user_id AND a.tag_no = c.tag_no AND a.scenario_no = d.scenario_no AND a.scenario_no = ? AND d.ecare_no = ? 
09-03 11:41:58.428 ttp-nio-18084-exec-6 ==> Parameters: ko(String), 11(Integer), 14(Integer)
09-03 11:41:58.429 ttp-nio-18084-exec-6 <==      Total: 1
09-03 11:41:58.429 ttp-nio-18084-exec-6 Ecare.updateEcare2StepInfo
09-03 11:41:58.429 ttp-nio-18084-exec-6 ==>  Preparing: UPDATE nvecaremsg SET lastupdate_dt = to_char(sysdate, 'yyyyMMdd') WHERE ecare_no = ? 
09-03 11:41:58.429 ttp-nio-18084-exec-6 ==> Parameters: 14(Integer)
09-03 11:41:58.431 ttp-nio-18084-exec-6 <==    Updates: 1
09-03 11:41:58.431 ttp-nio-18084-exec-6 EcmSchedule.selectEcmScheduleByPk
09-03 11:41:58.432 ttp-nio-18084-exec-6 ==>  Preparing: SELECT coalesce(ecmschedule_no,0) ecmschedule_no, ecmschedule_nm, cycle_cd, sendstart_dt, sendend_dt, invoke_tm, invoke_every_min , coalesce(day,0) as day, coalesce(sche_weeknumber,0) sche_weeknumber, weekday, start_tm, end_tm, term_min FROM nvecmschedule WHERE ecmschedule_no = ? 
09-03 11:41:58.432 ttp-nio-18084-exec-6 ==> Parameters: 11(Integer)
09-03 11:41:58.432 ttp-nio-18084-exec-6 <==      Total: 1
09-03 11:41:58.433 ttp-nio-18084-exec-6 CycleItem.selectCycleItemInfo
09-03 11:41:58.433 ttp-nio-18084-exec-6 ==>  Preparing: SELECT cycleitem, check_yn FROM nvcycleitem WHERE ecmschedule_no = ? 
09-03 11:41:58.433 ttp-nio-18084-exec-6 ==> Parameters: 11(Integer)
09-03 11:41:58.434 ttp-nio-18084-exec-6 <==      Total: 0
09-03 11:41:58.435 ttp-nio-18084-exec-6 EcareMultipartFile.selectEditorEcareMultipartFile
09-03 11:41:58.435 ttp-nio-18084-exec-6 ==>  Preparing: SELECT file_alias, file_path, file_size, file_name, file_type, secu_field, enc_yn FROM nvecaremultipartfile WHERE ecare_no = ? 
09-03 11:41:58.435 ttp-nio-18084-exec-6 ==> Parameters: 14(Integer)
09-03 11:41:58.435 ttp-nio-18084-exec-6 <==      Total: 0
09-03 11:41:58.436 ttp-nio-18084-exec-6 AddQuery.selectAddQuery
09-03 11:41:58.436 ttp-nio-18084-exec-6 ==>  Preparing: SELECT ecare_no, query_seq, query_type, result_id, dbinfo_seq, query, execute_type FROM nvaddquery WHERE ecare_no= ? 
09-03 11:41:58.436 ttp-nio-18084-exec-6 ==> Parameters: 14(Integer)
09-03 11:41:58.436 ttp-nio-18084-exec-6 <==      Total: 2
09-03 11:41:58.437 ttp-nio-18084-exec-6 EcareScenario.selectOmniChannelEcares
09-03 11:41:58.437 ttp-nio-18084-exec-6 ==>  Preparing: SELECT a.scenario_no, a.scenario_nm, coalesce(b.ecare_no,0) ecare_no, b.depth_no, b.channel_type, b.relation_type , (SELECT val FROM nv_cd_mst WHERE cd_cat = '200111' AND cd = b.ecare_sts AND lang = ?) ecare_sts_nm , c.segment_size as target_cnt FROM nvecarescenario a, nvecaremsg b LEFT OUTER JOIN nvsegment c ON b.segment_no = c.segment_no WHERE a.scenario_no = b.scenario_no AND a.scenario_no = ( SELECT scenario_no FROM nvecaremsg WHERE ecare_no = ? ) AND b.relation_type IN ('N','S','F','O') ORDER BY rpad( b.relation_tree , (SELECT max(depth_no) FROM nvecaremsg WHERE scenario_no = (SELECT scenario_no FROM nvecaremsg WHERE ecare_no = ?)) , 0 ), b.ecare_no 
09-03 11:41:58.437 ttp-nio-18084-exec-6 ==> Parameters: ko(String), 14(Integer), 14(Integer)
09-03 11:41:58.438 ttp-nio-18084-exec-6 <==      Total: 1
09-03 11:41:58.438 ttp-nio-18084-exec-6 ServerInfo.selectServerInfo
09-03 11:41:58.438 ttp-nio-18084-exec-6 ==>  Preparing: SELECT host_nm, port_no, driver_nm, driver_dsn, dbuser_id, dbpassword, openclick_path, survey_path, link_path, htmlmaker_path , openimage_path, duration_path, reject_path, smtp_ip, smtp_port, fula_ip, fula_port, ftp_yn, ftp_user_id, ftp_password , lastupdate_dt, editor_id, ret_domain, coalesce(retry_cnt,0) retry_cnt, b4_send_approve_yn, b4_send_verify_yn, b4_real_send_test_send_yn, ase_link_merge_param, ase_reject_merge_param, ase_open_scriptlet , groovy_link_merge_param, groovy_reject_merge_param, groovy_open_scriptlet, resend_include_returnmail_yn, resend_include_mail_key_yn, resend_error_cd, fax_resend_error_cd, sms_resend_error_cd, altalk_resend_error_cd, push_resend_error_cd , spool_preserve_period, log_preserve_period, result_file_download_yn, sucs_result_file_download_yn, kakao_template_last_sync_dtm , (SELECT mintime FROM nvdurationinfo WHERE durationinfo_cd = '01') as duration_time FROM nvserverinfo 
09-03 11:41:58.439 ttp-nio-18084-exec-6 ==> Parameters: 
09-03 11:41:58.439 ttp-nio-18084-exec-6 <==      Total: 1
09-03 11:41:58.440 ttp-nio-18084-exec-6 DbInfo.selectDbInfoList
09-03 11:41:58.440 ttp-nio-18084-exec-6 ==>  Preparing: SELECT dbinfo_seq, driver_nm, server_nm, driver_dsn, dbuser_id, dbpassword, encoding, decoding, dbkind, testquery FROM nvdbinfo 
09-03 11:41:58.440 ttp-nio-18084-exec-6 ==> Parameters: 
09-03 11:41:58.440 ttp-nio-18084-exec-6 <==      Total: 1
09-03 11:41:58.860 ttp-nio-18084-exec-7 Ecare.selectEditorEcare
09-03 11:41:58.860 ttp-nio-18084-exec-7 ==>  Preparing: SELECT ecare_preface, coalesce(template_type,0) template_type, sender_nm, sender_email, receiver_nm , retmail_receiver, sender_tel, coalesce(retry_cnt,0) retry_cnt, mail_type, tmpl_ver , coalesce(preface_ver,0) preface_ver, coalesce(cover_ver,0) cover_ver, coalesce(handler_ver,0) handler_ver, coalesce(handler_seq,0) handler_seq FROM nvecaremsg WHERE ecare_no = ? 
09-03 11:41:58.860 ttp-nio-18084-exec-7 ==> Parameters: 14(Integer)
09-03 11:41:58.861 ttp-nio-18084-exec-7 <==      Total: 1
09-03 11:41:58.872 ttp-nio-18084-exec-9 Ecare.selectSubEcareList
09-03 11:41:58.872 ttp-nio-18084-exec-9 ==>  Preparing: SELECT ecare_no, scenario_no, ecare_nm, channel_type, depth_no, relation_type FROM nvecaremsg WHERE scenario_no = ? AND depth_no = ? AND relation_tree LIKE ((SELECT relation_tree FROM nvecaremsg WHERE ecare_no = ?) || '%') 
09-03 11:41:58.872 ttp-nio-18084-exec-9 ==> Parameters: 11(Integer), 2(Integer), 14(Integer)
09-03 11:41:58.872 ttp-nio-18084-exec-9 <==      Total: 0
09-03 11:41:58.900 ttp-nio-18084-exec-6 Ecare.selectEditorEcare
09-03 11:41:58.900 ttp-nio-18084-exec-1 EcMsgHandler.selectEcMsgHandlerByPk
09-03 11:41:58.900 ttp-nio-18084-exec-6 ==>  Preparing: SELECT ecare_preface, coalesce(template_type,0) template_type, sender_nm, sender_email, receiver_nm , retmail_receiver, sender_tel, coalesce(retry_cnt,0) retry_cnt, mail_type, tmpl_ver , coalesce(preface_ver,0) preface_ver, coalesce(cover_ver,0) cover_ver, coalesce(handler_ver,0) handler_ver, coalesce(handler_seq,0) handler_seq FROM nvecaremsg WHERE ecare_no = ? 
09-03 11:41:58.900 ttp-nio-18084-exec-1 ==>  Preparing: SELECT ecare_no, type, appsource FROM nvecmsghandler WHERE ecare_no = ? 
09-03 11:41:58.901 ttp-nio-18084-exec-1 ==> Parameters: 14(Integer)
09-03 11:41:58.901 ttp-nio-18084-exec-6 ==> Parameters: 14(Integer)
09-03 11:41:58.901 ttp-nio-18084-exec-6 <==      Total: 1
09-03 11:41:58.903 ttp-nio-18084-exec-6 DefaultHandler.selectHandlerUseList
09-03 11:41:58.903 ttp-nio-18084-exec-6 ==>  Preparing: SELECT seq, handle_nm, handle_desc FROM nvdefaulthandler c WHERE EXISTS ( SELECT 0 FROM nvecaremsg a, nvecarescenario b WHERE a.scenario_no = b.scenario_no AND a.channel_type = c.channel AND b.handler_type = c.handle_type AND a.ecare_no = ? AND c.service_type = (CASE WHEN a.sub_type ='N' THEN 'N' WHEN a.service_type ='S' THEN 'S' ELSE 'R' END ) AND c.handle_attr = (CASE WHEN a.mail_type ='NONE' THEN 'D' WHEN a.mail_type ='' THEN 'D' ELSE a.mail_type END ) ) ORDER BY seq 
09-03 11:41:58.903 ttp-nio-18084-exec-6 ==> Parameters: 14(Integer)
09-03 11:41:58.904 ttp-nio-18084-exec-6 <==      Total: 1
09-03 11:41:58.904 ttp-nio-18084-exec-1 <==      Total: 1
09-03 11:41:58.953 ttp-nio-18084-exec-8 EcareTemplate.selectEditorEcareTemplate
09-03 11:41:58.953 ttp-nio-18084-exec-8 ==>  Preparing: SELECT a.seg, a.template, a.kakao_buttons, CASE WHEN a.seg = ' ' THEN 0 ELSE 1 END as seg_no , CASE WHEN b.kakao_image_no IS NULL THEN '' ELSE (SELECT file_preview_path FROM nvmobilecontents WHERE conts_no = b.kakao_image_no) END as image_url , a.conts_no FROM nvecaretemplate a, nvecaremsg b WHERE a.ecare_no = b.ecare_no AND b.ecare_no = ? ORDER BY seg_no 
09-03 11:41:58.953 ttp-nio-18084-exec-8 ==> Parameters: 14(Integer)
09-03 11:41:58.955 ttp-nio-18084-exec-8 <==      Total: 1
09-03 15:47:00.179 ttp-nio-18084-exec-9 User.selectAdminByAdminId
09-03 15:47:00.179 ttp-nio-18084-exec-9 ==>  Preparing: SELECT a.user_id, a.pass_wd, a.pass_salt, a.grp_cd, a.name_kor, a.name_eng, a.tel_no, a.email, a.user_class, a.usertype_cd, a.lastupdate_dt, a.active_yn, a.accept_yn , a.list_count_per_page, a.soeid, a.geid, a.isa_role, a.work_doc, a.user_role, a.create_user, a.permit_sts, a.permit_dt, a.login_cnt, a.lastlogin_dt , b.grp_nm, b.req_dept_id as req_dept, a.user_id as req_user FROM nvuser a, nvusergrp b WHERE a.grp_cd = b.grp_cd AND a.user_id = ? AND a.active_yn = 'Y' AND a.accept_yn = 'Y' 
09-03 15:47:00.180 ttp-nio-18084-exec-9 ==> Parameters: admin(String)
09-03 15:47:00.235 ttp-nio-18084-exec-9 <==      Total: 1
09-03 15:47:00.237 ttp-nio-18084-exec-9 Menu.selectRoleMap
09-03 15:47:00.237 ttp-nio-18084-exec-9 ==>  Preparing: SELECT a.menu_link_url, a.menu_cd, b.read_auth, b.write_auth, b.execute_auth FROM nvmenu a, nvmenurole b WHERE a.menu_cd = b.menu_cd AND a.menu_link_url IS NOT NULL AND b.user_id = ? 
09-03 15:47:00.237 ttp-nio-18084-exec-9 ==> Parameters: admin(String)
09-03 15:47:00.241 ttp-nio-18084-exec-9 <==      Total: 46
09-03 15:47:00.242 ttp-nio-18084-exec-9 User.updateLoginFailCountToInitial
09-03 15:47:00.242 ttp-nio-18084-exec-9 ==>  Preparing: UPDATE nvuser SET login_cnt = '0', lastlogin_dt = to_char(sysdate, 'yyyyMMdd') WHERE user_id = ? 
09-03 15:47:00.242 ttp-nio-18084-exec-9 ==> Parameters: admin(String)
09-03 15:47:00.262 ttp-nio-18084-exec-9 <==    Updates: 1
09-03 15:47:00.263 ttp-nio-18084-exec-9 MenuRole.getUserMenuList
09-03 15:47:00.263 ttp-nio-18084-exec-9 ==>  Preparing: SELECT a.user_id, a.menu_cd, a.read_auth, a.write_auth, a.execute_auth, b.menu_link_url FROM nvmenurole a, nvmenu b WHERE a.menu_cd = b.menu_cd AND a.user_id = ? AND b.active_yn = 'Y' AND b.pmenu_cd IS NOT NULL ORDER BY menu_cd, sort_no 
09-03 15:47:00.264 ttp-nio-18084-exec-9 ==> Parameters: admin(String)
09-03 15:47:00.265 ttp-nio-18084-exec-9 <==      Total: 37
09-03 15:47:00.289 ttp-nio-18084-exec-6 Scenario.getScenarioTotalCount
09-03 15:47:00.290 ttp-nio-18084-exec-6 ==>  Preparing: SELECT count(*) FROM nvscenario a, nvcamptag b, nvcampaign c LEFT OUTER JOIN nvsendresult d ON c.campaign_no = d.campaign_no WHERE a.tag_no = b.tag_no AND a.scenario_no = c.scenario_no AND d.resend_sts is null AND c.use_yn = 'Y' AND a.create_dt >= ? AND a.create_dt <= ? 
09-03 15:47:00.290 ttp-nio-18084-exec-6 ==> Parameters: 20200903(String), 20210903(String)
09-03 15:47:00.305 ttp-nio-18084-exec-6 <==      Total: 1
09-03 15:47:00.306 ttp-nio-18084-exec-6 Scenario.getCampaignScenarioList
09-03 15:47:00.306 ttp-nio-18084-exec-6 ==>  Preparing: SELECT coalesce(scenario_no,0) scenario_no, user_id, grp_cd, scenario_nm, finish_yn , (SELECT grp_nm FROM nvusergrp WHERE grp_cd = x.grp_cd) grp_nm , (SELECT name_kor FROM nvuser WHERE user_id = x.user_id) name_kor , (SELECT val FROM nv_cd_mst WHERE cd_cat = '100111' AND cd = x.campaign_sts AND lang = ?) campaign_sts_nm , (SELECT val FROM nv_cd_mst WHERE cd_cat = '100221' AND cd = x.relation_type AND lang = ?) relation_type_nm , to_char(to_date(create_dt, 'yyyymmdd'), 'yy-mm-dd') create_dt , coalesce(campaign_no,0) campaign_no, coalesce(campaign_preface,'') campaign_preface , CASE WHEN sendstart_dtm = '' THEN '' ELSE to_char(to_date(sendstart_dtm, 'yyyymmddhh24miss'), 'yy-mm-dd hh24:mi') END sendstart_dtm , CASE WHEN campaign_sts = 'P' THEN (CASE WHEN approval_sts IS NULL THEN campaign_sts ELSE approval_sts END) ELSE campaign_sts END campaign_sts , relation_type, coalesce(depth_no,0) depth_no, channel_type, campaign_level , divide_yn, ab_test_type, campaign_preface_ab, coalesce(segment_no,-1) segment_no, relation_tree , tag_nm, coalesce(result_seq,0) result_seq, coalesce(segment_size,0) target_cnt FROM ( SELECT row_number() OVER(ORDER BY a.scenario_no DESC, c.relation_tree, c.campaign_no) rnum , a.scenario_no, a.user_id, a.grp_cd, a.scenario_nm, a.scenario_type, a.finish_yn, a.create_dt, b.tag_nm , c.campaign_no, c.campaign_preface, concat(coalesce(c.sendstart_dt,''), coalesce(c.sendstart_tm,'')) sendstart_dtm , c.campaign_sts, c.approval_sts, c.relation_type, c.depth_no, c.channel_type, c.campaign_level , c.divide_yn, c.ab_test_type, c.campaign_preface_ab, c.segment_no, c.relation_tree , d.result_seq, e.segment_size FROM nvscenario a, nvcamptag b, nvcampaign c LEFT OUTER JOIN nvsendresult d ON c.campaign_no = d.campaign_no LEFT OUTER JOIN nvsegment e ON c.segment_no = e.segment_no WHERE a.tag_no = b.tag_no AND a.scenario_no = c.scenario_no AND d.resend_sts is null AND c.use_yn = 'Y' AND a.create_dt >= ? AND a.create_dt <= ? ORDER BY a.scenario_no DESC, relation_tree, c.campaign_no DESC ) x WHERE rnum >= ((? - 1) * ? + 1) AND rnum <= ? * ? ORDER BY scenario_no DESC, relation_tree, campaign_no DESC 
09-03 15:47:00.306 ttp-nio-18084-exec-6 ==> Parameters: ko(String), ko(String), 20200903(String), 20210903(String), 1(Integer), 10(Integer), 1(Integer), 10(Integer)
09-03 15:47:00.324 ttp-nio-18084-exec-6 <==      Total: 10
09-03 16:14:23.239 ttp-nio-18084-exec-6 User.selectAdminByAdminId
09-03 16:14:23.239 ttp-nio-18084-exec-6 ==>  Preparing: SELECT a.user_id, a.pass_wd, a.pass_salt, a.grp_cd, a.name_kor, a.name_eng, a.tel_no, a.email, a.user_class, a.usertype_cd, a.lastupdate_dt, a.active_yn, a.accept_yn , a.list_count_per_page, a.soeid, a.geid, a.isa_role, a.work_doc, a.user_role, a.create_user, a.permit_sts, a.permit_dt, a.login_cnt, a.lastlogin_dt , b.grp_nm, b.req_dept_id as req_dept, a.user_id as req_user FROM nvuser a, nvusergrp b WHERE a.grp_cd = b.grp_cd AND a.user_id = ? AND a.active_yn = 'Y' AND a.accept_yn = 'Y' 
09-03 16:14:23.239 ttp-nio-18084-exec-6 ==> Parameters: admin(String)
09-03 16:14:23.239 ttp-nio-18084-exec-6 <==      Total: 1
09-03 16:14:23.239 ttp-nio-18084-exec-6 Menu.selectRoleMap
09-03 16:14:23.239 ttp-nio-18084-exec-6 ==>  Preparing: SELECT a.menu_link_url, a.menu_cd, b.read_auth, b.write_auth, b.execute_auth FROM nvmenu a, nvmenurole b WHERE a.menu_cd = b.menu_cd AND a.menu_link_url IS NOT NULL AND b.user_id = ? 
09-03 16:14:23.239 ttp-nio-18084-exec-6 ==> Parameters: admin(String)
09-03 16:14:23.241 ttp-nio-18084-exec-6 <==      Total: 46
09-03 16:14:23.241 ttp-nio-18084-exec-6 User.updateLoginFailCountToInitial
09-03 16:14:23.241 ttp-nio-18084-exec-6 ==>  Preparing: UPDATE nvuser SET login_cnt = '0', lastlogin_dt = to_char(sysdate, 'yyyyMMdd') WHERE user_id = ? 
09-03 16:14:23.242 ttp-nio-18084-exec-6 ==> Parameters: admin(String)
09-03 16:14:23.271 ttp-nio-18084-exec-6 <==    Updates: 1
09-03 16:14:23.272 ttp-nio-18084-exec-6 MenuRole.getUserMenuList
09-03 16:14:23.272 ttp-nio-18084-exec-6 ==>  Preparing: SELECT a.user_id, a.menu_cd, a.read_auth, a.write_auth, a.execute_auth, b.menu_link_url FROM nvmenurole a, nvmenu b WHERE a.menu_cd = b.menu_cd AND a.user_id = ? AND b.active_yn = 'Y' AND b.pmenu_cd IS NOT NULL ORDER BY menu_cd, sort_no 
09-03 16:14:23.272 ttp-nio-18084-exec-6 ==> Parameters: admin(String)
09-03 16:14:23.273 ttp-nio-18084-exec-6 <==      Total: 37
09-03 16:14:23.290 ttp-nio-18084-exec-1 Scenario.getScenarioTotalCount
09-03 16:14:23.290 ttp-nio-18084-exec-1 ==>  Preparing: SELECT count(*) FROM nvscenario a, nvcamptag b, nvcampaign c LEFT OUTER JOIN nvsendresult d ON c.campaign_no = d.campaign_no WHERE a.tag_no = b.tag_no AND a.scenario_no = c.scenario_no AND d.resend_sts is null AND c.use_yn = 'Y' AND a.create_dt >= ? AND a.create_dt <= ? 
09-03 16:14:23.291 ttp-nio-18084-exec-1 ==> Parameters: 20200903(String), 20210903(String)
09-03 16:14:23.292 ttp-nio-18084-exec-1 <==      Total: 1
09-03 16:14:23.293 ttp-nio-18084-exec-1 Scenario.getCampaignScenarioList
09-03 16:14:23.293 ttp-nio-18084-exec-1 ==>  Preparing: SELECT coalesce(scenario_no,0) scenario_no, user_id, grp_cd, scenario_nm, finish_yn , (SELECT grp_nm FROM nvusergrp WHERE grp_cd = x.grp_cd) grp_nm , (SELECT name_kor FROM nvuser WHERE user_id = x.user_id) name_kor , (SELECT val FROM nv_cd_mst WHERE cd_cat = '100111' AND cd = x.campaign_sts AND lang = ?) campaign_sts_nm , (SELECT val FROM nv_cd_mst WHERE cd_cat = '100221' AND cd = x.relation_type AND lang = ?) relation_type_nm , to_char(to_date(create_dt, 'yyyymmdd'), 'yy-mm-dd') create_dt , coalesce(campaign_no,0) campaign_no, coalesce(campaign_preface,'') campaign_preface , CASE WHEN sendstart_dtm = '' THEN '' ELSE to_char(to_date(sendstart_dtm, 'yyyymmddhh24miss'), 'yy-mm-dd hh24:mi') END sendstart_dtm , CASE WHEN campaign_sts = 'P' THEN (CASE WHEN approval_sts IS NULL THEN campaign_sts ELSE approval_sts END) ELSE campaign_sts END campaign_sts , relation_type, coalesce(depth_no,0) depth_no, channel_type, campaign_level , divide_yn, ab_test_type, campaign_preface_ab, coalesce(segment_no,-1) segment_no, relation_tree , tag_nm, coalesce(result_seq,0) result_seq, coalesce(segment_size,0) target_cnt FROM ( SELECT row_number() OVER(ORDER BY a.scenario_no DESC, c.relation_tree, c.campaign_no) rnum , a.scenario_no, a.user_id, a.grp_cd, a.scenario_nm, a.scenario_type, a.finish_yn, a.create_dt, b.tag_nm , c.campaign_no, c.campaign_preface, concat(coalesce(c.sendstart_dt,''), coalesce(c.sendstart_tm,'')) sendstart_dtm , c.campaign_sts, c.approval_sts, c.relation_type, c.depth_no, c.channel_type, c.campaign_level , c.divide_yn, c.ab_test_type, c.campaign_preface_ab, c.segment_no, c.relation_tree , d.result_seq, e.segment_size FROM nvscenario a, nvcamptag b, nvcampaign c LEFT OUTER JOIN nvsendresult d ON c.campaign_no = d.campaign_no LEFT OUTER JOIN nvsegment e ON c.segment_no = e.segment_no WHERE a.tag_no = b.tag_no AND a.scenario_no = c.scenario_no AND d.resend_sts is null AND c.use_yn = 'Y' AND a.create_dt >= ? AND a.create_dt <= ? ORDER BY a.scenario_no DESC, relation_tree, c.campaign_no DESC ) x WHERE rnum >= ((? - 1) * ? + 1) AND rnum <= ? * ? ORDER BY scenario_no DESC, relation_tree, campaign_no DESC 
09-03 16:14:23.294 ttp-nio-18084-exec-1 ==> Parameters: ko(String), ko(String), 20200903(String), 20210903(String), 1(Integer), 10(Integer), 1(Integer), 10(Integer)
09-03 16:14:23.295 ttp-nio-18084-exec-1 <==      Total: 10
09-03 16:14:38.817 ttp-nio-18084-exec-9 EcareScenario.selectMaxEcareScenarioNo
09-03 16:14:38.817 ttp-nio-18084-exec-9 ==>  Preparing: SELECT coalesce(max(scenario_no),0)+1 FROM nvecarescenario 
09-03 16:14:38.817 ttp-nio-18084-exec-9 ==> Parameters: 
09-03 16:14:38.882 ttp-nio-18084-exec-9 <==      Total: 1
09-03 16:14:38.882 ttp-nio-18084-exec-9 EcareScenario.insertEcareScenario
09-03 16:14:38.883 ttp-nio-18084-exec-9 ==>  Preparing: INSERT INTO nvecarescenario ( scenario_no, user_id, grp_cd, scenario_nm, scenario_desc, create_dt, create_tm, lastupdate_dt, lastupdate_tm, tag_no , finish_yn, service_type, sub_type, handler_type, chrg_nm, brc_nm ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ? , 'N', ?, ?, ?, ?, ? ) 
09-03 16:14:38.884 ttp-nio-18084-exec-9 ==> Parameters: 17(Integer), admin(String), 01(String), test(String), null, 20210903(String), 161438(String), 20210903(String), 161438(String), 1(Integer), S(String), N(String), G(String), null, null
09-03 16:14:38.902 ttp-nio-18084-exec-9 <==    Updates: 1
09-03 16:14:38.903 ttp-nio-18084-exec-9 EcmSchedule.selectNextEcmScheduleNo
09-03 16:14:38.903 ttp-nio-18084-exec-9 ==>  Preparing: SELECT coalesce(max(ecmschedule_no),0)+1 FROM nvecmschedule 
09-03 16:14:38.903 ttp-nio-18084-exec-9 ==> Parameters: 
09-03 16:14:38.904 ttp-nio-18084-exec-9 <==      Total: 1
09-03 16:14:38.904 ttp-nio-18084-exec-9 EcmSchedule.insertEcmSchedule
09-03 16:14:38.905 ttp-nio-18084-exec-9 ==>  Preparing: INSERT INTO nvecmschedule (ecmschedule_no, ecmschedule_nm, cycle_cd, sendstart_dt, sendend_dt, invoke_tm, invoke_every_min, day, sche_weeknumber, weekday, start_tm, end_tm, term_min) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
09-03 16:14:38.905 ttp-nio-18084-exec-9 ==> Parameters: 21(Integer), null, null, null, null, null, null, 0(Integer), 0(Integer), null, null, null, null
09-03 16:14:38.948 ttp-nio-18084-exec-9 <==    Updates: 1
09-03 16:14:38.949 ttp-nio-18084-exec-9 Ecare.selectNextEcareNo
09-03 16:14:38.950 ttp-nio-18084-exec-9 ==>  Preparing: SELECT coalesce(max(ecare_no),0)+1 FROM nvecaremsg 
09-03 16:14:38.950 ttp-nio-18084-exec-9 ==> Parameters: 
09-03 16:14:38.951 ttp-nio-18084-exec-9 <==      Total: 1
09-03 16:14:38.951 ttp-nio-18084-exec-9 ServerInfo.selectServerInfo
09-03 16:14:38.952 ttp-nio-18084-exec-9 ==>  Preparing: SELECT host_nm, port_no, driver_nm, driver_dsn, dbuser_id, dbpassword, openclick_path, survey_path, link_path, htmlmaker_path , openimage_path, duration_path, reject_path, smtp_ip, smtp_port, fula_ip, fula_port, ftp_yn, ftp_user_id, ftp_password , lastupdate_dt, editor_id, ret_domain, coalesce(retry_cnt,0) retry_cnt, b4_send_approve_yn, b4_send_verify_yn, b4_real_send_test_send_yn, ase_link_merge_param, ase_reject_merge_param, ase_open_scriptlet , groovy_link_merge_param, groovy_reject_merge_param, groovy_open_scriptlet, resend_include_returnmail_yn, resend_include_mail_key_yn, resend_error_cd, fax_resend_error_cd, sms_resend_error_cd, altalk_resend_error_cd, push_resend_error_cd , spool_preserve_period, log_preserve_period, result_file_download_yn, sucs_result_file_download_yn, kakao_template_last_sync_dtm , (SELECT mintime FROM nvdurationinfo WHERE durationinfo_cd = '01') as duration_time FROM nvserverinfo 
09-03 16:14:38.952 ttp-nio-18084-exec-9 ==> Parameters: 
09-03 16:14:38.954 ttp-nio-18084-exec-9 <==      Total: 1
09-03 16:14:38.960 ttp-nio-18084-exec-9 Ecare.insertEcare1StepInfo
09-03 16:14:38.960 ttp-nio-18084-exec-9 ==>  Preparing: INSERT INTO nvecaremsg ( ecare_no, user_id, grp_cd, ecare_nm, ecare_sts, create_dt, create_tm, lastupdate_dt, campaign_type, ecmschedule_no , sending_mode, retry_cnt, ecare_class, channel_type, service_type, ecare_level, svc_id, sub_type, scenario_no, mail_type , req_dept_id, req_user_id, resend_ecare_no ) VALUES ( ?, ?, ?, ?, 'I', ?, ?, ?, 'Y', ? , ?, ?, 'A', ?, ?, '1', ?, ?, ?, ? , ?, ?, ? ) 
09-03 16:14:38.960 ttp-nio-18084-exec-9 ==> Parameters: 22(Integer), admin(String), 01(String), test(String), 20210903(String), 161438(String), 20210903(String), 21(Integer), null, 1(Integer), M(String), S(String), null, N(String), 17(Integer), SMAIL(String), null, null, 0(Integer)
09-03 16:14:38.980 ttp-nio-18084-exec-9 <==    Updates: 1
09-03 16:14:38.998 ttp-nio-18084-exec-9 DbInfo.selectDbinfoSeq
09-03 16:14:38.998 ttp-nio-18084-exec-9 ==>  Preparing: SELECT dbinfo_seq FROM nvdbinfo WHERE driver_dsn LIKE concat(?,'%') AND dbuser_id = ? 
09-03 16:14:38.998 ttp-nio-18084-exec-9 ==> Parameters: jdbc:oracle:thin:@localhost:1522:wiseu(String), wiseu7(String)
09-03 16:14:38.999 ttp-nio-18084-exec-9 <==      Total: 1
09-03 16:14:39.000 ttp-nio-18084-exec-9 AddQuery.insertAddQuery
09-03 16:14:39.000 ttp-nio-18084-exec-9 ==>  Preparing: INSERT INTO nvaddquery (ecare_no, query_seq, query_type, execute_type, result_id, dbinfo_seq, query) VALUES( ? ,? ,?, ? ,? ,? ,? ) 
09-03 16:14:39.000 ttp-nio-18084-exec-9 ==> Parameters: 22(Integer), 1(Integer), DATA(String), BYTARGET(String), data1(String), 1(Integer), SELECT JONMUN FROM NVREALTIMEACCEPT WHERE SEQ = ${seq}(String)
09-03 16:14:39.058 ttp-nio-18084-exec-9 <==    Updates: 1
09-03 16:14:39.058 ttp-nio-18084-exec-9 AddQuery.insertAddQuery
09-03 16:14:39.058 ttp-nio-18084-exec-9 ==>  Preparing: INSERT INTO nvaddquery (ecare_no, query_seq, query_type, execute_type, result_id, dbinfo_seq, query) VALUES( ? ,? ,?, ? ,? ,? ,? ) 
09-03 16:14:39.059 ttp-nio-18084-exec-9 ==> Parameters: 22(Integer), 2(Integer), RESULT(String), BYTARGET(String), (String), 1(Integer), UPDATE NVREALTIMEACCEPT SET SEND_FG = #{_SEND_FG}, LIST_SEQ = #{_LIST_SEQ}, ERROR_MSG = #{_ERROR_MESSAGE} WHERE SEQ = ${seq}(String)
09-03 16:14:39.060 ttp-nio-18084-exec-9 <==    Updates: 1
09-03 16:14:39.061 ttp-nio-18084-exec-9 EcareTraceInfo.insertEcareTraceInfoByEcare
09-03 16:14:39.061 ttp-nio-18084-exec-9 ==>  Preparing: INSERT INTO nvecaretraceinfo (trace_type, ecare_no, term_type) VALUES ('TRACE', ?, ?) 
09-03 16:14:39.061 ttp-nio-18084-exec-9 ==> Parameters: 22(Integer), 1(String)
09-03 16:14:39.092 ttp-nio-18084-exec-9 <==    Updates: 1
09-03 16:14:39.093 ttp-nio-18084-exec-9 EcareTemplate.insertEditorEcareTemplate
09-03 16:14:39.093 ttp-nio-18084-exec-9 ==>  Preparing: INSERT INTO nvecaretemplate (ecare_no, seg, template, kakao_buttons, conts_no) VALUES (?, ?, ?, ? ,?) 
09-03 16:14:39.093 ttp-nio-18084-exec-9 ==> Parameters: 22(Integer),  (String), (String),  (String), 0(Integer)
09-03 16:14:39.127 ttp-nio-18084-exec-9 <==    Updates: 1
09-03 16:14:39.127 ttp-nio-18084-exec-9 EcareTemplate.insertEditorEcareTemplate
09-03 16:14:39.127 ttp-nio-18084-exec-9 ==>  Preparing: INSERT INTO nvecaretemplate (ecare_no, seg, template, kakao_buttons, conts_no) VALUES (?, ?, ?, ? ,?) 
09-03 16:14:39.127 ttp-nio-18084-exec-9 ==> Parameters: 22(Integer), SMAIL(String), (String),  (String), 0(Integer)
09-03 16:14:39.127 ttp-nio-18084-exec-9 <==    Updates: 1
09-03 16:14:39.136 ttp-nio-18084-exec-8 Ecare.getEcareChannelInfo
09-03 16:14:39.136 ttp-nio-18084-exec-8 ==>  Preparing: SELECT (CASE channel_type WHEN 'M' THEN 4 WHEN 'S' THEN 3 WHEN 'T' THEN 2 WHEN 'F' THEN 1 END) as seq, ecare_no, channel_type, depth_no FROM nvecaremsg WHERE scenario_no = ? ORDER BY seq DESC, depth_no 
09-03 16:14:39.136 ttp-nio-18084-exec-8 ==> Parameters: 17(Integer)
09-03 16:14:39.174 ttp-nio-18084-exec-8 <==      Total: 1
09-03 16:14:39.175 ttp-nio-18084-exec-8 EcareScenario.selectEcareScenarioDetailInfo
09-03 16:14:39.175 ttp-nio-18084-exec-8 ==>  Preparing: SELECT a.scenario_no, a.scenario_nm, a.scenario_desc, a.scenario_type, a.finish_yn, a.finish_dt, coalesce(a.tag_no,0) tag_no, a.handler_type, b.name_kor, c.tag_nm , d.ecare_no, d.user_id, d.grp_cd, d.segment_no, d.ecare_nm, d.ecare_preface, d.ecare_sts, d.create_dt, d.create_tm, d.lastupdate_dt , d.lastupdate_tm, d.campaign_type, d.template_type, coalesce(d.ecmschedule_no,0) ecmschedule_no, d.sender_nm, d.sender_email, d.sending_mode, coalesce(d.retry_cnt,1) retry_cnt, d.receiver_nm, d.sender_tel , d.retmail_receiver, d.ecare_class, d.relation_type, d.relation_tree, d.channel_type, d.service_type, d.ecare_level, d.sub_type, d.depth_no, d.verify_b4_send , d.template_sender_key, d.kakao_sender_key, d.kakao_tmpl_cd, coalesce(d.kakao_image_no,0) kakao_image_no, d.failback_send_yn, d.failback_subject, coalesce(d.handler_seq,0) handler_seq , coalesce(e.term_type,'1') term_type, f.segment_nm, f.segment_size, g.sender_nm as env_sender_nm, g.sender_email as env_sender_email , g.receiver_nm as env_receiver_nm, g.sender_tel as env_sender_tel, g.retmail_receiver as env_retmail_receiver, g.sender_fax as env_sender_fax, g.receiver_fax as env_receiver_fax , (SELECT val FROM nv_cd_mst WHERE cd_cat = '200111' AND cd = d.ecare_sts AND lang = ?) as ecare_sts_nm , a.chrg_nm, a.brc_nm , d.slot1_field, d.slot2_field, d.slot3_field, d.slot4_field, d.slot5_field , d.slot6_field, d.slot7_field, d.slot8_field, d.slot9_field, d.slot10_field , d.deploy_type , d.open_type, d.mail_type, d.req_dept_id FROM nvecarescenario a, nvuser b, nvecaremsgtag c, nvecaremsg d LEFT OUTER JOIN nvecaretraceinfo e ON d.ecare_no = e.ecare_no LEFT OUTER JOIN nvsegment f ON d.segment_no = f.segment_no LEFT OUTER JOIN nvusermailinfo g ON d.user_id = g.user_id WHERE a.grp_cd = b.grp_cd AND a.user_id = b.user_id AND a.tag_no = c.tag_no AND a.scenario_no = d.scenario_no AND a.scenario_no = ? AND d.ecare_no = ? 
09-03 16:14:39.175 ttp-nio-18084-exec-8 ==> Parameters: ko(String), 17(Integer), 22(Integer)
09-03 16:14:39.176 ttp-nio-18084-exec-8 <==      Total: 1
09-03 16:14:39.177 ttp-nio-18084-exec-8 Ecare.updateEcare2StepInfo
09-03 16:14:39.177 ttp-nio-18084-exec-8 ==>  Preparing: UPDATE nvecaremsg SET lastupdate_dt = to_char(sysdate, 'yyyyMMdd') WHERE ecare_no = ? 
09-03 16:14:39.177 ttp-nio-18084-exec-8 ==> Parameters: 22(Integer)
09-03 16:14:39.179 ttp-nio-18084-exec-8 <==    Updates: 1
09-03 16:14:39.179 ttp-nio-18084-exec-8 EcmSchedule.selectEcmScheduleByPk
09-03 16:14:39.179 ttp-nio-18084-exec-8 ==>  Preparing: SELECT coalesce(ecmschedule_no,0) ecmschedule_no, ecmschedule_nm, cycle_cd, sendstart_dt, sendend_dt, invoke_tm, invoke_every_min , coalesce(day,0) as day, coalesce(sche_weeknumber,0) sche_weeknumber, weekday, start_tm, end_tm, term_min FROM nvecmschedule WHERE ecmschedule_no = ? 
09-03 16:14:39.179 ttp-nio-18084-exec-8 ==> Parameters: 21(Integer)
09-03 16:14:39.180 ttp-nio-18084-exec-8 <==      Total: 1
09-03 16:14:39.180 ttp-nio-18084-exec-8 CycleItem.selectCycleItemInfo
09-03 16:14:39.180 ttp-nio-18084-exec-8 ==>  Preparing: SELECT cycleitem, check_yn FROM nvcycleitem WHERE ecmschedule_no = ? 
09-03 16:14:39.180 ttp-nio-18084-exec-8 ==> Parameters: 21(Integer)
09-03 16:14:39.182 ttp-nio-18084-exec-8 <==      Total: 0
09-03 16:14:39.183 ttp-nio-18084-exec-8 EcareMultipartFile.selectEditorEcareMultipartFile
09-03 16:14:39.183 ttp-nio-18084-exec-8 ==>  Preparing: SELECT file_alias, file_path, file_size, file_name, file_type, secu_field, enc_yn FROM nvecaremultipartfile WHERE ecare_no = ? 
09-03 16:14:39.183 ttp-nio-18084-exec-8 ==> Parameters: 22(Integer)
09-03 16:14:39.185 ttp-nio-18084-exec-8 <==      Total: 0
09-03 16:14:39.186 ttp-nio-18084-exec-8 AddQuery.selectAddQuery
09-03 16:14:39.186 ttp-nio-18084-exec-8 ==>  Preparing: SELECT ecare_no, query_seq, query_type, result_id, dbinfo_seq, query, execute_type FROM nvaddquery WHERE ecare_no= ? 
09-03 16:14:39.186 ttp-nio-18084-exec-8 ==> Parameters: 22(Integer)
09-03 16:14:39.186 ttp-nio-18084-exec-8 <==      Total: 2
09-03 16:14:39.187 ttp-nio-18084-exec-8 EcareScenario.selectOmniChannelEcares
09-03 16:14:39.187 ttp-nio-18084-exec-8 ==>  Preparing: SELECT a.scenario_no, a.scenario_nm, coalesce(b.ecare_no,0) ecare_no, b.depth_no, b.channel_type, b.relation_type , (SELECT val FROM nv_cd_mst WHERE cd_cat = '200111' AND cd = b.ecare_sts AND lang = ?) ecare_sts_nm , c.segment_size as target_cnt FROM nvecarescenario a, nvecaremsg b LEFT OUTER JOIN nvsegment c ON b.segment_no = c.segment_no WHERE a.scenario_no = b.scenario_no AND a.scenario_no = ( SELECT scenario_no FROM nvecaremsg WHERE ecare_no = ? ) AND b.relation_type IN ('N','S','F','O') ORDER BY rpad( b.relation_tree , (SELECT max(depth_no) FROM nvecaremsg WHERE scenario_no = (SELECT scenario_no FROM nvecaremsg WHERE ecare_no = ?)) , 0 ), b.ecare_no 
09-03 16:14:39.187 ttp-nio-18084-exec-8 ==> Parameters: ko(String), 22(Integer), 22(Integer)
09-03 16:14:39.188 ttp-nio-18084-exec-8 <==      Total: 1
09-03 16:14:39.189 ttp-nio-18084-exec-8 ServerInfo.selectServerInfo
09-03 16:14:39.189 ttp-nio-18084-exec-8 ==>  Preparing: SELECT host_nm, port_no, driver_nm, driver_dsn, dbuser_id, dbpassword, openclick_path, survey_path, link_path, htmlmaker_path , openimage_path, duration_path, reject_path, smtp_ip, smtp_port, fula_ip, fula_port, ftp_yn, ftp_user_id, ftp_password , lastupdate_dt, editor_id, ret_domain, coalesce(retry_cnt,0) retry_cnt, b4_send_approve_yn, b4_send_verify_yn, b4_real_send_test_send_yn, ase_link_merge_param, ase_reject_merge_param, ase_open_scriptlet , groovy_link_merge_param, groovy_reject_merge_param, groovy_open_scriptlet, resend_include_returnmail_yn, resend_include_mail_key_yn, resend_error_cd, fax_resend_error_cd, sms_resend_error_cd, altalk_resend_error_cd, push_resend_error_cd , spool_preserve_period, log_preserve_period, result_file_download_yn, sucs_result_file_download_yn, kakao_template_last_sync_dtm , (SELECT mintime FROM nvdurationinfo WHERE durationinfo_cd = '01') as duration_time FROM nvserverinfo 
09-03 16:14:39.189 ttp-nio-18084-exec-8 ==> Parameters: 
09-03 16:14:39.190 ttp-nio-18084-exec-8 <==      Total: 1
09-03 16:14:39.190 ttp-nio-18084-exec-8 DbInfo.selectDbInfoList
09-03 16:14:39.190 ttp-nio-18084-exec-8 ==>  Preparing: SELECT dbinfo_seq, driver_nm, server_nm, driver_dsn, dbuser_id, dbpassword, encoding, decoding, dbkind, testquery FROM nvdbinfo 
09-03 16:14:39.190 ttp-nio-18084-exec-8 ==> Parameters: 
09-03 16:14:39.191 ttp-nio-18084-exec-8 <==      Total: 1
09-03 16:14:39.662 ttp-nio-18084-exec-7 Ecare.selectEditorEcare
09-03 16:14:39.662 ttp-nio-18084-exec-7 ==>  Preparing: SELECT ecare_preface, coalesce(template_type,0) template_type, sender_nm, sender_email, receiver_nm , retmail_receiver, sender_tel, coalesce(retry_cnt,0) retry_cnt, mail_type, tmpl_ver , coalesce(preface_ver,0) preface_ver, coalesce(cover_ver,0) cover_ver, coalesce(handler_ver,0) handler_ver, coalesce(handler_seq,0) handler_seq FROM nvecaremsg WHERE ecare_no = ? 
09-03 16:14:39.662 ttp-nio-18084-exec-7 ==> Parameters: 22(Integer)
09-03 16:14:39.664 ttp-nio-18084-exec-7 <==      Total: 1
09-03 16:14:39.675 ttp-nio-18084-exec-9 Ecare.selectSubEcareList
09-03 16:14:39.676 ttp-nio-18084-exec-9 ==>  Preparing: SELECT ecare_no, scenario_no, ecare_nm, channel_type, depth_no, relation_type FROM nvecaremsg WHERE scenario_no = ? AND depth_no = ? AND relation_tree LIKE ((SELECT relation_tree FROM nvecaremsg WHERE ecare_no = ?) || '%') 
09-03 16:14:39.676 ttp-nio-18084-exec-9 ==> Parameters: 17(Integer), 2(Integer), 22(Integer)
09-03 16:14:39.677 ttp-nio-18084-exec-9 <==      Total: 0
09-03 16:14:39.706 ttp-nio-18084-exec-8 Ecare.selectEditorEcare
09-03 16:14:39.706 ttp-nio-18084-exec-8 ==>  Preparing: SELECT ecare_preface, coalesce(template_type,0) template_type, sender_nm, sender_email, receiver_nm , retmail_receiver, sender_tel, coalesce(retry_cnt,0) retry_cnt, mail_type, tmpl_ver , coalesce(preface_ver,0) preface_ver, coalesce(cover_ver,0) cover_ver, coalesce(handler_ver,0) handler_ver, coalesce(handler_seq,0) handler_seq FROM nvecaremsg WHERE ecare_no = ? 
09-03 16:14:39.706 ttp-nio-18084-exec-8 ==> Parameters: 22(Integer)
09-03 16:14:39.707 ttp-nio-18084-exec-8 <==      Total: 1
09-03 16:14:39.708 ttp-nio-18084-exec-8 DefaultHandler.selectHandlerUseList
09-03 16:14:39.708 ttp-nio-18084-exec-8 ==>  Preparing: SELECT seq, handle_nm, handle_desc FROM nvdefaulthandler c WHERE EXISTS ( SELECT 0 FROM nvecaremsg a, nvecarescenario b WHERE a.scenario_no = b.scenario_no AND a.channel_type = c.channel AND b.handler_type = c.handle_type AND a.ecare_no = ? AND c.service_type = (CASE WHEN a.sub_type ='N' THEN 'N' WHEN a.service_type ='S' THEN 'S' ELSE 'R' END ) AND c.handle_attr = (CASE WHEN a.mail_type ='NONE' THEN 'D' WHEN a.mail_type ='' THEN 'D' ELSE a.mail_type END ) ) ORDER BY seq 
09-03 16:14:39.708 ttp-nio-18084-exec-8 ==> Parameters: 22(Integer)
09-03 16:14:39.709 ttp-nio-18084-exec-6 EcMsgHandler.selectEcMsgHandlerByPk
09-03 16:14:39.709 ttp-nio-18084-exec-6 ==>  Preparing: SELECT ecare_no, type, appsource FROM nvecmsghandler WHERE ecare_no = ? 
09-03 16:14:39.709 ttp-nio-18084-exec-6 ==> Parameters: 22(Integer)
09-03 16:14:39.710 ttp-nio-18084-exec-6 <==      Total: 0
09-03 16:14:39.710 ttp-nio-18084-exec-8 <==      Total: 1
09-03 16:14:39.763 ttp-nio-18084-exec-1 EcareTemplate.selectEditorEcareTemplate
09-03 16:14:39.763 ttp-nio-18084-exec-1 ==>  Preparing: SELECT a.seg, a.template, a.kakao_buttons, CASE WHEN a.seg = ' ' THEN 0 ELSE 1 END as seg_no , CASE WHEN b.kakao_image_no IS NULL THEN '' ELSE (SELECT file_preview_path FROM nvmobilecontents WHERE conts_no = b.kakao_image_no) END as image_url , a.conts_no FROM nvecaretemplate a, nvecaremsg b WHERE a.ecare_no = b.ecare_no AND b.ecare_no = ? ORDER BY seg_no 
09-03 16:14:39.763 ttp-nio-18084-exec-1 ==> Parameters: 22(Integer)
09-03 16:14:39.765 ttp-nio-18084-exec-1 <==      Total: 2
09-03 16:14:40.264 ttp-nio-18084-exec-7 DefaultHandler.selectDefaultHandler
09-03 16:14:40.264 ttp-nio-18084-exec-7 ==>  Preparing: SELECT seq, handle_nm, handle_desc, service_type, channel, handle_attr, handle_type, user_id , to_char(to_date(create_dt, 'YYYY-MM-DD'),'YYYY-MM-DD') create_dt, to_char(to_date(create_tm, 'HH24:MI:SS'),'HH24:MI:SS') create_tm , handler, ab_test_yn, msg_type, 0 as total_rows FROM nvdefaulthandler WHERE seq = ? 
09-03 16:14:40.264 ttp-nio-18084-exec-7 ==> Parameters: 20(Integer)
09-03 16:14:40.312 ttp-nio-18084-exec-7 <==      Total: 1
09-03 16:14:44.485 ttp-nio-18084-exec-9 EcareMultipartFile.selectEditorEcareMultipartFileCount
09-03 16:14:44.485 ttp-nio-18084-exec-9 ==>  Preparing: SELECT count(*) FROM nvecaremultipartfile WHERE ecare_no = ? 
09-03 16:14:44.485 ttp-nio-18084-exec-9 ==> Parameters: 22(Integer)
09-03 16:14:44.486 ttp-nio-18084-exec-9 <==      Total: 1
09-03 16:14:44.487 ttp-nio-18084-exec-9 EcareMultipartFile.selectEditorEcareMultipartFileMax
09-03 16:14:44.487 ttp-nio-18084-exec-9 ==>  Preparing: SELECT coalesce(max(seq), 0) + 1 FROM nvecaremultipartfile WHERE ecare_no = ? 
09-03 16:14:44.487 ttp-nio-18084-exec-9 ==> Parameters: 22(Integer)
09-03 16:14:44.489 ttp-nio-18084-exec-9 <==      Total: 1
09-03 16:14:44.490 ttp-nio-18084-exec-9 EcareMultipartFile.insertEcareMultipartFile
09-03 16:14:44.490 ttp-nio-18084-exec-9 ==>  Preparing: INSERT INTO nvecaremultipartfile (ecare_no, seq, file_alias, file_path, file_size, file_name, file_type, secu_field, enc_yn) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) 
09-03 16:14:44.491 ttp-nio-18084-exec-9 ==> Parameters: 22(Integer), 1(Integer), dsfasd(String), SMAIL(String), 0(Long), dsfasd(String), SMAIL(String), daf(String), N(String)
09-03 16:14:44.591 ttp-nio-18084-exec-9 <==    Updates: 1
09-03 16:14:44.592 ttp-nio-18084-exec-9 Ecare.selectResendEcareNo
09-03 16:14:44.592 ttp-nio-18084-exec-9 ==>  Preparing: SELECT coalesce(resend_ecare_no,0) FROM nvecaremsg WHERE ecare_no = ? 
09-03 16:14:44.592 ttp-nio-18084-exec-9 ==> Parameters: 22(Integer)
09-03 16:14:44.593 ttp-nio-18084-exec-9 <==      Total: 1
09-03 16:14:44.594 ttp-nio-18084-exec-9 Semantic.selectSemanticListBySegmentNo
09-03 16:14:44.594 ttp-nio-18084-exec-9 ==>  Preparing: SELECT field_seq, field_nm, field_desc, coalesce(field_key,'') field_key FROM nvsemantic WHERE segment_no = ? ORDER BY field_seq 
09-03 16:14:44.594 ttp-nio-18084-exec-9 ==> Parameters: 0(Integer)
09-03 16:14:44.595 ttp-nio-18084-exec-9 <==      Total: 0
09-03 16:14:44.596 ttp-nio-18084-exec-9 Semantic.selectSemanticListBySegmentNo
09-03 16:14:44.597 ttp-nio-18084-exec-9 ==>  Preparing: SELECT field_seq, field_nm, field_desc, coalesce(field_key,'') field_key FROM nvsemantic WHERE segment_no = ? ORDER BY field_seq 
09-03 16:14:44.597 ttp-nio-18084-exec-9 ==> Parameters: 0(Integer)
09-03 16:14:44.597 ttp-nio-18084-exec-9 <==      Total: 0
09-03 16:14:44.598 ttp-nio-18084-exec-9 EcareTemplate.selectEditorEcareTemplate
09-03 16:14:44.598 ttp-nio-18084-exec-9 ==>  Preparing: SELECT a.seg, a.template, a.kakao_buttons, CASE WHEN a.seg = ' ' THEN 0 ELSE 1 END as seg_no , CASE WHEN b.kakao_image_no IS NULL THEN '' ELSE (SELECT file_preview_path FROM nvmobilecontents WHERE conts_no = b.kakao_image_no) END as image_url , a.conts_no FROM nvecaretemplate a, nvecaremsg b WHERE a.ecare_no = b.ecare_no AND b.ecare_no = ? ORDER BY seg_no 
09-03 16:14:44.598 ttp-nio-18084-exec-9 ==> Parameters: 22(Integer)
09-03 16:14:44.599 ttp-nio-18084-exec-9 <==      Total: 2
09-03 16:14:44.601 ttp-nio-18084-exec-9 EcareTemplateHistory.selectNextTemplateVersion
09-03 16:14:44.601 ttp-nio-18084-exec-9 ==>  Preparing: SELECT coalesce(max(tmpl_ver), 0) + 1 FROM nvecaretemplatehistory WHERE ecare_no = ? AND seg = ? 
09-03 16:14:44.601 ttp-nio-18084-exec-9 ==> Parameters: 22(Integer),  (String)
09-03 16:14:44.620 ttp-nio-18084-exec-9 <==      Total: 1
09-03 16:14:44.621 ttp-nio-18084-exec-9 EcareTemplateHistory.selectNextTemplateVersion
09-03 16:14:44.621 ttp-nio-18084-exec-9 ==>  Preparing: SELECT coalesce(max(tmpl_ver), 0) + 1 FROM nvecaretemplatehistory WHERE ecare_no = ? AND seg = ? 
09-03 16:14:44.621 ttp-nio-18084-exec-9 ==> Parameters: 22(Integer), SMAIL(String)
09-03 16:14:44.621 ttp-nio-18084-exec-9 <==      Total: 1
09-03 16:14:44.622 ttp-nio-18084-exec-9 EcMsgHandler.selectEcMsgHandlerByPk
09-03 16:14:44.622 ttp-nio-18084-exec-9 ==>  Preparing: SELECT ecare_no, type, appsource FROM nvecmsghandler WHERE ecare_no = ? 
09-03 16:14:44.622 ttp-nio-18084-exec-9 ==> Parameters: 22(Integer)
09-03 16:14:44.623 ttp-nio-18084-exec-9 <==      Total: 0
09-03 16:14:44.623 ttp-nio-18084-exec-9 EcMsgHandlerHistory.selectNextHandlerVersion
09-03 16:14:44.624 ttp-nio-18084-exec-9 ==>  Preparing: SELECT coalesce(max(handler_ver), 0) + 1 FROM nvecmsghandlerhistory WHERE ecare_no = ? 
09-03 16:14:44.624 ttp-nio-18084-exec-9 ==> Parameters: 22(Integer)
09-03 16:14:44.627 ttp-nio-18084-exec-9 <==      Total: 1
09-03 16:14:44.632 ttp-nio-18084-exec-9 Ecare.updateEditorEcare
09-03 16:14:44.632 ttp-nio-18084-exec-9 ==>  Preparing: UPDATE nvecaremsg SET template_type = ? , ecare_preface = ? , tmpl_ver = ? , handler_ver = ? , handler_seq = ? WHERE ecare_no = ? 
09-03 16:14:44.632 ttp-nio-18084-exec-9 ==> Parameters: 1(Integer), null, 1(Integer), 1(Integer), 20(Integer), 22(Integer)
09-03 16:14:44.659 ttp-nio-18084-exec-9 <==    Updates: 1
09-03 16:14:44.660 ttp-nio-18084-exec-9 EcMsgHandler.selectEditorEcareHandlerCount
09-03 16:14:44.660 ttp-nio-18084-exec-9 ==>  Preparing: SELECT count(*) FROM nvecmsghandler WHERE ecare_no = ? 
09-03 16:14:44.660 ttp-nio-18084-exec-9 ==> Parameters: 22(Integer)
09-03 16:14:44.661 ttp-nio-18084-exec-9 <==      Total: 1
09-03 16:14:44.662 ttp-nio-18084-exec-9 EcMsgHandler.insertEcMsgHandler
09-03 16:14:44.662 ttp-nio-18084-exec-9 ==>  Preparing: INSERT INTO nvecmsghandler (ecare_no, type, appsource) VALUES (?, ?, ?) 
09-03 16:14:44.662 ttp-nio-18084-exec-9 ==> Parameters: 22(Integer), G(String), import com.mnwise.ASE.agent.dbagent.QueryExecutor
import com.mnwise.ASE.agent.mailagent.AttachFileMaker
import com.mnwise.ASE.agent.mailagent.MailAgent5
import com.mnwise.ASE.agent.mailagent.MailBody2
import com.mnwise.ASE.agent.util.EmailTraceUtil
import com.mnwise.ASE.agent.util.ExceptionLogger
import com.mnwise.ASE.agent.util.TextReader
import com.mnwise.ASE.agent.util.ValueMapper
import com.mnwise.ASE.pscript.Message
import com.mnwise.common.jeonmun.JsonJeonmun
import com.mnwise.common.util.LoggerAid
import com.mnwise.common.util.StringUtil

ExceptionLogger exLogger = null
TextReader target = null
QueryExecutor queryExecutor = null
MailAgent5 mailAgent = null

try {
    exLogger = new ExceptionLogger(context)

    target = new TextReader(context)

    Message message = new Message(context)
    message.prepareGroovyTemplateWithCustomVariable("#{", "}", "<%=(jRecord.getString(\"", "\"))%>")

    String mailType = context.get("_MAIL_TYPE")
    // Mail Type이 보안메일(SMAIL) 혹은 PDF(HTMLPDF) 일경우 실행
    if (!"NONE".equals(mailType)) {
        message.prepareGroovyTemplate("ATTACH", context.get("_TEMPLATE_" + mailType))
    }

    ValueMapper mapper = new ValueMapper(context, target)

    queryExecutor = new QueryExecutor(context, target, message)
    queryExecutor.init()
    queryExecutor.executeDataQueryByOnce()

    mailAgent = new MailAgent5(context)
    AttachFileMaker maker = new AttachFileMaker(context, target, message)

    while (target.next()) {
        try {
            queryExecutor.executeDataQueryByTarget()

            MailBody2 body = new MailBody2(context)
            body.setFrom(target.getString("SENDER_NM"), target.getString("SENDER"))
            body.setTo(target.getString("RECEIVER_NM"), getEmailAddress(target))
            body.setSubject(target.getString("SUBJECT"))

            String msg
            if ("J".equals(target.getString("TMPL_TYPE"))) {
                message.setBindingProperty("record", target.getRecord())
                message.setBindingProperty("jRecord", new JsonJeonmun(context.get("data1").get("JONMUN")))

                msg = message.execGroovyTemplate()
            } else {
                msg = context.get("data1").get("JONMUN")
            }

            if (!"Y".equals(context.get("_PREVIEW_YN")) && "BODY".equals(context.get("_OPEN_TYPE"))) {
                msg = EmailTraceUtil.insertReceiveConfirmTag(msg, context)
            }
            body.addAlterContent("text/html", msg)

            List<Map> attachList = context.get("_ATTACH_LIST")
            for (Map fileInfo : attachList) {
                // 보안메일 내 첨부파일 타입은 제외
                if (!"SMAILATT".equals(fileInfo.get("file_type"))) {
                    body.addAttachment(mapper.apply(fileInfo.get("file_name")), maker.make(fileInfo))
                }
            }

            body.makeHeader()
            body.makeBody()

            // SLOT1 ~ 10 필드 개인화
            Map additionalDataMap = new HashMap()
            for (int i = 1; i <= 10; i++) {
                additionalDataMap.put("SLOT" + i, mapper.apply(context.get("_SLOT" + i + "_FIELD")))
            }

            mailAgent.setAdditionalDataMap(additionalDataMap)
            mailAgent.setMailFrom(context.get("_RETMAIL_RECEIVER"))
            mailAgent.setRcpt(body.getRcpt(), target.getString("RECEIVER_ID"), body.getName())
            mailAgent.setRealtimeAcceptSeq(target.getString("SEQ"))
            mailAgent.setRequestInfo(target.getString("REQ_DEPT_ID"), target.getString("REQ_USER_ID"))
            mailAgent.send(body)

            context.put("_SEND_FG", "E")
            context.put("_ERROR_MESSAGE", "")
        } catch (Exception e) {
            context.put("_SEND_FG", "O")
            context.put("_ERROR_MESSAGE", StringUtil.defaultIfBlank(e.getMessage(), "Error Message is null"))
            context.put("_EXCEPTION", e)
            exLogger.write(target.toString(), e)

            if (!"Y".equals(context.get("_PREVIEW_YN"))) {
                String errMsg = LoggerAid.onlyOneLine(e).substring(0, 125)
                exLogger.insertSendLog(target, target.getString("RECEIVER"), target.getString("RECEIVER_ID"), target.getString("RECEIVER_NM"), errMsg, target.getString("SEQ"), target.getString("REQ_DEPT_ID"))
            }
        } finally {
            queryExecutor.executeResultQueryByTarget()
        }
    }

    queryExecutor.executeResultQueryByOnce()
} finally {
    if (exLogger != null) {
        exLogger.close()
    }
    if (target != null) {
        target.close()
    }
    if (queryExecutor != null) {
        queryExecutor.close()
    }
    if (mailAgent != null) {
        mailAgent.close()
    }
}

/*
 * 시뮬레이션 모드("SIMUL")면 발송되지 않는 연락처로 변경
 */
private String getEmailAddress(TextReader target) {
    if ("SIMUL".equals(context.get("_DEPLOY_TYPE"))) {
        return "SIMULATION"
    } else {
        return target.getString("RECEIVER")
    }
}
(String)
09-03 16:14:44.735 ttp-nio-18084-exec-9 <==    Updates: 1
09-03 16:14:44.742 ttp-nio-18084-exec-9 EcareTemplate.updateEditorEcareTemplate
09-03 16:14:44.742 ttp-nio-18084-exec-9 ==>  Preparing: UPDATE nvecaretemplate SET template = ?, kakao_buttons = ? WHERE ecare_no = ? AND seg = ? 
09-03 16:14:44.743 ttp-nio-18084-exec-9 ==> Parameters: cv(String),  (String), 22(Integer),  (String)
09-03 16:14:44.744 ttp-nio-18084-exec-9 <==    Updates: 1
09-03 16:14:44.745 ttp-nio-18084-exec-9 EcareTemplate.updateEditorEcareTemplate
09-03 16:14:44.746 ttp-nio-18084-exec-9 ==>  Preparing: UPDATE nvecaretemplate SET template = ?, kakao_buttons = ? WHERE ecare_no = ? AND seg = ? 
09-03 16:14:44.746 ttp-nio-18084-exec-9 ==> Parameters: adsf(String),  (String), 22(Integer), SMAIL(String)
09-03 16:14:44.747 ttp-nio-18084-exec-9 <==    Updates: 1
09-03 16:14:44.748 ttp-nio-18084-exec-9 EcMsgHandlerHistory.insertEcareHandlerHistory
09-03 16:14:44.748 ttp-nio-18084-exec-9 ==>  Preparing: INSERT INTO nvecmsghandlerhistory (ecare_no, user_id, lastupdate_dt, lastupdate_tm, type, appsource, history_msg, handler_ver) VALUES (?, ?, ?, ?, ?, ?, ?, ?) 
09-03 16:14:44.748 ttp-nio-18084-exec-9 ==> Parameters: 22(Integer), admin(String), 20210903(String), 161444(String), G(String), import com.mnwise.ASE.agent.dbagent.QueryExecutor
import com.mnwise.ASE.agent.mailagent.AttachFileMaker
import com.mnwise.ASE.agent.mailagent.MailAgent5
import com.mnwise.ASE.agent.mailagent.MailBody2
import com.mnwise.ASE.agent.util.EmailTraceUtil
import com.mnwise.ASE.agent.util.ExceptionLogger
import com.mnwise.ASE.agent.util.TextReader
import com.mnwise.ASE.agent.util.ValueMapper
import com.mnwise.ASE.pscript.Message
import com.mnwise.common.jeonmun.JsonJeonmun
import com.mnwise.common.util.LoggerAid
import com.mnwise.common.util.StringUtil

ExceptionLogger exLogger = null
TextReader target = null
QueryExecutor queryExecutor = null
MailAgent5 mailAgent = null

try {
    exLogger = new ExceptionLogger(context)

    target = new TextReader(context)

    Message message = new Message(context)
    message.prepareGroovyTemplateWithCustomVariable("#{", "}", "<%=(jRecord.getString(\"", "\"))%>")

    String mailType = context.get("_MAIL_TYPE")
    // Mail Type이 보안메일(SMAIL) 혹은 PDF(HTMLPDF) 일경우 실행
    if (!"NONE".equals(mailType)) {
        message.prepareGroovyTemplate("ATTACH", context.get("_TEMPLATE_" + mailType))
    }

    ValueMapper mapper = new ValueMapper(context, target)

    queryExecutor = new QueryExecutor(context, target, message)
    queryExecutor.init()
    queryExecutor.executeDataQueryByOnce()

    mailAgent = new MailAgent5(context)
    AttachFileMaker maker = new AttachFileMaker(context, target, message)

    while (target.next()) {
        try {
            queryExecutor.executeDataQueryByTarget()

            MailBody2 body = new MailBody2(context)
            body.setFrom(target.getString("SENDER_NM"), target.getString("SENDER"))
            body.setTo(target.getString("RECEIVER_NM"), getEmailAddress(target))
            body.setSubject(target.getString("SUBJECT"))

            String msg
            if ("J".equals(target.getString("TMPL_TYPE"))) {
                message.setBindingProperty("record", target.getRecord())
                message.setBindingProperty("jRecord", new JsonJeonmun(context.get("data1").get("JONMUN")))

                msg = message.execGroovyTemplate()
            } else {
                msg = context.get("data1").get("JONMUN")
            }

            if (!"Y".equals(context.get("_PREVIEW_YN")) && "BODY".equals(context.get("_OPEN_TYPE"))) {
                msg = EmailTraceUtil.insertReceiveConfirmTag(msg, context)
            }
            body.addAlterContent("text/html", msg)

            List<Map> attachList = context.get("_ATTACH_LIST")
            for (Map fileInfo : attachList) {
                // 보안메일 내 첨부파일 타입은 제외
                if (!"SMAILATT".equals(fileInfo.get("file_type"))) {
                    body.addAttachment(mapper.apply(fileInfo.get("file_name")), maker.make(fileInfo))
                }
            }

            body.makeHeader()
            body.makeBody()

            // SLOT1 ~ 10 필드 개인화
            Map additionalDataMap = new HashMap()
            for (int i = 1; i <= 10; i++) {
                additionalDataMap.put("SLOT" + i, mapper.apply(context.get("_SLOT" + i + "_FIELD")))
            }

            mailAgent.setAdditionalDataMap(additionalDataMap)
            mailAgent.setMailFrom(context.get("_RETMAIL_RECEIVER"))
            mailAgent.setRcpt(body.getRcpt(), target.getString("RECEIVER_ID"), body.getName())
            mailAgent.setRealtimeAcceptSeq(target.getString("SEQ"))
            mailAgent.setRequestInfo(target.getString("REQ_DEPT_ID"), target.getString("REQ_USER_ID"))
            mailAgent.send(body)

            context.put("_SEND_FG", "E")
            context.put("_ERROR_MESSAGE", "")
        } catch (Exception e) {
            context.put("_SEND_FG", "O")
            context.put("_ERROR_MESSAGE", StringUtil.defaultIfBlank(e.getMessage(), "Error Message is null"))
            context.put("_EXCEPTION", e)
            exLogger.write(target.toString(), e)

            if (!"Y".equals(context.get("_PREVIEW_YN"))) {
                String errMsg = LoggerAid.onlyOneLine(e).substring(0, 125)
                exLogger.insertSendLog(target, target.getString("RECEIVER"), target.getString("RECEIVER_ID"), target.getString("RECEIVER_NM"), errMsg, target.getString("SEQ"), target.getString("REQ_DEPT_ID"))
            }
        } finally {
            queryExecutor.executeResultQueryByTarget()
        }
    }

    queryExecutor.executeResultQueryByOnce()
} finally {
    if (exLogger != null) {
        exLogger.close()
    }
    if (target != null) {
        target.close()
    }
    if (queryExecutor != null) {
        queryExecutor.close()
    }
    if (mailAgent != null) {
        mailAgent.close()
    }
}

/*
 * 시뮬레이션 모드("SIMUL")면 발송되지 않는 연락처로 변경
 */
private String getEmailAddress(TextReader target) {
    if ("SIMUL".equals(context.get("_DEPLOY_TYPE"))) {
        return "SIMULATION"
    } else {
        return target.getString("RECEIVER")
    }
}
(String), (String), 1(Integer)
09-03 16:14:44.840 ttp-nio-18084-exec-9 <==    Updates: 1
09-03 16:14:44.841 ttp-nio-18084-exec-9 EcareTemplateHistory.insertEcareTemplateHistory
09-03 16:14:44.841 ttp-nio-18084-exec-9 ==>  Preparing: INSERT INTO nvecaretemplatehistory (ecare_no, user_id, lastupdate_dt, lastupdate_tm, seg, template, history_msg, tmpl_ver, kakao_buttons, conts_no) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ? , ?) 
09-03 16:14:44.841 ttp-nio-18084-exec-9 ==> Parameters: 22(Integer), admin(String), 20210903(String), 161444(String),  (String), cv(String), (String), 1(Integer),  (String), 0(Integer)
09-03 16:14:45.010 ttp-nio-18084-exec-9 <==    Updates: 1
09-03 16:14:45.010 ttp-nio-18084-exec-9 EcareTemplateHistory.insertEcareTemplateHistory
09-03 16:14:45.010 ttp-nio-18084-exec-9 ==>  Preparing: INSERT INTO nvecaretemplatehistory (ecare_no, user_id, lastupdate_dt, lastupdate_tm, seg, template, history_msg, tmpl_ver, kakao_buttons, conts_no) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ? , ?) 
09-03 16:14:45.010 ttp-nio-18084-exec-9 ==> Parameters: 22(Integer), admin(String), 20210903(String), 161444(String), SMAIL(String), adsf(String), (String), 1(Integer),  (String), 0(Integer)
09-03 16:14:45.011 ttp-nio-18084-exec-9 <==    Updates: 1
09-03 16:37:39.446 ttp-nio-18084-exec-6 EcareScenario.getEcareListTotalCount
09-03 16:37:39.446 ttp-nio-18084-exec-6 ==>  Preparing: SELECT count(*) FROM nvecarescenario a, nvecaremsgtag b, nvecaremsg c WHERE a.tag_no = b.tag_no AND a.scenario_no = c.scenario_no 
09-03 16:37:39.446 ttp-nio-18084-exec-6 ==> Parameters: 
09-03 16:37:39.447 ttp-nio-18084-exec-6 <==      Total: 1
09-03 16:37:39.447 ttp-nio-18084-exec-6 EcareScenario.getEcareList
09-03 16:37:39.448 ttp-nio-18084-exec-6 ==>  Preparing: SELECT coalesce(x.scenario_no,0) scenario_no, user_id, grp_cd, scenario_nm, scenario_type , create_dt, decode(l_rank, 1, chrg_nm, '') chrg_nm, decode(l_rank, 1, brc_nm, '') brc_nm, coalesce(x.ecare_no,0) ecare_no, channel_type , ecare_sts, relation_type, coalesce(depth_no,0) depth_no, ecare_level, service_type , sub_type, segment_no, relation_tree, segment_size target_cnt, invoke_tm, sendstart_dt , (SELECT name_kor FROM nvuser WHERE user_id = x.user_id) name_kor , (SELECT grp_nm FROM nvusergrp WHERE grp_cd = x.grp_cd) grp_nm , (SELECT val FROM nv_cd_mst WHERE cd_cat = '200111' AND cd = x.ecare_sts AND lang = ?) ecare_sts_nm , (SELECT val FROM nv_cd_mst WHERE cd_cat = '100221' AND cd = x.relation_type AND lang = ?) relation_type_nm , (SELECT val FROM nv_cd_mst WHERE cd_cat = '200131' AND cd = (x.service_type || x.sub_type) AND lang = ?) service_type_nm , (SELECT val FROM nv_cd_mst WHERE cd_cat = '200141' AND cd = x.sub_type AND lang = ?) sub_type_nm FROM ( SELECT row_number() OVER(PARTITION BY a.scenario_no ORDER BY a.scenario_no DESC, c.relation_tree, c.ecare_no DESC) l_rank , row_number() OVER(ORDER BY a.scenario_no DESC, c.relation_tree, c.ecare_no) rnum , a.scenario_no, a.user_id, a.grp_cd, a.scenario_nm, a.scenario_type, a.create_dt, a.chrg_nm, a.brc_nm, c.ecare_no, c.channel_type , c.ecare_sts, c.relation_type, c.depth_no, c.ecare_level, c.service_type, c.sub_type, c.segment_no, c.relation_tree , d.segment_size, e.invoke_tm, e.sendstart_dt FROM nvecarescenario a, nvecaremsgtag b, nvecaremsg c LEFT OUTER JOIN nvsegment d ON c.segment_no = d.segment_no LEFT OUTER JOIN nvecmschedule e ON c.ecmschedule_no = e.ecmschedule_no WHERE a.tag_no = b.tag_no AND a.scenario_no = c.scenario_no ORDER BY a.scenario_no DESC, c.relation_tree ) x WHERE rnum >= ((? - 1) * ? + 1) AND rnum <= ? * ? ORDER BY scenario_no DESC, relation_tree, ecare_no 
09-03 16:37:39.448 ttp-nio-18084-exec-6 ==> Parameters: ko(String), ko(String), ko(String), ko(String), 1(Integer), 10(Integer), 1(Integer), 10(Integer)
09-03 16:37:39.451 ttp-nio-18084-exec-6 <==      Total: 10
09-03 16:37:39.451 ttp-nio-18084-exec-6 CdMst.getCdMstList
09-03 16:37:39.451 ttp-nio-18084-exec-6 ==>  Preparing: SELECT cd_cat, cd, lang, par_cd_cat, val, cd_desc, use_col, use_yn, reg_dtm, mod_dtm, cd_ord FROM nv_cd_mst WHERE cd_cat = ? AND lang = ? 
09-03 16:37:39.452 ttp-nio-18084-exec-6 ==> Parameters: 200111(String), ko(String)
09-03 16:37:39.452 ttp-nio-18084-exec-6 <==      Total: 5
09-03 16:37:39.453 ttp-nio-18084-exec-6 CdMst.getCdMstList
09-03 16:37:39.453 ttp-nio-18084-exec-6 ==>  Preparing: SELECT cd_cat, cd, lang, par_cd_cat, val, cd_desc, use_col, use_yn, reg_dtm, mod_dtm, cd_ord FROM nv_cd_mst WHERE cd_cat = ? AND lang = ? 
09-03 16:37:39.453 ttp-nio-18084-exec-6 ==> Parameters: 200131(String), ko(String)
09-03 16:37:39.453 ttp-nio-18084-exec-6 <==      Total: 3
09-03 16:37:41.562 ttp-nio-18084-exec-8 EcareScenario.getEcareListTotalCount
09-03 16:37:41.562 ttp-nio-18084-exec-8 ==>  Preparing: SELECT count(*) FROM nvecarescenario a, nvecaremsgtag b, nvecaremsg c WHERE a.tag_no = b.tag_no AND a.scenario_no = c.scenario_no 
09-03 16:37:41.563 ttp-nio-18084-exec-8 ==> Parameters: 
09-03 16:37:41.564 ttp-nio-18084-exec-8 <==      Total: 1
09-03 16:37:41.565 ttp-nio-18084-exec-8 EcareScenario.getEcareList
09-03 16:37:41.565 ttp-nio-18084-exec-8 ==>  Preparing: SELECT coalesce(x.scenario_no,0) scenario_no, user_id, grp_cd, scenario_nm, scenario_type , create_dt, decode(l_rank, 1, chrg_nm, '') chrg_nm, decode(l_rank, 1, brc_nm, '') brc_nm, coalesce(x.ecare_no,0) ecare_no, channel_type , ecare_sts, relation_type, coalesce(depth_no,0) depth_no, ecare_level, service_type , sub_type, segment_no, relation_tree, segment_size target_cnt, invoke_tm, sendstart_dt , (SELECT name_kor FROM nvuser WHERE user_id = x.user_id) name_kor , (SELECT grp_nm FROM nvusergrp WHERE grp_cd = x.grp_cd) grp_nm , (SELECT val FROM nv_cd_mst WHERE cd_cat = '200111' AND cd = x.ecare_sts AND lang = ?) ecare_sts_nm , (SELECT val FROM nv_cd_mst WHERE cd_cat = '100221' AND cd = x.relation_type AND lang = ?) relation_type_nm , (SELECT val FROM nv_cd_mst WHERE cd_cat = '200131' AND cd = (x.service_type || x.sub_type) AND lang = ?) service_type_nm , (SELECT val FROM nv_cd_mst WHERE cd_cat = '200141' AND cd = x.sub_type AND lang = ?) sub_type_nm FROM ( SELECT row_number() OVER(PARTITION BY a.scenario_no ORDER BY a.scenario_no DESC, c.relation_tree, c.ecare_no DESC) l_rank , row_number() OVER(ORDER BY a.scenario_no DESC, c.relation_tree, c.ecare_no) rnum , a.scenario_no, a.user_id, a.grp_cd, a.scenario_nm, a.scenario_type, a.create_dt, a.chrg_nm, a.brc_nm, c.ecare_no, c.channel_type , c.ecare_sts, c.relation_type, c.depth_no, c.ecare_level, c.service_type, c.sub_type, c.segment_no, c.relation_tree , d.segment_size, e.invoke_tm, e.sendstart_dt FROM nvecarescenario a, nvecaremsgtag b, nvecaremsg c LEFT OUTER JOIN nvsegment d ON c.segment_no = d.segment_no LEFT OUTER JOIN nvecmschedule e ON c.ecmschedule_no = e.ecmschedule_no WHERE a.tag_no = b.tag_no AND a.scenario_no = c.scenario_no ORDER BY a.scenario_no DESC, c.relation_tree ) x WHERE rnum >= ((? - 1) * ? + 1) AND rnum <= ? * ? ORDER BY scenario_no DESC, relation_tree, ecare_no 
09-03 16:37:41.565 ttp-nio-18084-exec-8 ==> Parameters: ko(String), ko(String), ko(String), ko(String), 2(Integer), 10(Integer), 2(Integer), 10(Integer)
09-03 16:37:41.568 ttp-nio-18084-exec-8 <==      Total: 10
09-03 16:37:41.568 ttp-nio-18084-exec-8 CdMst.getCdMstList
09-03 16:37:41.568 ttp-nio-18084-exec-8 ==>  Preparing: SELECT cd_cat, cd, lang, par_cd_cat, val, cd_desc, use_col, use_yn, reg_dtm, mod_dtm, cd_ord FROM nv_cd_mst WHERE cd_cat = ? AND lang = ? 
09-03 16:37:41.568 ttp-nio-18084-exec-8 ==> Parameters: 200111(String), ko(String)
09-03 16:37:41.569 ttp-nio-18084-exec-8 <==      Total: 5
09-03 16:37:41.570 ttp-nio-18084-exec-8 CdMst.getCdMstList
09-03 16:37:41.570 ttp-nio-18084-exec-8 ==>  Preparing: SELECT cd_cat, cd, lang, par_cd_cat, val, cd_desc, use_col, use_yn, reg_dtm, mod_dtm, cd_ord FROM nv_cd_mst WHERE cd_cat = ? AND lang = ? 
09-03 16:37:41.570 ttp-nio-18084-exec-8 ==> Parameters: 200131(String), ko(String)
09-03 16:37:41.570 ttp-nio-18084-exec-8 <==      Total: 3
09-03 16:37:42.703 ttp-nio-18084-exec-1 Ecare.getEcareChannelInfo
09-03 16:37:42.704 ttp-nio-18084-exec-1 ==>  Preparing: SELECT (CASE channel_type WHEN 'M' THEN 4 WHEN 'S' THEN 3 WHEN 'T' THEN 2 WHEN 'F' THEN 1 END) as seq, ecare_no, channel_type, depth_no FROM nvecaremsg WHERE scenario_no = ? ORDER BY seq DESC, depth_no 
09-03 16:37:42.704 ttp-nio-18084-exec-1 ==> Parameters: 1(Integer)
09-03 16:37:42.704 ttp-nio-18084-exec-1 <==      Total: 1
09-03 16:37:42.706 ttp-nio-18084-exec-1 EcareScenario.selectEcareScenarioDetailInfo
09-03 16:37:42.706 ttp-nio-18084-exec-1 ==>  Preparing: SELECT a.scenario_no, a.scenario_nm, a.scenario_desc, a.scenario_type, a.finish_yn, a.finish_dt, coalesce(a.tag_no,0) tag_no, a.handler_type, b.name_kor, c.tag_nm , d.ecare_no, d.user_id, d.grp_cd, d.segment_no, d.ecare_nm, d.ecare_preface, d.ecare_sts, d.create_dt, d.create_tm, d.lastupdate_dt , d.lastupdate_tm, d.campaign_type, d.template_type, coalesce(d.ecmschedule_no,0) ecmschedule_no, d.sender_nm, d.sender_email, d.sending_mode, coalesce(d.retry_cnt,1) retry_cnt, d.receiver_nm, d.sender_tel , d.retmail_receiver, d.ecare_class, d.relation_type, d.relation_tree, d.channel_type, d.service_type, d.ecare_level, d.sub_type, d.depth_no, d.verify_b4_send , d.template_sender_key, d.kakao_sender_key, d.kakao_tmpl_cd, coalesce(d.kakao_image_no,0) kakao_image_no, d.failback_send_yn, d.failback_subject, coalesce(d.handler_seq,0) handler_seq , coalesce(e.term_type,'1') term_type, f.segment_nm, f.segment_size, g.sender_nm as env_sender_nm, g.sender_email as env_sender_email , g.receiver_nm as env_receiver_nm, g.sender_tel as env_sender_tel, g.retmail_receiver as env_retmail_receiver, g.sender_fax as env_sender_fax, g.receiver_fax as env_receiver_fax , (SELECT val FROM nv_cd_mst WHERE cd_cat = '200111' AND cd = d.ecare_sts AND lang = ?) as ecare_sts_nm , a.chrg_nm, a.brc_nm , d.slot1_field, d.slot2_field, d.slot3_field, d.slot4_field, d.slot5_field , d.slot6_field, d.slot7_field, d.slot8_field, d.slot9_field, d.slot10_field , d.deploy_type , d.open_type, d.mail_type, d.req_dept_id FROM nvecarescenario a, nvuser b, nvecaremsgtag c, nvecaremsg d LEFT OUTER JOIN nvecaretraceinfo e ON d.ecare_no = e.ecare_no LEFT OUTER JOIN nvsegment f ON d.segment_no = f.segment_no LEFT OUTER JOIN nvusermailinfo g ON d.user_id = g.user_id WHERE a.grp_cd = b.grp_cd AND a.user_id = b.user_id AND a.tag_no = c.tag_no AND a.scenario_no = d.scenario_no AND a.scenario_no = ? AND d.ecare_no = ? 
09-03 16:37:42.706 ttp-nio-18084-exec-1 ==> Parameters: ko(String), 1(Integer), 1(Integer)
09-03 16:37:42.707 ttp-nio-18084-exec-1 <==      Total: 1
09-03 16:37:42.707 ttp-nio-18084-exec-1 Ecare.updateEcare2StepInfo
09-03 16:37:42.707 ttp-nio-18084-exec-1 ==>  Preparing: UPDATE nvecaremsg SET lastupdate_dt = to_char(sysdate, 'yyyyMMdd') WHERE ecare_no = ? 
09-03 16:37:42.707 ttp-nio-18084-exec-1 ==> Parameters: 1(Integer)
09-03 16:37:42.709 ttp-nio-18084-exec-1 <==    Updates: 1
09-03 16:37:42.710 ttp-nio-18084-exec-1 EcmSchedule.selectEcmScheduleByPk
09-03 16:37:42.710 ttp-nio-18084-exec-1 ==>  Preparing: SELECT coalesce(ecmschedule_no,0) ecmschedule_no, ecmschedule_nm, cycle_cd, sendstart_dt, sendend_dt, invoke_tm, invoke_every_min , coalesce(day,0) as day, coalesce(sche_weeknumber,0) sche_weeknumber, weekday, start_tm, end_tm, term_min FROM nvecmschedule WHERE ecmschedule_no = ? 
09-03 16:37:42.710 ttp-nio-18084-exec-1 ==> Parameters: 1(Integer)
09-03 16:37:42.710 ttp-nio-18084-exec-1 <==      Total: 1
09-03 16:37:42.711 ttp-nio-18084-exec-1 CycleItem.selectCycleItemInfo
09-03 16:37:42.711 ttp-nio-18084-exec-1 ==>  Preparing: SELECT cycleitem, check_yn FROM nvcycleitem WHERE ecmschedule_no = ? 
09-03 16:37:42.711 ttp-nio-18084-exec-1 ==> Parameters: 1(Integer)
09-03 16:37:42.712 ttp-nio-18084-exec-1 <==      Total: 0
09-03 16:37:42.713 ttp-nio-18084-exec-1 EcareMultipartFile.selectEditorEcareMultipartFile
09-03 16:37:42.713 ttp-nio-18084-exec-1 ==>  Preparing: SELECT file_alias, file_path, file_size, file_name, file_type, secu_field, enc_yn FROM nvecaremultipartfile WHERE ecare_no = ? 
09-03 16:37:42.713 ttp-nio-18084-exec-1 ==> Parameters: 1(Integer)
09-03 16:37:42.714 ttp-nio-18084-exec-1 <==      Total: 0
09-03 16:37:42.714 ttp-nio-18084-exec-1 AddQuery.selectAddQuery
09-03 16:37:42.714 ttp-nio-18084-exec-1 ==>  Preparing: SELECT ecare_no, query_seq, query_type, result_id, dbinfo_seq, query, execute_type FROM nvaddquery WHERE ecare_no= ? 
09-03 16:37:42.714 ttp-nio-18084-exec-1 ==> Parameters: 1(Integer)
09-03 16:37:42.715 ttp-nio-18084-exec-1 <==      Total: 2
09-03 16:37:42.715 ttp-nio-18084-exec-1 EcareScenario.selectOmniChannelEcares
09-03 16:37:42.715 ttp-nio-18084-exec-1 ==>  Preparing: SELECT a.scenario_no, a.scenario_nm, coalesce(b.ecare_no,0) ecare_no, b.depth_no, b.channel_type, b.relation_type , (SELECT val FROM nv_cd_mst WHERE cd_cat = '200111' AND cd = b.ecare_sts AND lang = ?) ecare_sts_nm , c.segment_size as target_cnt FROM nvecarescenario a, nvecaremsg b LEFT OUTER JOIN nvsegment c ON b.segment_no = c.segment_no WHERE a.scenario_no = b.scenario_no AND a.scenario_no = ( SELECT scenario_no FROM nvecaremsg WHERE ecare_no = ? ) AND b.relation_type IN ('N','S','F','O') ORDER BY rpad( b.relation_tree , (SELECT max(depth_no) FROM nvecaremsg WHERE scenario_no = (SELECT scenario_no FROM nvecaremsg WHERE ecare_no = ?)) , 0 ), b.ecare_no 
09-03 16:37:42.715 ttp-nio-18084-exec-1 ==> Parameters: ko(String), 1(Integer), 1(Integer)
09-03 16:37:42.716 ttp-nio-18084-exec-1 <==      Total: 1
09-03 16:37:42.717 ttp-nio-18084-exec-1 ServerInfo.selectServerInfo
09-03 16:37:42.717 ttp-nio-18084-exec-1 ==>  Preparing: SELECT host_nm, port_no, driver_nm, driver_dsn, dbuser_id, dbpassword, openclick_path, survey_path, link_path, htmlmaker_path , openimage_path, duration_path, reject_path, smtp_ip, smtp_port, fula_ip, fula_port, ftp_yn, ftp_user_id, ftp_password , lastupdate_dt, editor_id, ret_domain, coalesce(retry_cnt,0) retry_cnt, b4_send_approve_yn, b4_send_verify_yn, b4_real_send_test_send_yn, ase_link_merge_param, ase_reject_merge_param, ase_open_scriptlet , groovy_link_merge_param, groovy_reject_merge_param, groovy_open_scriptlet, resend_include_returnmail_yn, resend_include_mail_key_yn, resend_error_cd, fax_resend_error_cd, sms_resend_error_cd, altalk_resend_error_cd, push_resend_error_cd , spool_preserve_period, log_preserve_period, result_file_download_yn, sucs_result_file_download_yn, kakao_template_last_sync_dtm , (SELECT mintime FROM nvdurationinfo WHERE durationinfo_cd = '01') as duration_time FROM nvserverinfo 
09-03 16:37:42.717 ttp-nio-18084-exec-1 ==> Parameters: 
09-03 16:37:42.717 ttp-nio-18084-exec-1 <==      Total: 1
09-03 16:37:42.718 ttp-nio-18084-exec-1 DbInfo.selectDbInfoList
09-03 16:37:42.718 ttp-nio-18084-exec-1 ==>  Preparing: SELECT dbinfo_seq, driver_nm, server_nm, driver_dsn, dbuser_id, dbpassword, encoding, decoding, dbkind, testquery FROM nvdbinfo 
09-03 16:37:42.718 ttp-nio-18084-exec-1 ==> Parameters: 
09-03 16:37:42.718 ttp-nio-18084-exec-1 <==      Total: 1
09-03 16:37:43.278 ttp-nio-18084-exec-6 Ecare.selectEditorEcare
09-03 16:37:43.278 ttp-nio-18084-exec-6 ==>  Preparing: SELECT ecare_preface, coalesce(template_type,0) template_type, sender_nm, sender_email, receiver_nm , retmail_receiver, sender_tel, coalesce(retry_cnt,0) retry_cnt, mail_type, tmpl_ver , coalesce(preface_ver,0) preface_ver, coalesce(cover_ver,0) cover_ver, coalesce(handler_ver,0) handler_ver, coalesce(handler_seq,0) handler_seq FROM nvecaremsg WHERE ecare_no = ? 
09-03 16:37:43.278 ttp-nio-18084-exec-6 ==> Parameters: 1(Integer)
09-03 16:37:43.279 ttp-nio-18084-exec-6 <==      Total: 1
09-03 16:37:43.295 ttp-nio-18084-exec-8 Ecare.selectSubEcareList
09-03 16:37:43.295 ttp-nio-18084-exec-8 ==>  Preparing: SELECT ecare_no, scenario_no, ecare_nm, channel_type, depth_no, relation_type FROM nvecaremsg WHERE scenario_no = ? AND depth_no = ? AND relation_tree LIKE ((SELECT relation_tree FROM nvecaremsg WHERE ecare_no = ?) || '%') 
09-03 16:37:43.295 ttp-nio-18084-exec-8 ==> Parameters: 1(Integer), 2(Integer), 1(Integer)
09-03 16:37:43.296 ttp-nio-18084-exec-8 <==      Total: 0
09-03 16:37:43.326 ttp-nio-18084-exec-1 Ecare.selectEditorEcare
09-03 16:37:43.326 ttp-nio-18084-exec-1 ==>  Preparing: SELECT ecare_preface, coalesce(template_type,0) template_type, sender_nm, sender_email, receiver_nm , retmail_receiver, sender_tel, coalesce(retry_cnt,0) retry_cnt, mail_type, tmpl_ver , coalesce(preface_ver,0) preface_ver, coalesce(cover_ver,0) cover_ver, coalesce(handler_ver,0) handler_ver, coalesce(handler_seq,0) handler_seq FROM nvecaremsg WHERE ecare_no = ? 
09-03 16:37:43.326 ttp-nio-18084-exec-9 EcMsgHandler.selectEcMsgHandlerByPk
09-03 16:37:43.326 ttp-nio-18084-exec-9 ==>  Preparing: SELECT ecare_no, type, appsource FROM nvecmsghandler WHERE ecare_no = ? 
09-03 16:37:43.326 ttp-nio-18084-exec-9 ==> Parameters: 1(Integer)
09-03 16:37:43.326 ttp-nio-18084-exec-1 ==> Parameters: 1(Integer)
09-03 16:37:43.327 ttp-nio-18084-exec-1 <==      Total: 1
09-03 16:37:43.327 ttp-nio-18084-exec-9 <==      Total: 0
09-03 16:37:43.328 ttp-nio-18084-exec-1 DefaultHandler.selectHandlerUseList
09-03 16:37:43.329 ttp-nio-18084-exec-1 ==>  Preparing: SELECT seq, handle_nm, handle_desc FROM nvdefaulthandler c WHERE EXISTS ( SELECT 0 FROM nvecaremsg a, nvecarescenario b WHERE a.scenario_no = b.scenario_no AND a.channel_type = c.channel AND b.handler_type = c.handle_type AND a.ecare_no = ? AND c.service_type = (CASE WHEN a.sub_type ='N' THEN 'N' WHEN a.service_type ='S' THEN 'S' ELSE 'R' END ) AND c.handle_attr = (CASE WHEN a.mail_type ='NONE' THEN 'D' WHEN a.mail_type ='' THEN 'D' ELSE a.mail_type END ) ) ORDER BY seq 
09-03 16:37:43.329 ttp-nio-18084-exec-1 ==> Parameters: 1(Integer)
09-03 16:37:43.330 ttp-nio-18084-exec-1 <==      Total: 1
09-03 16:37:43.387 ttp-nio-18084-exec-7 EcareTemplate.selectEditorEcareTemplate
09-03 16:37:43.387 ttp-nio-18084-exec-7 ==>  Preparing: SELECT a.seg, a.template, a.kakao_buttons, CASE WHEN a.seg = ' ' THEN 0 ELSE 1 END as seg_no , CASE WHEN b.kakao_image_no IS NULL THEN '' ELSE (SELECT file_preview_path FROM nvmobilecontents WHERE conts_no = b.kakao_image_no) END as image_url , a.conts_no FROM nvecaretemplate a, nvecaremsg b WHERE a.ecare_no = b.ecare_no AND b.ecare_no = ? ORDER BY seg_no 
09-03 16:37:43.388 ttp-nio-18084-exec-7 ==> Parameters: 1(Integer)
09-03 16:37:43.389 ttp-nio-18084-exec-7 <==      Total: 1
09-03 16:37:43.888 ttp-nio-18084-exec-6 DefaultHandler.selectDefaultHandler
09-03 16:37:43.888 ttp-nio-18084-exec-6 ==>  Preparing: SELECT seq, handle_nm, handle_desc, service_type, channel, handle_attr, handle_type, user_id , to_char(to_date(create_dt, 'YYYY-MM-DD'),'YYYY-MM-DD') create_dt, to_char(to_date(create_tm, 'HH24:MI:SS'),'HH24:MI:SS') create_tm , handler, ab_test_yn, msg_type, 0 as total_rows FROM nvdefaulthandler WHERE seq = ? 
09-03 16:37:43.888 ttp-nio-18084-exec-6 ==> Parameters: 22(Integer)
09-03 16:37:43.907 ttp-nio-18084-exec-6 <==      Total: 1
09-03 16:37:46.258 ttp-nio-18084-exec-8 ServerInfo.selectServerInfo
09-03 16:37:46.258 ttp-nio-18084-exec-8 ==>  Preparing: SELECT host_nm, port_no, driver_nm, driver_dsn, dbuser_id, dbpassword, openclick_path, survey_path, link_path, htmlmaker_path , openimage_path, duration_path, reject_path, smtp_ip, smtp_port, fula_ip, fula_port, ftp_yn, ftp_user_id, ftp_password , lastupdate_dt, editor_id, ret_domain, coalesce(retry_cnt,0) retry_cnt, b4_send_approve_yn, b4_send_verify_yn, b4_real_send_test_send_yn, ase_link_merge_param, ase_reject_merge_param, ase_open_scriptlet , groovy_link_merge_param, groovy_reject_merge_param, groovy_open_scriptlet, resend_include_returnmail_yn, resend_include_mail_key_yn, resend_error_cd, fax_resend_error_cd, sms_resend_error_cd, altalk_resend_error_cd, push_resend_error_cd , spool_preserve_period, log_preserve_period, result_file_download_yn, sucs_result_file_download_yn, kakao_template_last_sync_dtm , (SELECT mintime FROM nvdurationinfo WHERE durationinfo_cd = '01') as duration_time FROM nvserverinfo 
09-03 16:37:46.258 ttp-nio-18084-exec-8 ==> Parameters: 
09-03 16:37:46.259 ttp-nio-18084-exec-8 <==      Total: 1
09-03 16:37:46.260 ttp-nio-18084-exec-8 EcareScenario.selectEcareScenarioDetailInfo
09-03 16:37:46.260 ttp-nio-18084-exec-8 ==>  Preparing: SELECT a.scenario_no, a.scenario_nm, a.scenario_desc, a.scenario_type, a.finish_yn, a.finish_dt, coalesce(a.tag_no,0) tag_no, a.handler_type, b.name_kor, c.tag_nm , d.ecare_no, d.user_id, d.grp_cd, d.segment_no, d.ecare_nm, d.ecare_preface, d.ecare_sts, d.create_dt, d.create_tm, d.lastupdate_dt , d.lastupdate_tm, d.campaign_type, d.template_type, coalesce(d.ecmschedule_no,0) ecmschedule_no, d.sender_nm, d.sender_email, d.sending_mode, coalesce(d.retry_cnt,1) retry_cnt, d.receiver_nm, d.sender_tel , d.retmail_receiver, d.ecare_class, d.relation_type, d.relation_tree, d.channel_type, d.service_type, d.ecare_level, d.sub_type, d.depth_no, d.verify_b4_send , d.template_sender_key, d.kakao_sender_key, d.kakao_tmpl_cd, coalesce(d.kakao_image_no,0) kakao_image_no, d.failback_send_yn, d.failback_subject, coalesce(d.handler_seq,0) handler_seq , coalesce(e.term_type,'1') term_type, f.segment_nm, f.segment_size, g.sender_nm as env_sender_nm, g.sender_email as env_sender_email , g.receiver_nm as env_receiver_nm, g.sender_tel as env_sender_tel, g.retmail_receiver as env_retmail_receiver, g.sender_fax as env_sender_fax, g.receiver_fax as env_receiver_fax , (SELECT val FROM nv_cd_mst WHERE cd_cat = '200111' AND cd = d.ecare_sts AND lang = ?) as ecare_sts_nm , a.chrg_nm, a.brc_nm , d.slot1_field, d.slot2_field, d.slot3_field, d.slot4_field, d.slot5_field , d.slot6_field, d.slot7_field, d.slot8_field, d.slot9_field, d.slot10_field , d.deploy_type , d.open_type, d.mail_type, d.req_dept_id FROM nvecarescenario a, nvuser b, nvecaremsgtag c, nvecaremsg d LEFT OUTER JOIN nvecaretraceinfo e ON d.ecare_no = e.ecare_no LEFT OUTER JOIN nvsegment f ON d.segment_no = f.segment_no LEFT OUTER JOIN nvusermailinfo g ON d.user_id = g.user_id WHERE a.grp_cd = b.grp_cd AND a.user_id = b.user_id AND a.tag_no = c.tag_no AND a.scenario_no = d.scenario_no AND a.scenario_no = ? AND d.ecare_no = ? 
09-03 16:37:46.260 ttp-nio-18084-exec-8 ==> Parameters: ko(String), 1(Integer), 1(Integer)
09-03 16:37:46.262 ttp-nio-18084-exec-8 <==      Total: 1
09-03 16:37:46.263 ttp-nio-18084-exec-8 Ecare.selectNextEcareNo
09-03 16:37:46.263 ttp-nio-18084-exec-8 ==>  Preparing: SELECT coalesce(max(ecare_no),0)+1 FROM nvecaremsg 
09-03 16:37:46.264 ttp-nio-18084-exec-8 ==> Parameters: 
09-03 16:37:46.264 ttp-nio-18084-exec-8 <==      Total: 1
09-03 16:37:46.283 ttp-nio-18084-exec-8 Ecare.selectEcareSenderEmail
09-03 16:37:46.283 ttp-nio-18084-exec-8 ==>  Preparing: SELECT sender_email FROM nvecaremsg WHERE ecare_no IN ( SELECT max(ecare_no) FROM nvecaremsg WHERE scenario_no = ? AND channel_type = ? ) 
09-03 16:37:46.283 ttp-nio-18084-exec-8 ==> Parameters: 1(Integer), M(String)
09-03 16:37:46.285 ttp-nio-18084-exec-8 <==      Total: 1
09-03 16:37:46.285 ttp-nio-18084-exec-8 Ecare.selectEcareRetmailReceiver
09-03 16:37:46.285 ttp-nio-18084-exec-8 ==>  Preparing: SELECT retmail_receiver FROM nvecaremsg WHERE ecare_no IN ( SELECT max(ecare_no) FROM nvecaremsg WHERE scenario_no = ? AND channel_type = ? ) 
09-03 16:37:46.285 ttp-nio-18084-exec-8 ==> Parameters: 1(Integer), M(String)
09-03 16:37:46.287 ttp-nio-18084-exec-8 <==      Total: 1
09-03 16:37:46.287 ttp-nio-18084-exec-8 Segment.selectSegmentByPk
09-03 16:37:46.287 ttp-nio-18084-exec-8 ==>  Preparing: SELECT segment_no, user_id, grp_cd, segment_nm, coalesce(dbinfo_seq,0) dbinfo_seq, segment_desc, sqlhead, sqltail, sqlbody, sqlfilter , lastupdate_dt, coalesce(segment_size,0) segment_size, crtgrp_cd, segment_type, filetodb_yn, editor_id, coalesce(share_yn,'N') share_yn, coalesce(active_yn,'Y') active_yn, category_cd, segment_sts , coalesce(tag_no,0) tag_no, coalesce(psegment_no,0) psegment_no, plink_seq, seg_type, testquery, updatequery , (SELECT name_kor FROM nvuser WHERE user_id = coalesce(a.editor_id, a.user_id)) name_kor , (SELECT tag_nm FROM nvsegmenttag WHERE tag_no = a.tag_no) as tag_nm FROM nvsegment a WHERE segment_no = ? 
09-03 16:37:46.287 ttp-nio-18084-exec-8 ==> Parameters: -1(Integer)
09-03 16:37:46.302 ttp-nio-18084-exec-8 <==      Total: 1
09-03 16:37:46.303 ttp-nio-18084-exec-8 Segment.selectNextSegmentNo
09-03 16:37:46.303 ttp-nio-18084-exec-8 ==>  Preparing: SELECT coalesce(max(segment_no),0)+1 FROM nvsegment 
09-03 16:37:46.303 ttp-nio-18084-exec-8 ==> Parameters: 
09-03 16:37:46.303 ttp-nio-18084-exec-8 <==      Total: 1
09-03 16:37:46.304 ttp-nio-18084-exec-8 EcmSchedule.selectNextEcmScheduleNo
09-03 16:37:46.304 ttp-nio-18084-exec-8 ==>  Preparing: SELECT coalesce(max(ecmschedule_no),0)+1 FROM nvecmschedule 
09-03 16:37:46.304 ttp-nio-18084-exec-8 ==> Parameters: 
09-03 16:37:46.304 ttp-nio-18084-exec-8 <==      Total: 1
09-03 16:37:46.305 ttp-nio-18084-exec-8 EcmSchedule.insertEcmSchedule
09-03 16:37:46.305 ttp-nio-18084-exec-8 ==>  Preparing: INSERT INTO nvecmschedule (ecmschedule_no, ecmschedule_nm, cycle_cd, sendstart_dt, sendend_dt, invoke_tm, invoke_every_min, day, sche_weeknumber, weekday, start_tm, end_tm, term_min) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
09-03 16:37:46.305 ttp-nio-18084-exec-8 ==> Parameters: 22(Integer), null, null, null, null, null, null, 0(Integer), 0(Integer), null, null, null, null
09-03 16:37:46.306 ttp-nio-18084-exec-8 <==    Updates: 1
09-03 16:37:46.307 ttp-nio-18084-exec-8 Segment.copySegmentForOmniSend
09-03 16:37:46.307 ttp-nio-18084-exec-8 ==>  Preparing: INSERT INTO nvsegment ( segment_no, user_id, grp_cd, segment_nm, dbinfo_seq, segment_desc, sqlhead, sqltail, sqlbody, sqlfilter , lastupdate_dt, segment_size, segment_type, filetodb_yn, editor_id, share_yn, active_yn, segment_sts , tag_no, psegment_no, plink_seq, seg_type, updatequery ) SELECT ?, user_id, grp_cd, ?, dbinfo_seq, segment_desc, ?, null, ?, null , ?, -1, 'Q', 'N', editor_id, 'N', 'Y', segment_sts , tag_no, ?, plink_seq, ?, ? FROM nvsegment WHERE segment_no = ? 
09-03 16:37:46.307 ttp-nio-18084-exec-8 ==> Parameters: 38(Integer), [Omni]23_M_NS(String), SELECT TARGET_KEY, TARGET_NM, TARGET_CONTACT, TARGET_LST1, TARGET_LST2 FROM NVECARESENDLOG A, NVRESENDTARGET B (String),  WHERE A.SUB_RESULT_SEQ = '$RSEQ$' AND A.SUB_ECARE_NO = 23 AND A.ECARE_NO = 1 AND A.ERROR_CD  IN ('250') AND B.CLIENT = 'EC' AND A.ECARE_NO = B.SERVICE_NO AND A.RESULT_SEQ = B.RESULT_SEQ AND A.LIST_SEQ = B.LIST_SEQ(String), 20210903(String), -1(Integer), M(String),  UPDATE NVECARESENDLOG A SET A.SUB_ECARE_NO = 23     , A.SUB_RESULT_SEQ = '$RSEQ$' WHERE ((A.SEND_DT = to_char(sysdate-3/24,'yyyymmdd') AND A.SEND_TM > to_char(sysdate-3/24,'hh24miss')) OR (A.SEND_DT > to_char(sysdate-3/24,'yyyymmdd') AND A.SEND_TM < to_char(sysdate-3/24,'hh24miss'))) AND ((A.SEND_DT = to_char(sysdate-1/24/60*10,'yyyymmdd') AND A.SEND_TM <= to_char(sysdate-1/24/60*10,'hh24miss')) OR (A.SEND_DT < to_char(sysdate-1/24/60*10,'yyyymmdd') AND A.SEND_TM >= to_char(sysdate-1/24/60*10,'hh24miss'))) AND A.ECARE_NO = 1 AND A.ERROR_CD  IN ('250') AND A.SUB_RESULT_SEQ = 0 AND A.SUB_ECARE_NO = 0(String), -1(Integer)
09-03 16:37:46.403 ttp-nio-18084-exec-8 <==    Updates: 1
09-03 16:37:46.404 ttp-nio-18084-exec-8 Semantic.copySemantic
09-03 16:37:46.404 ttp-nio-18084-exec-8 ==>  Preparing: INSERT INTO nvsemantic (segment_no, field_seq, field_nm, field_desc, field_type, field_length, initvalue, minvalue, maxvalue, null_yn, field_key) SELECT ?, field_seq, field_nm, field_desc, field_type, field_length, initvalue, minvalue, maxvalue, null_yn, field_key FROM nvsemantic WHERE segment_no = ? 
09-03 16:37:46.404 ttp-nio-18084-exec-8 ==> Parameters: 38(Integer), -1(Integer)
09-03 16:37:46.466 ttp-nio-18084-exec-8 <==    Updates: 3
09-03 16:37:46.466 ttp-nio-18084-exec-8 Ecare.copyEcareForOmni
09-03 16:37:46.466 ttp-nio-18084-exec-8 ==>  Preparing: INSERT INTO nvecaremsg ( ecare_no, user_id, grp_cd, segment_no, ecare_nm, ecare_desc, ecare_preface, ecare_sts, create_dt, create_tm , lastupdate_dt, lastupdate_tm, campaign_type, template_type, sending_sts, target_cnt, share_yn, msgassort_cd, log_yn, keepday , ecmschedule_no, sender_nm, sender_email, sending_mode, retry_cnt, receiver_nm, sender_tel, retmail_receiver, ecare_class, channel_type , htmlmaker_type, service_type, account_dt, ecare_level, category_cd, resend_yn, resend_cnt, resend_tm, scenario_no, svc_id , sub_type, editor_id, relation_type, depth_no, relation_tree, resend_ecare_no ) SELECT ?, user_id, grp_cd, ?, concat('[Omni] ', ecare_nm) as ecare_nm,ecare_desc, ?, 'I', ? ,? , lastupdate_dt, lastupdate_tm, campaign_type, template_type, sending_sts, ?, share_yn, msgassort_cd, log_yn, keepday , ?, sender_nm, ?, sending_mode, retry_cnt, receiver_nm, sender_tel, ?, ecare_class, ? , htmlmaker_type, 'S', account_dt, '1', category_cd, resend_yn, resend_cnt, resend_tm, scenario_no, svc_id , 'R', editor_id, ?, coalesce(depth_no,1)+1, ?, resend_ecare_no FROM nvecaremsg WHERE ecare_no = ? 
09-03 16:37:46.467 ttp-nio-18084-exec-8 ==> Parameters: 23(Integer), 38(Integer), null, 20210817(String), 143502(String), 0(Integer), 22(Integer), null, (String), M(String), S(String), NS(String), 1(Integer)
09-03 16:37:46.470 ttp-nio-18084-exec-8 <==    Updates: 1
09-03 16:37:46.470 ttp-nio-18084-exec-8 EcareTemplate.insertEditorEcareTemplate
09-03 16:37:46.470 ttp-nio-18084-exec-8 ==>  Preparing: INSERT INTO nvecaretemplate (ecare_no, seg, template, kakao_buttons, conts_no) VALUES (?, ?, ?, ? ,?) 
09-03 16:37:46.470 ttp-nio-18084-exec-8 ==> Parameters: 23(Integer),  (String), (String),  (String), 0(Integer)
09-03 16:37:46.471 ttp-nio-18084-exec-8 <==    Updates: 1
09-03 16:37:46.479 ttp-nio-18084-exec-9 Ecare.getEcareChannelInfo
09-03 16:37:46.479 ttp-nio-18084-exec-9 ==>  Preparing: SELECT (CASE channel_type WHEN 'M' THEN 4 WHEN 'S' THEN 3 WHEN 'T' THEN 2 WHEN 'F' THEN 1 END) as seq, ecare_no, channel_type, depth_no FROM nvecaremsg WHERE scenario_no = ? ORDER BY seq DESC, depth_no 
09-03 16:37:46.479 ttp-nio-18084-exec-9 ==> Parameters: 1(Integer)
09-03 16:37:46.480 ttp-nio-18084-exec-9 <==      Total: 2
09-03 16:37:46.481 ttp-nio-18084-exec-9 EcareScenario.selectEcareScenarioDetailInfo
09-03 16:37:46.481 ttp-nio-18084-exec-9 ==>  Preparing: SELECT a.scenario_no, a.scenario_nm, a.scenario_desc, a.scenario_type, a.finish_yn, a.finish_dt, coalesce(a.tag_no,0) tag_no, a.handler_type, b.name_kor, c.tag_nm , d.ecare_no, d.user_id, d.grp_cd, d.segment_no, d.ecare_nm, d.ecare_preface, d.ecare_sts, d.create_dt, d.create_tm, d.lastupdate_dt , d.lastupdate_tm, d.campaign_type, d.template_type, coalesce(d.ecmschedule_no,0) ecmschedule_no, d.sender_nm, d.sender_email, d.sending_mode, coalesce(d.retry_cnt,1) retry_cnt, d.receiver_nm, d.sender_tel , d.retmail_receiver, d.ecare_class, d.relation_type, d.relation_tree, d.channel_type, d.service_type, d.ecare_level, d.sub_type, d.depth_no, d.verify_b4_send , d.template_sender_key, d.kakao_sender_key, d.kakao_tmpl_cd, coalesce(d.kakao_image_no,0) kakao_image_no, d.failback_send_yn, d.failback_subject, coalesce(d.handler_seq,0) handler_seq , coalesce(e.term_type,'1') term_type, f.segment_nm, f.segment_size, g.sender_nm as env_sender_nm, g.sender_email as env_sender_email , g.receiver_nm as env_receiver_nm, g.sender_tel as env_sender_tel, g.retmail_receiver as env_retmail_receiver, g.sender_fax as env_sender_fax, g.receiver_fax as env_receiver_fax , (SELECT val FROM nv_cd_mst WHERE cd_cat = '200111' AND cd = d.ecare_sts AND lang = ?) as ecare_sts_nm , a.chrg_nm, a.brc_nm , d.slot1_field, d.slot2_field, d.slot3_field, d.slot4_field, d.slot5_field , d.slot6_field, d.slot7_field, d.slot8_field, d.slot9_field, d.slot10_field , d.deploy_type , d.open_type, d.mail_type, d.req_dept_id FROM nvecarescenario a, nvuser b, nvecaremsgtag c, nvecaremsg d LEFT OUTER JOIN nvecaretraceinfo e ON d.ecare_no = e.ecare_no LEFT OUTER JOIN nvsegment f ON d.segment_no = f.segment_no LEFT OUTER JOIN nvusermailinfo g ON d.user_id = g.user_id WHERE a.grp_cd = b.grp_cd AND a.user_id = b.user_id AND a.tag_no = c.tag_no AND a.scenario_no = d.scenario_no AND a.scenario_no = ? AND d.ecare_no = ? 
09-03 16:37:46.481 ttp-nio-18084-exec-9 ==> Parameters: ko(String), 1(Integer), 23(Integer)
09-03 16:37:46.482 ttp-nio-18084-exec-9 <==      Total: 1
09-03 16:37:46.482 ttp-nio-18084-exec-9 Ecare.updateEcare2StepInfo
09-03 16:37:46.483 ttp-nio-18084-exec-9 ==>  Preparing: UPDATE nvecaremsg SET lastupdate_dt = to_char(sysdate, 'yyyyMMdd') WHERE ecare_no = ? 
09-03 16:37:46.483 ttp-nio-18084-exec-9 ==> Parameters: 23(Integer)
09-03 16:37:46.483 ttp-nio-18084-exec-9 <==    Updates: 1
09-03 16:37:46.484 ttp-nio-18084-exec-9 EcmSchedule.selectEcmScheduleByPk
09-03 16:37:46.484 ttp-nio-18084-exec-9 ==>  Preparing: SELECT coalesce(ecmschedule_no,0) ecmschedule_no, ecmschedule_nm, cycle_cd, sendstart_dt, sendend_dt, invoke_tm, invoke_every_min , coalesce(day,0) as day, coalesce(sche_weeknumber,0) sche_weeknumber, weekday, start_tm, end_tm, term_min FROM nvecmschedule WHERE ecmschedule_no = ? 
09-03 16:37:46.484 ttp-nio-18084-exec-9 ==> Parameters: 22(Integer)
09-03 16:37:46.485 ttp-nio-18084-exec-9 <==      Total: 1
09-03 16:37:46.485 ttp-nio-18084-exec-9 CycleItem.selectCycleItemInfo
09-03 16:37:46.485 ttp-nio-18084-exec-9 ==>  Preparing: SELECT cycleitem, check_yn FROM nvcycleitem WHERE ecmschedule_no = ? 
09-03 16:37:46.486 ttp-nio-18084-exec-9 ==> Parameters: 22(Integer)
09-03 16:37:46.486 ttp-nio-18084-exec-9 <==      Total: 0
09-03 16:37:46.487 ttp-nio-18084-exec-9 EcareMultipartFile.selectEditorEcareMultipartFile
09-03 16:37:46.487 ttp-nio-18084-exec-9 ==>  Preparing: SELECT file_alias, file_path, file_size, file_name, file_type, secu_field, enc_yn FROM nvecaremultipartfile WHERE ecare_no = ? 
09-03 16:37:46.487 ttp-nio-18084-exec-9 ==> Parameters: 23(Integer)
09-03 16:37:46.487 ttp-nio-18084-exec-9 <==      Total: 0
09-03 16:37:46.488 ttp-nio-18084-exec-9 Segment.selectTargetQueryInfo
09-03 16:37:46.488 ttp-nio-18084-exec-9 ==>  Preparing: SELECT a.dbinfo_seq, coalesce(a.sqlhead,' ') sqlhead, coalesce(a.sqlbody,' ') sqlbody, coalesce(a.sqltail,' ') sqltail, a.testquery , b.dbkind, b.driver_nm, b.driver_dsn, b.dbuser_id, b.dbpassword, b.encoding, b.decoding, a.updatequery FROM nvsegment a, nvdbinfo b WHERE a.dbinfo_seq = b.dbinfo_seq AND a.segment_no = ? 
09-03 16:37:46.488 ttp-nio-18084-exec-9 ==> Parameters: 38(Integer)
09-03 16:37:46.488 ttp-nio-18084-exec-9 <==      Total: 1
09-03 16:37:46.489 ttp-nio-18084-exec-9 Semantic.selectSementicInfo
09-03 16:37:46.489 ttp-nio-18084-exec-9 ==>  Preparing: SELECT segment_no, field_seq, field_nm, field_desc, null_yn, field_key , (CASE WHEN field_key = 'K' THEN 1 WHEN field_key = 'N' THEN 2 WHEN field_key = 'E' THEN 3 WHEN field_key = 'S' THEN 4 WHEN field_key = 'A' THEN 5 WHEN field_key = 'B' THEN 6 ELSE 99 END) sort FROM nvsemantic WHERE segment_no = ? ORDER BY sort 
09-03 16:37:46.489 ttp-nio-18084-exec-9 ==> Parameters: 38(Integer)
09-03 16:37:46.490 ttp-nio-18084-exec-9 <==      Total: 3
09-03 16:37:46.491 ttp-nio-18084-exec-9 AddQuery.selectAddQuery
09-03 16:37:46.491 ttp-nio-18084-exec-9 ==>  Preparing: SELECT ecare_no, query_seq, query_type, result_id, dbinfo_seq, query, execute_type FROM nvaddquery WHERE ecare_no= ? 
09-03 16:37:46.491 ttp-nio-18084-exec-9 ==> Parameters: 23(Integer)
09-03 16:37:46.491 ttp-nio-18084-exec-9 <==      Total: 0
09-03 16:37:46.492 ttp-nio-18084-exec-9 EcareScenario.selectOmniChannelEcares
09-03 16:37:46.492 ttp-nio-18084-exec-9 ==>  Preparing: SELECT a.scenario_no, a.scenario_nm, coalesce(b.ecare_no,0) ecare_no, b.depth_no, b.channel_type, b.relation_type , (SELECT val FROM nv_cd_mst WHERE cd_cat = '200111' AND cd = b.ecare_sts AND lang = ?) ecare_sts_nm , c.segment_size as target_cnt FROM nvecarescenario a, nvecaremsg b LEFT OUTER JOIN nvsegment c ON b.segment_no = c.segment_no WHERE a.scenario_no = b.scenario_no AND a.scenario_no = ( SELECT scenario_no FROM nvecaremsg WHERE ecare_no = ? ) AND b.relation_type IN ('N','S','F','O') ORDER BY rpad( b.relation_tree , (SELECT max(depth_no) FROM nvecaremsg WHERE scenario_no = (SELECT scenario_no FROM nvecaremsg WHERE ecare_no = ?)) , 0 ), b.ecare_no 
09-03 16:37:46.492 ttp-nio-18084-exec-9 ==> Parameters: ko(String), 23(Integer), 23(Integer)
09-03 16:37:46.493 ttp-nio-18084-exec-9 <==      Total: 2
09-03 16:37:46.493 ttp-nio-18084-exec-9 ServerInfo.selectServerInfo
09-03 16:37:46.494 ttp-nio-18084-exec-9 ==>  Preparing: SELECT host_nm, port_no, driver_nm, driver_dsn, dbuser_id, dbpassword, openclick_path, survey_path, link_path, htmlmaker_path , openimage_path, duration_path, reject_path, smtp_ip, smtp_port, fula_ip, fula_port, ftp_yn, ftp_user_id, ftp_password , lastupdate_dt, editor_id, ret_domain, coalesce(retry_cnt,0) retry_cnt, b4_send_approve_yn, b4_send_verify_yn, b4_real_send_test_send_yn, ase_link_merge_param, ase_reject_merge_param, ase_open_scriptlet , groovy_link_merge_param, groovy_reject_merge_param, groovy_open_scriptlet, resend_include_returnmail_yn, resend_include_mail_key_yn, resend_error_cd, fax_resend_error_cd, sms_resend_error_cd, altalk_resend_error_cd, push_resend_error_cd , spool_preserve_period, log_preserve_period, result_file_download_yn, sucs_result_file_download_yn, kakao_template_last_sync_dtm , (SELECT mintime FROM nvdurationinfo WHERE durationinfo_cd = '01') as duration_time FROM nvserverinfo 
09-03 16:37:46.494 ttp-nio-18084-exec-9 ==> Parameters: 
09-03 16:37:46.495 ttp-nio-18084-exec-9 <==      Total: 1
09-03 16:37:46.495 ttp-nio-18084-exec-9 DbInfo.selectDbInfoList
09-03 16:37:46.495 ttp-nio-18084-exec-9 ==>  Preparing: SELECT dbinfo_seq, driver_nm, server_nm, driver_dsn, dbuser_id, dbpassword, encoding, decoding, dbkind, testquery FROM nvdbinfo 
09-03 16:37:46.495 ttp-nio-18084-exec-9 ==> Parameters: 
09-03 16:37:46.496 ttp-nio-18084-exec-9 <==      Total: 1
09-03 16:37:46.965 ttp-nio-18084-exec-6 Ecare.selectEditorEcare
09-03 16:37:46.966 ttp-nio-18084-exec-6 ==>  Preparing: SELECT ecare_preface, coalesce(template_type,0) template_type, sender_nm, sender_email, receiver_nm , retmail_receiver, sender_tel, coalesce(retry_cnt,0) retry_cnt, mail_type, tmpl_ver , coalesce(preface_ver,0) preface_ver, coalesce(cover_ver,0) cover_ver, coalesce(handler_ver,0) handler_ver, coalesce(handler_seq,0) handler_seq FROM nvecaremsg WHERE ecare_no = ? 
09-03 16:37:46.966 ttp-nio-18084-exec-6 ==> Parameters: 23(Integer)
09-03 16:37:46.967 ttp-nio-18084-exec-6 <==      Total: 1
09-03 16:37:46.997 ttp-nio-18084-exec-8 Ecare.selectSubEcareList
09-03 16:37:46.997 ttp-nio-18084-exec-8 ==>  Preparing: SELECT ecare_no, scenario_no, ecare_nm, channel_type, depth_no, relation_type FROM nvecaremsg WHERE scenario_no = ? AND depth_no = ? AND relation_tree LIKE ((SELECT relation_tree FROM nvecaremsg WHERE ecare_no = ?) || '%') 
09-03 16:37:46.997 ttp-nio-18084-exec-8 ==> Parameters: 1(Integer), 3(Integer), 23(Integer)
09-03 16:37:46.998 ttp-nio-18084-exec-8 <==      Total: 0
09-03 16:37:47.056 ttp-nio-18084-exec-7 Ecare.selectEditorEcare
09-03 16:37:47.056 ttp-nio-18084-exec-7 ==>  Preparing: SELECT ecare_preface, coalesce(template_type,0) template_type, sender_nm, sender_email, receiver_nm , retmail_receiver, sender_tel, coalesce(retry_cnt,0) retry_cnt, mail_type, tmpl_ver , coalesce(preface_ver,0) preface_ver, coalesce(cover_ver,0) cover_ver, coalesce(handler_ver,0) handler_ver, coalesce(handler_seq,0) handler_seq FROM nvecaremsg WHERE ecare_no = ? 
09-03 16:37:47.056 ttp-nio-18084-exec-7 ==> Parameters: 23(Integer)
09-03 16:37:47.056 ttp-nio-18084-exec-7 <==      Total: 1
09-03 16:37:47.057 ttp-nio-18084-exec-7 DefaultHandler.selectHandlerUseList
09-03 16:37:47.058 ttp-nio-18084-exec-7 ==>  Preparing: SELECT seq, handle_nm, handle_desc FROM nvdefaulthandler c WHERE EXISTS ( SELECT 0 FROM nvecaremsg a, nvecarescenario b WHERE a.scenario_no = b.scenario_no AND a.channel_type = c.channel AND b.handler_type = c.handle_type AND a.ecare_no = ? AND c.service_type = (CASE WHEN a.sub_type ='N' THEN 'N' WHEN a.service_type ='S' THEN 'S' ELSE 'R' END ) AND c.handle_attr = (CASE WHEN a.mail_type ='NONE' THEN 'D' WHEN a.mail_type ='' THEN 'D' ELSE a.mail_type END ) ) ORDER BY seq 
09-03 16:37:47.058 ttp-nio-18084-exec-7 ==> Parameters: 23(Integer)
09-03 16:37:47.062 ttp-nio-18084-exec-7 <==      Total: 1
09-03 16:37:47.071 ttp-nio-18084-exec-9 EcMsgHandler.selectEcMsgHandlerByPk
09-03 16:37:47.071 ttp-nio-18084-exec-9 ==>  Preparing: SELECT ecare_no, type, appsource FROM nvecmsghandler WHERE ecare_no = ? 
09-03 16:37:47.071 ttp-nio-18084-exec-9 ==> Parameters: 23(Integer)
09-03 16:37:47.072 ttp-nio-18084-exec-9 <==      Total: 0
09-03 16:37:47.163 ttp-nio-18084-exec-1 DefaultHandler.selectDefaultHandler
09-03 16:37:47.163 ttp-nio-18084-exec-1 ==>  Preparing: SELECT seq, handle_nm, handle_desc, service_type, channel, handle_attr, handle_type, user_id , to_char(to_date(create_dt, 'YYYY-MM-DD'),'YYYY-MM-DD') create_dt, to_char(to_date(create_tm, 'HH24:MI:SS'),'HH24:MI:SS') create_tm , handler, ab_test_yn, msg_type, 0 as total_rows FROM nvdefaulthandler WHERE seq = ? 
09-03 16:37:47.163 ttp-nio-18084-exec-1 ==> Parameters: 27(Integer)
09-03 16:37:47.164 ttp-nio-18084-exec-6 EcareTemplate.selectEditorEcareTemplate
09-03 16:37:47.164 ttp-nio-18084-exec-6 ==>  Preparing: SELECT a.seg, a.template, a.kakao_buttons, CASE WHEN a.seg = ' ' THEN 0 ELSE 1 END as seg_no , CASE WHEN b.kakao_image_no IS NULL THEN '' ELSE (SELECT file_preview_path FROM nvmobilecontents WHERE conts_no = b.kakao_image_no) END as image_url , a.conts_no FROM nvecaretemplate a, nvecaremsg b WHERE a.ecare_no = b.ecare_no AND b.ecare_no = ? ORDER BY seg_no 
09-03 16:37:47.164 ttp-nio-18084-exec-6 ==> Parameters: 23(Integer)
09-03 16:37:47.183 ttp-nio-18084-exec-1 <==      Total: 1
09-03 16:37:47.196 ttp-nio-18084-exec-6 <==      Total: 1
09-03 16:37:59.846 ttp-nio-18084-exec-8 Ecare.selectEditorEcare
09-03 16:37:59.846 ttp-nio-18084-exec-8 ==>  Preparing: SELECT ecare_preface, coalesce(template_type,0) template_type, sender_nm, sender_email, receiver_nm , retmail_receiver, sender_tel, coalesce(retry_cnt,0) retry_cnt, mail_type, tmpl_ver , coalesce(preface_ver,0) preface_ver, coalesce(cover_ver,0) cover_ver, coalesce(handler_ver,0) handler_ver, coalesce(handler_seq,0) handler_seq FROM nvecaremsg WHERE ecare_no = ? 
09-03 16:37:59.846 ttp-nio-18084-exec-8 ==> Parameters: 1(Integer)
09-03 16:37:59.847 ttp-nio-18084-exec-8 <==      Total: 1
09-03 16:37:59.867 ttp-nio-18084-exec-7 Ecare.selectSubEcareList
09-03 16:37:59.867 ttp-nio-18084-exec-7 ==>  Preparing: SELECT ecare_no, scenario_no, ecare_nm, channel_type, depth_no, relation_type FROM nvecaremsg WHERE scenario_no = ? AND depth_no = ? AND relation_tree LIKE ((SELECT relation_tree FROM nvecaremsg WHERE ecare_no = ?) || '%') 
09-03 16:37:59.868 ttp-nio-18084-exec-7 ==> Parameters: 1(Integer), 2(Integer), 1(Integer)
09-03 16:37:59.870 ttp-nio-18084-exec-7 <==      Total: 1
09-03 16:37:59.897 ttp-nio-18084-exec-9 Ecare.selectEditorEcare
09-03 16:37:59.897 ttp-nio-18084-exec-9 ==>  Preparing: SELECT ecare_preface, coalesce(template_type,0) template_type, sender_nm, sender_email, receiver_nm , retmail_receiver, sender_tel, coalesce(retry_cnt,0) retry_cnt, mail_type, tmpl_ver , coalesce(preface_ver,0) preface_ver, coalesce(cover_ver,0) cover_ver, coalesce(handler_ver,0) handler_ver, coalesce(handler_seq,0) handler_seq FROM nvecaremsg WHERE ecare_no = ? 
09-03 16:37:59.897 ttp-nio-18084-exec-9 ==> Parameters: 1(Integer)
09-03 16:37:59.897 ttp-nio-18084-exec-1 EcMsgHandler.selectEcMsgHandlerByPk
09-03 16:37:59.897 ttp-nio-18084-exec-1 ==>  Preparing: SELECT ecare_no, type, appsource FROM nvecmsghandler WHERE ecare_no = ? 
09-03 16:37:59.897 ttp-nio-18084-exec-1 ==> Parameters: 1(Integer)
09-03 16:37:59.898 ttp-nio-18084-exec-1 <==      Total: 0
09-03 16:37:59.898 ttp-nio-18084-exec-9 <==      Total: 1
09-03 16:37:59.899 ttp-nio-18084-exec-9 DefaultHandler.selectHandlerUseList
09-03 16:37:59.899 ttp-nio-18084-exec-9 ==>  Preparing: SELECT seq, handle_nm, handle_desc FROM nvdefaulthandler c WHERE EXISTS ( SELECT 0 FROM nvecaremsg a, nvecarescenario b WHERE a.scenario_no = b.scenario_no AND a.channel_type = c.channel AND b.handler_type = c.handle_type AND a.ecare_no = ? AND c.service_type = (CASE WHEN a.sub_type ='N' THEN 'N' WHEN a.service_type ='S' THEN 'S' ELSE 'R' END ) AND c.handle_attr = (CASE WHEN a.mail_type ='NONE' THEN 'D' WHEN a.mail_type ='' THEN 'D' ELSE a.mail_type END ) ) ORDER BY seq 
09-03 16:37:59.899 ttp-nio-18084-exec-9 ==> Parameters: 1(Integer)
09-03 16:37:59.902 ttp-nio-18084-exec-9 <==      Total: 1
09-03 16:38:00.422 ttp-nio-18084-exec-6 DefaultHandler.selectDefaultHandler
09-03 16:38:00.423 ttp-nio-18084-exec-6 ==>  Preparing: SELECT seq, handle_nm, handle_desc, service_type, channel, handle_attr, handle_type, user_id , to_char(to_date(create_dt, 'YYYY-MM-DD'),'YYYY-MM-DD') create_dt, to_char(to_date(create_tm, 'HH24:MI:SS'),'HH24:MI:SS') create_tm , handler, ab_test_yn, msg_type, 0 as total_rows FROM nvdefaulthandler WHERE seq = ? 
09-03 16:38:00.423 ttp-nio-18084-exec-6 ==> Parameters: 22(Integer)
09-03 16:38:00.426 ttp-nio-18084-exec-8 EcareTemplate.selectEditorEcareTemplate
09-03 16:38:00.426 ttp-nio-18084-exec-8 ==>  Preparing: SELECT a.seg, a.template, a.kakao_buttons, CASE WHEN a.seg = ' ' THEN 0 ELSE 1 END as seg_no , CASE WHEN b.kakao_image_no IS NULL THEN '' ELSE (SELECT file_preview_path FROM nvmobilecontents WHERE conts_no = b.kakao_image_no) END as image_url , a.conts_no FROM nvecaretemplate a, nvecaremsg b WHERE a.ecare_no = b.ecare_no AND b.ecare_no = ? ORDER BY seg_no 
09-03 16:38:00.426 ttp-nio-18084-exec-8 ==> Parameters: 1(Integer)
09-03 16:38:00.427 ttp-nio-18084-exec-8 <==      Total: 1
09-03 16:38:00.443 ttp-nio-18084-exec-6 <==      Total: 1
09-03 16:38:01.584 ttp-nio-18084-exec-7 ServerInfo.selectServerInfo
09-03 16:38:01.584 ttp-nio-18084-exec-7 ==>  Preparing: SELECT host_nm, port_no, driver_nm, driver_dsn, dbuser_id, dbpassword, openclick_path, survey_path, link_path, htmlmaker_path , openimage_path, duration_path, reject_path, smtp_ip, smtp_port, fula_ip, fula_port, ftp_yn, ftp_user_id, ftp_password , lastupdate_dt, editor_id, ret_domain, coalesce(retry_cnt,0) retry_cnt, b4_send_approve_yn, b4_send_verify_yn, b4_real_send_test_send_yn, ase_link_merge_param, ase_reject_merge_param, ase_open_scriptlet , groovy_link_merge_param, groovy_reject_merge_param, groovy_open_scriptlet, resend_include_returnmail_yn, resend_include_mail_key_yn, resend_error_cd, fax_resend_error_cd, sms_resend_error_cd, altalk_resend_error_cd, push_resend_error_cd , spool_preserve_period, log_preserve_period, result_file_download_yn, sucs_result_file_download_yn, kakao_template_last_sync_dtm , (SELECT mintime FROM nvdurationinfo WHERE durationinfo_cd = '01') as duration_time FROM nvserverinfo 
09-03 16:38:01.584 ttp-nio-18084-exec-7 ==> Parameters: 
09-03 16:38:01.587 ttp-nio-18084-exec-7 <==      Total: 1
09-03 16:38:01.588 ttp-nio-18084-exec-7 EcareScenario.selectEcareScenarioDetailInfo
09-03 16:38:01.588 ttp-nio-18084-exec-7 ==>  Preparing: SELECT a.scenario_no, a.scenario_nm, a.scenario_desc, a.scenario_type, a.finish_yn, a.finish_dt, coalesce(a.tag_no,0) tag_no, a.handler_type, b.name_kor, c.tag_nm , d.ecare_no, d.user_id, d.grp_cd, d.segment_no, d.ecare_nm, d.ecare_preface, d.ecare_sts, d.create_dt, d.create_tm, d.lastupdate_dt , d.lastupdate_tm, d.campaign_type, d.template_type, coalesce(d.ecmschedule_no,0) ecmschedule_no, d.sender_nm, d.sender_email, d.sending_mode, coalesce(d.retry_cnt,1) retry_cnt, d.receiver_nm, d.sender_tel , d.retmail_receiver, d.ecare_class, d.relation_type, d.relation_tree, d.channel_type, d.service_type, d.ecare_level, d.sub_type, d.depth_no, d.verify_b4_send , d.template_sender_key, d.kakao_sender_key, d.kakao_tmpl_cd, coalesce(d.kakao_image_no,0) kakao_image_no, d.failback_send_yn, d.failback_subject, coalesce(d.handler_seq,0) handler_seq , coalesce(e.term_type,'1') term_type, f.segment_nm, f.segment_size, g.sender_nm as env_sender_nm, g.sender_email as env_sender_email , g.receiver_nm as env_receiver_nm, g.sender_tel as env_sender_tel, g.retmail_receiver as env_retmail_receiver, g.sender_fax as env_sender_fax, g.receiver_fax as env_receiver_fax , (SELECT val FROM nv_cd_mst WHERE cd_cat = '200111' AND cd = d.ecare_sts AND lang = ?) as ecare_sts_nm , a.chrg_nm, a.brc_nm , d.slot1_field, d.slot2_field, d.slot3_field, d.slot4_field, d.slot5_field , d.slot6_field, d.slot7_field, d.slot8_field, d.slot9_field, d.slot10_field , d.deploy_type , d.open_type, d.mail_type, d.req_dept_id FROM nvecarescenario a, nvuser b, nvecaremsgtag c, nvecaremsg d LEFT OUTER JOIN nvecaretraceinfo e ON d.ecare_no = e.ecare_no LEFT OUTER JOIN nvsegment f ON d.segment_no = f.segment_no LEFT OUTER JOIN nvusermailinfo g ON d.user_id = g.user_id WHERE a.grp_cd = b.grp_cd AND a.user_id = b.user_id AND a.tag_no = c.tag_no AND a.scenario_no = d.scenario_no AND a.scenario_no = ? AND d.ecare_no = ? 
09-03 16:38:01.588 ttp-nio-18084-exec-7 ==> Parameters: ko(String), 1(Integer), 1(Integer)
09-03 16:38:01.597 ttp-nio-18084-exec-7 <==      Total: 1
09-03 16:38:01.598 ttp-nio-18084-exec-7 Ecare.selectNextEcareNo
09-03 16:38:01.598 ttp-nio-18084-exec-7 ==>  Preparing: SELECT coalesce(max(ecare_no),0)+1 FROM nvecaremsg 
09-03 16:38:01.598 ttp-nio-18084-exec-7 ==> Parameters: 
09-03 16:38:01.598 ttp-nio-18084-exec-7 <==      Total: 1
09-03 16:38:01.599 ttp-nio-18084-exec-7 Ecare.selectEcareSenderEmail
09-03 16:38:01.599 ttp-nio-18084-exec-7 ==>  Preparing: SELECT sender_email FROM nvecaremsg WHERE ecare_no IN ( SELECT max(ecare_no) FROM nvecaremsg WHERE scenario_no = ? AND channel_type = ? ) 
09-03 16:38:01.599 ttp-nio-18084-exec-7 ==> Parameters: 1(Integer), M(String)
09-03 16:38:01.600 ttp-nio-18084-exec-7 <==      Total: 1
09-03 16:38:01.600 ttp-nio-18084-exec-7 Ecare.selectEcareRetmailReceiver
09-03 16:38:01.600 ttp-nio-18084-exec-7 ==>  Preparing: SELECT retmail_receiver FROM nvecaremsg WHERE ecare_no IN ( SELECT max(ecare_no) FROM nvecaremsg WHERE scenario_no = ? AND channel_type = ? ) 
09-03 16:38:01.601 ttp-nio-18084-exec-7 ==> Parameters: 1(Integer), M(String)
09-03 16:38:01.601 ttp-nio-18084-exec-7 <==      Total: 1
09-03 16:38:01.602 ttp-nio-18084-exec-7 Segment.selectSegmentByPk
09-03 16:38:01.602 ttp-nio-18084-exec-7 ==>  Preparing: SELECT segment_no, user_id, grp_cd, segment_nm, coalesce(dbinfo_seq,0) dbinfo_seq, segment_desc, sqlhead, sqltail, sqlbody, sqlfilter , lastupdate_dt, coalesce(segment_size,0) segment_size, crtgrp_cd, segment_type, filetodb_yn, editor_id, coalesce(share_yn,'N') share_yn, coalesce(active_yn,'Y') active_yn, category_cd, segment_sts , coalesce(tag_no,0) tag_no, coalesce(psegment_no,0) psegment_no, plink_seq, seg_type, testquery, updatequery , (SELECT name_kor FROM nvuser WHERE user_id = coalesce(a.editor_id, a.user_id)) name_kor , (SELECT tag_nm FROM nvsegmenttag WHERE tag_no = a.tag_no) as tag_nm FROM nvsegment a WHERE segment_no = ? 
09-03 16:38:01.602 ttp-nio-18084-exec-7 ==> Parameters: -1(Integer)
09-03 16:38:01.603 ttp-nio-18084-exec-7 <==      Total: 1
09-03 16:38:01.603 ttp-nio-18084-exec-7 Segment.selectNextSegmentNo
09-03 16:38:01.603 ttp-nio-18084-exec-7 ==>  Preparing: SELECT coalesce(max(segment_no),0)+1 FROM nvsegment 
09-03 16:38:01.603 ttp-nio-18084-exec-7 ==> Parameters: 
09-03 16:38:01.604 ttp-nio-18084-exec-7 <==      Total: 1
09-03 16:38:01.605 ttp-nio-18084-exec-7 EcmSchedule.selectNextEcmScheduleNo
09-03 16:38:01.605 ttp-nio-18084-exec-7 ==>  Preparing: SELECT coalesce(max(ecmschedule_no),0)+1 FROM nvecmschedule 
09-03 16:38:01.605 ttp-nio-18084-exec-7 ==> Parameters: 
09-03 16:38:01.606 ttp-nio-18084-exec-7 <==      Total: 1
09-03 16:38:01.608 ttp-nio-18084-exec-7 EcmSchedule.insertEcmSchedule
09-03 16:38:01.608 ttp-nio-18084-exec-7 ==>  Preparing: INSERT INTO nvecmschedule (ecmschedule_no, ecmschedule_nm, cycle_cd, sendstart_dt, sendend_dt, invoke_tm, invoke_every_min, day, sche_weeknumber, weekday, start_tm, end_tm, term_min) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
09-03 16:38:01.608 ttp-nio-18084-exec-7 ==> Parameters: 23(Integer), null, null, null, null, null, null, 0(Integer), 0(Integer), null, null, null, null
09-03 16:38:01.609 ttp-nio-18084-exec-7 <==    Updates: 1
09-03 16:38:01.610 ttp-nio-18084-exec-7 Segment.copySegmentForOmniSend
09-03 16:38:01.610 ttp-nio-18084-exec-7 ==>  Preparing: INSERT INTO nvsegment ( segment_no, user_id, grp_cd, segment_nm, dbinfo_seq, segment_desc, sqlhead, sqltail, sqlbody, sqlfilter , lastupdate_dt, segment_size, segment_type, filetodb_yn, editor_id, share_yn, active_yn, segment_sts , tag_no, psegment_no, plink_seq, seg_type, updatequery ) SELECT ?, user_id, grp_cd, ?, dbinfo_seq, segment_desc, ?, null, ?, null , ?, -1, 'Q', 'N', editor_id, 'N', 'Y', segment_sts , tag_no, ?, plink_seq, ?, ? FROM nvsegment WHERE segment_no = ? 
09-03 16:38:01.610 ttp-nio-18084-exec-7 ==> Parameters: 39(Integer), [Omni]24_M_NF(String), SELECT TARGET_KEY, TARGET_NM, TARGET_CONTACT, TARGET_LST1, TARGET_LST2 FROM NVECARESENDLOG A, NVRESENDTARGET B (String),  WHERE A.SUB_RESULT_SEQ = '$RSEQ$' AND A.SUB_ECARE_NO = 24 AND A.ECARE_NO = 1 AND A.ERROR_CD  NOT IN ('250') AND B.CLIENT = 'EC' AND A.ECARE_NO = B.SERVICE_NO AND A.RESULT_SEQ = B.RESULT_SEQ AND A.LIST_SEQ = B.LIST_SEQ(String), 20210903(String), -1(Integer), M(String),  UPDATE NVECARESENDLOG A SET A.SUB_ECARE_NO = 24     , A.SUB_RESULT_SEQ = '$RSEQ$' WHERE ((A.SEND_DT = to_char(sysdate-3/24,'yyyymmdd') AND A.SEND_TM > to_char(sysdate-3/24,'hh24miss')) OR (A.SEND_DT > to_char(sysdate-3/24,'yyyymmdd') AND A.SEND_TM < to_char(sysdate-3/24,'hh24miss'))) AND ((A.SEND_DT = to_char(sysdate-1/24/60*10,'yyyymmdd') AND A.SEND_TM <= to_char(sysdate-1/24/60*10,'hh24miss')) OR (A.SEND_DT < to_char(sysdate-1/24/60*10,'yyyymmdd') AND A.SEND_TM >= to_char(sysdate-1/24/60*10,'hh24miss'))) AND A.ECARE_NO = 1 AND A.ERROR_CD  NOT IN ('250') AND A.SUB_RESULT_SEQ = 0 AND A.SUB_ECARE_NO = 0(String), -1(Integer)
09-03 16:38:01.611 ttp-nio-18084-exec-7 <==    Updates: 1
09-03 16:38:01.612 ttp-nio-18084-exec-7 Semantic.copySemantic
09-03 16:38:01.612 ttp-nio-18084-exec-7 ==>  Preparing: INSERT INTO nvsemantic (segment_no, field_seq, field_nm, field_desc, field_type, field_length, initvalue, minvalue, maxvalue, null_yn, field_key) SELECT ?, field_seq, field_nm, field_desc, field_type, field_length, initvalue, minvalue, maxvalue, null_yn, field_key FROM nvsemantic WHERE segment_no = ? 
09-03 16:38:01.612 ttp-nio-18084-exec-7 ==> Parameters: 39(Integer), -1(Integer)
09-03 16:38:01.613 ttp-nio-18084-exec-7 <==    Updates: 3
09-03 16:38:01.613 ttp-nio-18084-exec-7 Ecare.copyEcareForOmni
09-03 16:38:01.614 ttp-nio-18084-exec-7 ==>  Preparing: INSERT INTO nvecaremsg ( ecare_no, user_id, grp_cd, segment_no, ecare_nm, ecare_desc, ecare_preface, ecare_sts, create_dt, create_tm , lastupdate_dt, lastupdate_tm, campaign_type, template_type, sending_sts, target_cnt, share_yn, msgassort_cd, log_yn, keepday , ecmschedule_no, sender_nm, sender_email, sending_mode, retry_cnt, receiver_nm, sender_tel, retmail_receiver, ecare_class, channel_type , htmlmaker_type, service_type, account_dt, ecare_level, category_cd, resend_yn, resend_cnt, resend_tm, scenario_no, svc_id , sub_type, editor_id, relation_type, depth_no, relation_tree, resend_ecare_no ) SELECT ?, user_id, grp_cd, ?, concat('[Omni] ', ecare_nm) as ecare_nm,ecare_desc, ?, 'I', ? ,? , lastupdate_dt, lastupdate_tm, campaign_type, template_type, sending_sts, ?, share_yn, msgassort_cd, log_yn, keepday , ?, sender_nm, ?, sending_mode, retry_cnt, receiver_nm, sender_tel, ?, ecare_class, ? , htmlmaker_type, 'S', account_dt, '1', category_cd, resend_yn, resend_cnt, resend_tm, scenario_no, svc_id , 'R', editor_id, ?, coalesce(depth_no,1)+1, ?, resend_ecare_no FROM nvecaremsg WHERE ecare_no = ? 
09-03 16:38:01.614 ttp-nio-18084-exec-7 ==> Parameters: 24(Integer), 39(Integer), null, 20210817(String), 143502(String), 0(Integer), 23(Integer), null, (String), M(String), F(String), NF(String), 1(Integer)
09-03 16:38:01.615 ttp-nio-18084-exec-7 <==    Updates: 1
09-03 16:38:01.615 ttp-nio-18084-exec-7 EcareTemplate.insertEditorEcareTemplate
09-03 16:38:01.615 ttp-nio-18084-exec-7 ==>  Preparing: INSERT INTO nvecaretemplate (ecare_no, seg, template, kakao_buttons, conts_no) VALUES (?, ?, ?, ? ,?) 
09-03 16:38:01.615 ttp-nio-18084-exec-7 ==> Parameters: 24(Integer),  (String), (String),  (String), 0(Integer)
09-03 16:38:01.636 ttp-nio-18084-exec-7 <==    Updates: 1
09-03 16:38:01.648 ttp-nio-18084-exec-1 Ecare.getEcareChannelInfo
09-03 16:38:01.648 ttp-nio-18084-exec-1 ==>  Preparing: SELECT (CASE channel_type WHEN 'M' THEN 4 WHEN 'S' THEN 3 WHEN 'T' THEN 2 WHEN 'F' THEN 1 END) as seq, ecare_no, channel_type, depth_no FROM nvecaremsg WHERE scenario_no = ? ORDER BY seq DESC, depth_no 
09-03 16:38:01.649 ttp-nio-18084-exec-1 ==> Parameters: 1(Integer)
09-03 16:38:01.649 ttp-nio-18084-exec-1 <==      Total: 3
09-03 16:38:01.650 ttp-nio-18084-exec-1 EcareScenario.selectEcareScenarioDetailInfo
09-03 16:38:01.650 ttp-nio-18084-exec-1 ==>  Preparing: SELECT a.scenario_no, a.scenario_nm, a.scenario_desc, a.scenario_type, a.finish_yn, a.finish_dt, coalesce(a.tag_no,0) tag_no, a.handler_type, b.name_kor, c.tag_nm , d.ecare_no, d.user_id, d.grp_cd, d.segment_no, d.ecare_nm, d.ecare_preface, d.ecare_sts, d.create_dt, d.create_tm, d.lastupdate_dt , d.lastupdate_tm, d.campaign_type, d.template_type, coalesce(d.ecmschedule_no,0) ecmschedule_no, d.sender_nm, d.sender_email, d.sending_mode, coalesce(d.retry_cnt,1) retry_cnt, d.receiver_nm, d.sender_tel , d.retmail_receiver, d.ecare_class, d.relation_type, d.relation_tree, d.channel_type, d.service_type, d.ecare_level, d.sub_type, d.depth_no, d.verify_b4_send , d.template_sender_key, d.kakao_sender_key, d.kakao_tmpl_cd, coalesce(d.kakao_image_no,0) kakao_image_no, d.failback_send_yn, d.failback_subject, coalesce(d.handler_seq,0) handler_seq , coalesce(e.term_type,'1') term_type, f.segment_nm, f.segment_size, g.sender_nm as env_sender_nm, g.sender_email as env_sender_email , g.receiver_nm as env_receiver_nm, g.sender_tel as env_sender_tel, g.retmail_receiver as env_retmail_receiver, g.sender_fax as env_sender_fax, g.receiver_fax as env_receiver_fax , (SELECT val FROM nv_cd_mst WHERE cd_cat = '200111' AND cd = d.ecare_sts AND lang = ?) as ecare_sts_nm , a.chrg_nm, a.brc_nm , d.slot1_field, d.slot2_field, d.slot3_field, d.slot4_field, d.slot5_field , d.slot6_field, d.slot7_field, d.slot8_field, d.slot9_field, d.slot10_field , d.deploy_type , d.open_type, d.mail_type, d.req_dept_id FROM nvecarescenario a, nvuser b, nvecaremsgtag c, nvecaremsg d LEFT OUTER JOIN nvecaretraceinfo e ON d.ecare_no = e.ecare_no LEFT OUTER JOIN nvsegment f ON d.segment_no = f.segment_no LEFT OUTER JOIN nvusermailinfo g ON d.user_id = g.user_id WHERE a.grp_cd = b.grp_cd AND a.user_id = b.user_id AND a.tag_no = c.tag_no AND a.scenario_no = d.scenario_no AND a.scenario_no = ? AND d.ecare_no = ? 
09-03 16:38:01.650 ttp-nio-18084-exec-1 ==> Parameters: ko(String), 1(Integer), 24(Integer)
09-03 16:38:01.659 ttp-nio-18084-exec-1 <==      Total: 1
09-03 16:38:01.660 ttp-nio-18084-exec-1 Ecare.updateEcare2StepInfo
09-03 16:38:01.660 ttp-nio-18084-exec-1 ==>  Preparing: UPDATE nvecaremsg SET lastupdate_dt = to_char(sysdate, 'yyyyMMdd') WHERE ecare_no = ? 
09-03 16:38:01.660 ttp-nio-18084-exec-1 ==> Parameters: 24(Integer)
09-03 16:38:01.661 ttp-nio-18084-exec-1 <==    Updates: 1
09-03 16:38:01.662 ttp-nio-18084-exec-1 EcmSchedule.selectEcmScheduleByPk
09-03 16:38:01.662 ttp-nio-18084-exec-1 ==>  Preparing: SELECT coalesce(ecmschedule_no,0) ecmschedule_no, ecmschedule_nm, cycle_cd, sendstart_dt, sendend_dt, invoke_tm, invoke_every_min , coalesce(day,0) as day, coalesce(sche_weeknumber,0) sche_weeknumber, weekday, start_tm, end_tm, term_min FROM nvecmschedule WHERE ecmschedule_no = ? 
09-03 16:38:01.662 ttp-nio-18084-exec-1 ==> Parameters: 23(Integer)
09-03 16:38:01.663 ttp-nio-18084-exec-1 <==      Total: 1
09-03 16:38:01.663 ttp-nio-18084-exec-1 CycleItem.selectCycleItemInfo
09-03 16:38:01.663 ttp-nio-18084-exec-1 ==>  Preparing: SELECT cycleitem, check_yn FROM nvcycleitem WHERE ecmschedule_no = ? 
09-03 16:38:01.664 ttp-nio-18084-exec-1 ==> Parameters: 23(Integer)
09-03 16:38:01.664 ttp-nio-18084-exec-1 <==      Total: 0
09-03 16:38:01.665 ttp-nio-18084-exec-1 EcareMultipartFile.selectEditorEcareMultipartFile
09-03 16:38:01.665 ttp-nio-18084-exec-1 ==>  Preparing: SELECT file_alias, file_path, file_size, file_name, file_type, secu_field, enc_yn FROM nvecaremultipartfile WHERE ecare_no = ? 
09-03 16:38:01.665 ttp-nio-18084-exec-1 ==> Parameters: 24(Integer)
09-03 16:38:01.666 ttp-nio-18084-exec-1 <==      Total: 0
09-03 16:38:01.666 ttp-nio-18084-exec-1 Segment.selectTargetQueryInfo
09-03 16:38:01.666 ttp-nio-18084-exec-1 ==>  Preparing: SELECT a.dbinfo_seq, coalesce(a.sqlhead,' ') sqlhead, coalesce(a.sqlbody,' ') sqlbody, coalesce(a.sqltail,' ') sqltail, a.testquery , b.dbkind, b.driver_nm, b.driver_dsn, b.dbuser_id, b.dbpassword, b.encoding, b.decoding, a.updatequery FROM nvsegment a, nvdbinfo b WHERE a.dbinfo_seq = b.dbinfo_seq AND a.segment_no = ? 
09-03 16:38:01.666 ttp-nio-18084-exec-1 ==> Parameters: 39(Integer)
09-03 16:38:01.667 ttp-nio-18084-exec-1 <==      Total: 1
09-03 16:38:01.673 ttp-nio-18084-exec-1 Semantic.selectSementicInfo
09-03 16:38:01.673 ttp-nio-18084-exec-1 ==>  Preparing: SELECT segment_no, field_seq, field_nm, field_desc, null_yn, field_key , (CASE WHEN field_key = 'K' THEN 1 WHEN field_key = 'N' THEN 2 WHEN field_key = 'E' THEN 3 WHEN field_key = 'S' THEN 4 WHEN field_key = 'A' THEN 5 WHEN field_key = 'B' THEN 6 ELSE 99 END) sort FROM nvsemantic WHERE segment_no = ? ORDER BY sort 
09-03 16:38:01.673 ttp-nio-18084-exec-1 ==> Parameters: 39(Integer)
09-03 16:38:01.675 ttp-nio-18084-exec-1 <==      Total: 3
09-03 16:38:01.675 ttp-nio-18084-exec-1 AddQuery.selectAddQuery
09-03 16:38:01.676 ttp-nio-18084-exec-1 ==>  Preparing: SELECT ecare_no, query_seq, query_type, result_id, dbinfo_seq, query, execute_type FROM nvaddquery WHERE ecare_no= ? 
09-03 16:38:01.676 ttp-nio-18084-exec-1 ==> Parameters: 24(Integer)
09-03 16:38:01.676 ttp-nio-18084-exec-1 <==      Total: 0
09-03 16:38:01.677 ttp-nio-18084-exec-1 EcareScenario.selectOmniChannelEcares
09-03 16:38:01.677 ttp-nio-18084-exec-1 ==>  Preparing: SELECT a.scenario_no, a.scenario_nm, coalesce(b.ecare_no,0) ecare_no, b.depth_no, b.channel_type, b.relation_type , (SELECT val FROM nv_cd_mst WHERE cd_cat = '200111' AND cd = b.ecare_sts AND lang = ?) ecare_sts_nm , c.segment_size as target_cnt FROM nvecarescenario a, nvecaremsg b LEFT OUTER JOIN nvsegment c ON b.segment_no = c.segment_no WHERE a.scenario_no = b.scenario_no AND a.scenario_no = ( SELECT scenario_no FROM nvecaremsg WHERE ecare_no = ? ) AND b.relation_type IN ('N','S','F','O') ORDER BY rpad( b.relation_tree , (SELECT max(depth_no) FROM nvecaremsg WHERE scenario_no = (SELECT scenario_no FROM nvecaremsg WHERE ecare_no = ?)) , 0 ), b.ecare_no 
09-03 16:38:01.677 ttp-nio-18084-exec-1 ==> Parameters: ko(String), 24(Integer), 24(Integer)
09-03 16:38:01.678 ttp-nio-18084-exec-1 <==      Total: 3
09-03 16:38:01.678 ttp-nio-18084-exec-1 ServerInfo.selectServerInfo
09-03 16:38:01.678 ttp-nio-18084-exec-1 ==>  Preparing: SELECT host_nm, port_no, driver_nm, driver_dsn, dbuser_id, dbpassword, openclick_path, survey_path, link_path, htmlmaker_path , openimage_path, duration_path, reject_path, smtp_ip, smtp_port, fula_ip, fula_port, ftp_yn, ftp_user_id, ftp_password , lastupdate_dt, editor_id, ret_domain, coalesce(retry_cnt,0) retry_cnt, b4_send_approve_yn, b4_send_verify_yn, b4_real_send_test_send_yn, ase_link_merge_param, ase_reject_merge_param, ase_open_scriptlet , groovy_link_merge_param, groovy_reject_merge_param, groovy_open_scriptlet, resend_include_returnmail_yn, resend_include_mail_key_yn, resend_error_cd, fax_resend_error_cd, sms_resend_error_cd, altalk_resend_error_cd, push_resend_error_cd , spool_preserve_period, log_preserve_period, result_file_download_yn, sucs_result_file_download_yn, kakao_template_last_sync_dtm , (SELECT mintime FROM nvdurationinfo WHERE durationinfo_cd = '01') as duration_time FROM nvserverinfo 
09-03 16:38:01.678 ttp-nio-18084-exec-1 ==> Parameters: 
09-03 16:38:01.679 ttp-nio-18084-exec-1 <==      Total: 1
09-03 16:38:01.689 ttp-nio-18084-exec-1 DbInfo.selectDbInfoList
09-03 16:38:01.690 ttp-nio-18084-exec-1 ==>  Preparing: SELECT dbinfo_seq, driver_nm, server_nm, driver_dsn, dbuser_id, dbpassword, encoding, decoding, dbkind, testquery FROM nvdbinfo 
09-03 16:38:01.690 ttp-nio-18084-exec-1 ==> Parameters: 
09-03 16:38:01.691 ttp-nio-18084-exec-1 <==      Total: 1
09-03 16:38:02.373 ttp-nio-18084-exec-6 Ecare.selectEditorEcare
09-03 16:38:02.374 ttp-nio-18084-exec-6 ==>  Preparing: SELECT ecare_preface, coalesce(template_type,0) template_type, sender_nm, sender_email, receiver_nm , retmail_receiver, sender_tel, coalesce(retry_cnt,0) retry_cnt, mail_type, tmpl_ver , coalesce(preface_ver,0) preface_ver, coalesce(cover_ver,0) cover_ver, coalesce(handler_ver,0) handler_ver, coalesce(handler_seq,0) handler_seq FROM nvecaremsg WHERE ecare_no = ? 
09-03 16:38:02.374 ttp-nio-18084-exec-6 ==> Parameters: 24(Integer)
09-03 16:38:02.374 ttp-nio-18084-exec-6 <==      Total: 1
09-03 16:38:02.396 ttp-nio-18084-exec-7 Ecare.selectSubEcareList
09-03 16:38:02.396 ttp-nio-18084-exec-7 ==>  Preparing: SELECT ecare_no, scenario_no, ecare_nm, channel_type, depth_no, relation_type FROM nvecaremsg WHERE scenario_no = ? AND depth_no = ? AND relation_tree LIKE ((SELECT relation_tree FROM nvecaremsg WHERE ecare_no = ?) || '%') 
09-03 16:38:02.396 ttp-nio-18084-exec-7 ==> Parameters: 1(Integer), 3(Integer), 24(Integer)
09-03 16:38:02.397 ttp-nio-18084-exec-7 <==      Total: 0
09-03 16:38:02.429 ttp-nio-18084-exec-1 Ecare.selectEditorEcare
09-03 16:38:02.429 ttp-nio-18084-exec-9 EcMsgHandler.selectEcMsgHandlerByPk
09-03 16:38:02.429 ttp-nio-18084-exec-1 ==>  Preparing: SELECT ecare_preface, coalesce(template_type,0) template_type, sender_nm, sender_email, receiver_nm , retmail_receiver, sender_tel, coalesce(retry_cnt,0) retry_cnt, mail_type, tmpl_ver , coalesce(preface_ver,0) preface_ver, coalesce(cover_ver,0) cover_ver, coalesce(handler_ver,0) handler_ver, coalesce(handler_seq,0) handler_seq FROM nvecaremsg WHERE ecare_no = ? 
09-03 16:38:02.429 ttp-nio-18084-exec-9 ==>  Preparing: SELECT ecare_no, type, appsource FROM nvecmsghandler WHERE ecare_no = ? 
09-03 16:38:02.429 ttp-nio-18084-exec-1 ==> Parameters: 24(Integer)
09-03 16:38:02.429 ttp-nio-18084-exec-9 ==> Parameters: 24(Integer)
09-03 16:38:02.430 ttp-nio-18084-exec-9 <==      Total: 0
09-03 16:38:02.430 ttp-nio-18084-exec-1 <==      Total: 1
09-03 16:38:02.430 ttp-nio-18084-exec-1 DefaultHandler.selectHandlerUseList
09-03 16:38:02.430 ttp-nio-18084-exec-1 ==>  Preparing: SELECT seq, handle_nm, handle_desc FROM nvdefaulthandler c WHERE EXISTS ( SELECT 0 FROM nvecaremsg a, nvecarescenario b WHERE a.scenario_no = b.scenario_no AND a.channel_type = c.channel AND b.handler_type = c.handle_type AND a.ecare_no = ? AND c.service_type = (CASE WHEN a.sub_type ='N' THEN 'N' WHEN a.service_type ='S' THEN 'S' ELSE 'R' END ) AND c.handle_attr = (CASE WHEN a.mail_type ='NONE' THEN 'D' WHEN a.mail_type ='' THEN 'D' ELSE a.mail_type END ) ) ORDER BY seq 
09-03 16:38:02.430 ttp-nio-18084-exec-1 ==> Parameters: 24(Integer)
09-03 16:38:02.432 ttp-nio-18084-exec-1 <==      Total: 1
09-03 16:38:02.613 ttp-nio-18084-exec-8 DefaultHandler.selectDefaultHandler
09-03 16:38:02.613 ttp-nio-18084-exec-8 ==>  Preparing: SELECT seq, handle_nm, handle_desc, service_type, channel, handle_attr, handle_type, user_id , to_char(to_date(create_dt, 'YYYY-MM-DD'),'YYYY-MM-DD') create_dt, to_char(to_date(create_tm, 'HH24:MI:SS'),'HH24:MI:SS') create_tm , handler, ab_test_yn, msg_type, 0 as total_rows FROM nvdefaulthandler WHERE seq = ? 
09-03 16:38:02.613 ttp-nio-18084-exec-8 ==> Parameters: 27(Integer)
09-03 16:38:02.614 ttp-nio-18084-exec-6 EcareTemplate.selectEditorEcareTemplate
09-03 16:38:02.614 ttp-nio-18084-exec-6 ==>  Preparing: SELECT a.seg, a.template, a.kakao_buttons, CASE WHEN a.seg = ' ' THEN 0 ELSE 1 END as seg_no , CASE WHEN b.kakao_image_no IS NULL THEN '' ELSE (SELECT file_preview_path FROM nvmobilecontents WHERE conts_no = b.kakao_image_no) END as image_url , a.conts_no FROM nvecaretemplate a, nvecaremsg b WHERE a.ecare_no = b.ecare_no AND b.ecare_no = ? ORDER BY seg_no 
09-03 16:38:02.614 ttp-nio-18084-exec-6 ==> Parameters: 24(Integer)
09-03 16:38:02.615 ttp-nio-18084-exec-6 <==      Total: 1
09-03 16:38:02.632 ttp-nio-18084-exec-8 <==      Total: 1
